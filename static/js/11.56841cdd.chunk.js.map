{"version":3,"sources":["components/Course/CourseProgramLessonsPreview.tsx","pages/courses/preview/index.tsx","components/Preloader/index.tsx","escolalms/sdk/utils/markdown.ts","escolalms/sdk/components/Markdown/MarkdownImage.tsx","escolalms/sdk/components/Markdown/MarkdownTable.tsx","escolalms/sdk/hooks/useLessonProgram.ts","escolalms/sdk/components/Markdown/MarkdownReader.tsx","escolalms/sdk/components/Course/CourseSidebar/index.tsx","escolalms/sdk/components/Course/Players/TextPlayer.tsx","escolalms/sdk/components/Course/CourseProgramContent.tsx"],"names":["CourseProgramLessonsPreview","program","useLessonProgram","topic","lesson","onNextTopicPreview","t","useTranslation","useEffect","window","scrollTo","top","behavior","id","Fragment","className","title","introduction","fixContentForMarkdown","MarkdownReader","style","json","wrapperStyle","CourseProgramContent","preview","lessonId","Number","topicId","summary","onClick","CourseSidebar","course","CourseProgramScorm","sco","scorm","scos","find","undefined","entry_url","uuid","iframeRef","useRef","useState","height","setHeight","apiUrl","useContext","EscolaLMSContext","current","contentWindow","document","body","scrollHeight","ref","src","scrolling","CourseProgram","useParams","fetchProgram","loading","Preloader","error","role","message","to","value","Layout","lessons","length","StyledLoader","styled","div","theme","mode","backgroundDark","backgroundLight","useTheme","overflow","color","primaryColor","trimContentForMarkdown","content","replaceAll","split","map","r","trim","n","replace","join","fixInlineStylesSyntaxForMarkdown","includes","getRegexBetween","openChart","closeChart","flags","RegExp","fixUnderlineForMarkdown","fixNoticeForMarkdown","flow","MarkdownImage","props","isOpen","setIsOpen","onKeyDown","tabIndex","alt","cursor","mainSrc","onCloseRequest","MarkdownTable","children","courseRouteName","sendProgress","getNextPrevTopic","progress","isDisabledNextTopicButton","setIsDisabledNextTopicButton","lessonID","topicID","useHistory","push","topics","useMemo","onNextTopic","useCallback","topic_id","status","then","nextTopic","lesson_id","onPrevTopic","prevTopic","next","remarkPlugins","rehypePlugins","components","img","node","table","remarkGfm","rehypeRaw","linkTarget","StyledSidebar","aside","history","filter","topicIsFinished","allTopics","item","finishedTopics","concat","apply","onCompleteTopic","mobile","isMobile","currentTopicId","finishedTopicIds","onMarkFinished","onTopicClick","fontSizes","TextPlayer","onLoad","fontSize","customNoCompletedEventsIds","topicPing","h5pProgress","topicable_type","TopicType","Video","Audio","onXAPI","event","statement","ping","interval","setInterval","clearInterval","topicable","H5P","e","OEmbed","OEmbedPlayer","url","FallbackElement","RichText","AudioVideoPlayer","light","onFinish","Image","ImagePlayer","audio","Pdf","PdfPlayer","Scorm"],"mappings":"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","file":"static/js/11.56841cdd.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport CourseProgramContent from \"../../escolalms/sdk/components/Course/CourseProgramContent\";\nimport CourseSidebar from \"../../escolalms/sdk/components/Course/CourseSidebar\";\nimport MarkdownReader from \"../../escolalms/sdk/components/Markdown/MarkdownReader\";\nimport { fixContentForMarkdown } from \"../../escolalms/sdk/utils/markdown\";\nimport { useLessonProgram } from \"../../escolalms/sdk/hooks/useLessonProgram\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const CourseProgramLessonsPreview: React.FC<{\n  program: API.CourseProgram;\n}> = ({ program }) => {\n  const { topic, lesson, onNextTopicPreview } = useLessonProgram(\n    program,\n    `/courses/preview/`\n  );\n  const { t } = useTranslation();\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [topic?.id, lesson?.id]);\n\n  return (\n    <React.Fragment>\n      <div className=\"container-fluid course-program course-program-page\">\n        <div className=\"course-program-container\">\n          <div className=\"course-program-wrapper course-program-wrapper-preview\">\n            <div className=\"course-program-player\">\n              <div className=\"course-program-player-content\">\n                <h2>{topic?.title}</h2>\n\n                {topic &&\n                  topic.introduction &&\n                  fixContentForMarkdown(`${topic.introduction}`) !== \"\" && (\n                    <div className={`col-lg-12 col-md-12 col-sm-12`}>\n                      <div className=\"container-md\">\n                        <MarkdownReader>{topic.introduction}</MarkdownReader>\n                      </div>\n                    </div>\n                  )}\n                <div\n                  className=\"course-program-player-content__wrapper\"\n                  style={{\n                    ...((topic?.json?.wrapperStyle as object) || {}),\n                  }}\n                >\n                  <CourseProgramContent\n                    preview={true}\n                    lessonId={Number(lesson?.id)}\n                    topicId={Number(topic?.id)}\n                  />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                {lesson &&\n                  lesson.summary &&\n                  fixContentForMarkdown(`${lesson.summary}`) !== \"\" && (\n                    <div className={`col-lg-12 col-md-12 col-sm-12`}>\n                      <div className=\"course-program-summary\">\n                        <MarkdownReader>{lesson.summary}</MarkdownReader>\n                      </div>\n                    </div>\n                  )}\n                {topic &&\n                  topic.summary &&\n                  fixContentForMarkdown(`${topic.summary}`) !== \"\" && (\n                    <div className={`col-lg-12 col-md-12 col-sm-12`}>\n                      <div className=\"course-program-summary\">\n                        <MarkdownReader>{topic.summary}</MarkdownReader>\n                        {/* Leave it in case the business changes its mind. */}\n                        {/* {topic && topic.resources && topic.resources?.length > 0 && (\n                        <React.Fragment>\n                          <h3>{t('CourseProgram.TopicAttachment')}</h3>\n                          <div className=\"file-list\">\n                            {topic.resources.map((resource) => (\n                              <a target=\"_blank\" href={resource.url} rel=\"noreferrer\">\n                                {resource.name}\n                              </a>\n                            ))}\n                          </div>\n                        </React.Fragment>\n                      )} */}\n                      </div>\n                    </div>\n                  )}\n              </div>\n\n              <div className=\"course-program-player-next\">\n                <button\n                  className={`default-btn default-btn-equal`}\n                  onClick={() => onNextTopicPreview()}\n                >\n                  <div className=\"course-program-player-next-button__wrapper\">\n                    {t(\"Next Topic\")} &gt;\n                  </div>\n                  <span></span>\n                </button>\n              </div>\n            </div>\n            <CourseSidebar\n              course={program}\n              lessonId={Number(lesson?.id)}\n              topicId={Number(topic?.id)}\n            />\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default CourseProgramLessonsPreview;\n","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { API } from '@escolalms/sdk/lib';\nimport { useTranslation } from 'react-i18next';\nimport { EscolaLMSContext } from '@escolalms/sdk/lib/react/context';\nimport Preloader from '@/components/Preloader';\nimport Layout from '@/components/_App/Layout';\n\nimport CourseProgramLessonsPreview from '@/components/Course/CourseProgramLessonsPreview';\n\n// TODO: 99% same as: src/pages/course/index.tsx\n\nconst CourseProgramScorm: React.FC<{ program: API.CourseProgram }> = ({ program }) => {\n  const sco = program?.scorm?.scos?.find((sco) => sco.entry_url !== undefined);\n  const uuid = sco?.uuid;\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const [height, setHeight] = useState(0);\n  const headerAndFooterHeight = 610;\n  const { apiUrl } = useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (iframeRef.current) {\n      setHeight(iframeRef.current?.contentWindow?.document?.body?.scrollHeight || 0);\n    }\n  }, [iframeRef]);\n\n  if (!sco && !uuid) {\n    return <React.Fragment />;\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"container-fluid course-program\">\n        <div\n          className=\"course-program-player scorm\"\n          style={{\n            height: `${headerAndFooterHeight + height}px`,\n          }}\n        >\n          <iframe\n            title={'scorm-player'}\n            ref={iframeRef}\n            src={`${apiUrl}/api/scorm/play/${uuid}`}\n            scrolling=\"no\"\n          />\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nconst CourseProgram = () => {\n  const { t } = useTranslation();\n\n  const { id } = useParams<{ id: string }>();\n  const { program, fetchProgram } = useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (id) {\n      fetchProgram(Number(id));\n    }\n  }, [id, fetchProgram]);\n\n  if (program.loading) {\n    return <Preloader />;\n  }\n\n  if (program.error) {\n    return (\n      <div className=\"container\">\n        <div className=\"alert alert-danger\" role=\"alert\">\n          <h4 className=\"alert-heading\">{t('Error')}</h4>\n          <p> {program.error.message || program.error.error}</p>\n          <hr />\n          <p className=\"mb-0\">\n            {t('CoursePage.Preview.SeeOther')}\n            <Link to=\"/courses\">{t('Courses')}</Link>.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (program.value && program?.value?.scorm?.id) {\n    return (\n      <Layout>\n        <CourseProgramScorm program={program.value} />\n      </Layout>\n    );\n  }\n  if (program.value && program.value.lessons && program.value.lessons.length) {\n    return (\n      <Layout>\n        <CourseProgramLessonsPreview program={program.value} />;\n      </Layout>\n    );\n  }\n\n  return <Preloader />;\n};\n\nexport default CourseProgram;\n","import { useEffect } from \"react\";\nimport { Spin } from \"@escolalms/components/lib/components/atoms/Spin/Spin\";\nimport styled, { useTheme } from \"styled-components\";\n\nconst StyledLoader = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${({ theme }) =>\n    theme.mode === \"dark\" ? theme.backgroundDark : theme.backgroundLight};\n`;\n\nconst Preloader = () => {\n  const theme = useTheme();\n  useEffect(() => {\n    document.body.style.overflow = \"hidden\";\n\n    return () => {\n      document.body.style.overflow = \"inherit\";\n    };\n  }, []);\n\n  return (\n    <StyledLoader>\n      <Spin color={theme.primaryColor} />\n    </StyledLoader>\n  );\n};\n\nexport default Preloader;\n","import flow from 'lodash.flow';\n\n/* The markdown generator at multilines generates redundant `\\` characters. This method removes them. */\nconst trimContentForMarkdown = (content = ''): string => {\n  return content\n    .replaceAll(/(\\\\\\r\\n|\\\\r\\n|\\\\\\n|\\\\n)/g, '\\n') // escaped and non escaped new line\n    .split('\\n')\n    .map((r) => {\n      // if row is empty then do nothing\n      if (!r.trim().length) return r;\n\n      // remove all artifacts\n      const n = r.replace(/\\\\+/g, '');\n\n      // if, after deleting the artefacts, the row is empty, it was indeed an artefact and we remove it\n      return !n.trim().length ? n : r;\n    })\n    .join('\\n');\n};\n\nconst fixInlineStylesSyntaxForMarkdown = (content = ''): string => {\n  return !content.includes('style=”')\n    ? content\n    : content\n        .split('style=”')\n        .map((r) => r.replace('”', '\"'))\n        .join('style=\"');\n};\n\nconst getRegexBetween = (openChart: string, closeChart: string, flags?: string) =>\n  new RegExp(\n    `${openChart}(?<=(((\\\\n|\\\\s){1,}${openChart})|(^(${openChart}))))(.+?)(?=((${closeChart}(\\\\n|\\\\s){1,})|(${closeChart}$)))${closeChart}`,\n    flags,\n  );\n\n/* The markdown generator for some strange reason uses `__` for underlining (originally `__` is an alternative syntax for bold) */\nconst fixUnderlineForMarkdown = (content = ''): string => {\n  /*\n    replace\n    this: '__abc__ __dd__ccc__ _ee__fff__ gg__hh_ii__ __jj__kk_ll__'\n    to this: '<ins>abc</ins> <ins>dd__ccc</ins> _ee__fff__ gg__hh_ii__ <ins>jj__kk_ll</ins>'\n   */\n  return content.replace(getRegexBetween('_{2}', '_{2}', 'g'), '<ins>$6</ins>');\n};\n\nconst fixNoticeForMarkdown = (content = ''): string => {\n  return content\n    .replace(\n      getRegexBetween(':{3}info', ':{3}', 'gs'),\n      '<div className=\"notice-block notice-block--info\">$6</div>',\n    )\n    .replace(\n      getRegexBetween(':{3}warning', ':{3}', 'gs'),\n      '<div className=\"notice-block notice-block--warning\">$6</div>',\n    )\n    .replace(\n      getRegexBetween(':{3}tip', ':{3}', 'gs'),\n      '<div className=\"notice-block notice-block--tip\">$6</div>',\n    );\n};\n\nexport const fixContentForMarkdown = (content = ''): string => {\n  if (content === null || content === 'null') return '';\n  return flow([\n    trimContentForMarkdown,\n    fixInlineStylesSyntaxForMarkdown,\n    fixUnderlineForMarkdown,\n    fixNoticeForMarkdown,\n  ])(content);\n};\n","import React, { useState } from 'react';\nimport Lightbox from 'react-image-lightbox';\n\nconst MarkdownImage: React.ComponentType<\n  React.ClassAttributes<HTMLImageElement> & React.ImgHTMLAttributes<HTMLImageElement>\n> = (props) => {\n  const [isOpen, setIsOpen] = useState(false);\n  return (\n    <div\n      onClick={() => setIsOpen(true)}\n      onKeyDown={() => setIsOpen(true)}\n      role=\"button\"\n      tabIndex={-1}\n    >\n      <img src={props.src} alt={props.alt} style={{ cursor: 'pointer' }} />\n      {isOpen && props.src && (\n        <Lightbox mainSrc={props.src} onCloseRequest={() => setIsOpen(false)} />\n      )}\n    </div>\n  );\n};\n\nexport default MarkdownImage;\n","import React from 'react';\n\nconst MarkdownTable: React.ComponentType<React.TableHTMLAttributes<HTMLTableElement>> = (props) => {\n  return (\n    <div className=\"table-responsive\">\n      <table className={`table table-bordered table-hover ${props.className || ''}`} {...props}>\n        {props.children}\n      </table>\n    </div>\n  );\n};\n\nexport default MarkdownTable;\n","import { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useCallback, useContext, useMemo, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nexport function useLessonProgram(\n  program: API.CourseProgram,\n  courseRouteName: string = \"/course/\"\n) {\n  const { sendProgress, getNextPrevTopic, progress } =\n    useContext(EscolaLMSContext);\n  const [isDisabledNextTopicButton, setIsDisabledNextTopicButton] =\n    useState(false);\n  const { lessonID, topicID } =\n    useParams<{ lessonID: string; topicID: string }>();\n  const { push } = useHistory();\n\n  const lessonId = lessonID ? lessonID : program.lessons[0].id;\n  const topicId = topicID\n    ? topicID\n    : (program &&\n        program.lessons &&\n        program.lessons[0] &&\n        program.lessons[0].topics &&\n        program?.lessons[0]?.topics[0]?.id) ||\n      0;\n\n  const lesson: API.Lesson | undefined = useMemo(\n    () => program.lessons.find((lesson) => lesson.id === Number(lessonId)),\n    [program, lessonId]\n  );\n\n  const topic: API.Topic | undefined = useMemo(\n    () =>\n      lesson &&\n      lesson.topics &&\n      lesson.topics.find((topic) => topic.id === Number(topicId)),\n    [lesson, topicId]\n  );\n\n  const onNextTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const nextTopic = getNextPrevTopic(Number(topicId));\n\n          nextTopic &&\n            push(\n              `${courseRouteName}${program.id}/${nextTopic.lesson_id}/${nextTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n  const onPrevTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const prevTopic = getNextPrevTopic(Number(topicId), false);\n\n          prevTopic &&\n            push(\n              `${courseRouteName}${program.id}/${prevTopic.lesson_id}/${prevTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n\n  const onNextTopicPreview = useCallback(\n    (next = true) => {\n      const nextTopic = getNextPrevTopic(Number(topicId), next);\n\n      nextTopic &&\n        push(\n          `${courseRouteName}${program.id}/${nextTopic?.lesson_id}/${nextTopic?.id}`\n        );\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [lessonId, topicId, program, program.id, push, courseRouteName]\n  );\n\n  return {\n    topic,\n    lesson,\n    onNextTopic,\n    onPrevTopic,\n    getNextPrevTopic,\n    isDisabledNextTopicButton,\n    setIsDisabledNextTopicButton,\n    onNextTopicPreview,\n    sendProgress,\n    progress,\n  } as const;\n}\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport rehypeRaw from 'rehype-raw';\nimport { fixContentForMarkdown } from '../../utils/markdown';\nimport MarkdownImage from './MarkdownImage';\nimport MarkdownTable from './MarkdownTable';\n\nexport const MarkdownReader: React.FC<{\n    children?: string,\n    remarkPlugins?: React.ComponentProps<typeof ReactMarkdown>['remarkPlugins'],\n    rehypePlugins?: React.ComponentProps<typeof ReactMarkdown>['rehypePlugins']\n}> = ({\n  children = '',\n  remarkPlugins = [],\n  rehypePlugins = []\n}) => {\n  return (\n    <ReactMarkdown\n      components={{\n        img: ({ node, ...props }) => <MarkdownImage {...props} />,\n        table: ({ node, ...props }) => <MarkdownTable {...props} />,\n      }}\n      remarkPlugins={[remarkGfm, ...remarkPlugins]}\n      rehypePlugins={[rehypeRaw, ...rehypePlugins]}\n      linkTarget=\"_blank\"\n    >\n      {fixContentForMarkdown(children)}\n    </ReactMarkdown>\n  );\n};\n\nexport default MarkdownReader;\n","import React, { useCallback, useContext } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { CourseAgenda } from \"@escolalms/components/lib/components/organisms/CourseAgenda/CourseAgenda\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useHistory } from \"react-router-dom\";\nimport { isMobile } from \"react-device-detect\";\nimport styled from \"styled-components\";\nimport { useLessonProgram } from \"../../../hooks/useLessonProgram\";\n\nconst StyledSidebar = styled.aside`\n  padding-bottom: 100px;\n`;\n\nexport const CourseSidebar: React.FC<{\n  course: API.CourseProgram;\n  lessonId: number;\n  topicId: number;\n}> = ({ course, lessonId, topicId }) => {\n  const { setIsDisabledNextTopicButton, sendProgress } =\n    useLessonProgram(course);\n  const history = useHistory();\n  const program = (course?.lessons || []).filter(\n    (lesson) => lesson && lesson.topics && lesson?.topics?.length > 0\n  ) as API.Lesson[];\n  const { topicIsFinished } = useContext(EscolaLMSContext);\n  const allTopics = course.lessons.map((item) => item.topics);\n  //@ts-ignore\n  const arrayOfTopics = [].concat.apply([], allTopics);\n  const finishedTopics = arrayOfTopics\n    .filter((item: API.Topic) => topicIsFinished(item.id))\n    .map((item: API.Topic) => item.id);\n\n  const onCompleteTopic = useCallback((): void => {\n    setIsDisabledNextTopicButton && setIsDisabledNextTopicButton(false);\n    if (course?.id) {\n      sendProgress(course?.id, [{ topic_id: Number(topicId), status: 1 }]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [program, topicId, setIsDisabledNextTopicButton, sendProgress]);\n  if (!course && !program) {\n    return <React.Fragment />;\n  }\n  return (\n    <StyledSidebar>\n      <CourseAgenda\n        mobile={isMobile}\n        lessons={course.lessons}\n        currentTopicId={topicId}\n        finishedTopicIds={finishedTopics}\n        onMarkFinished={() => onCompleteTopic()}\n        onTopicClick={(topic) =>\n          history.push(`/course/${course.id}/${topic.lesson_id}/${topic.id}`)\n        }\n      />\n    </StyledSidebar>\n  );\n};\n\nexport default CourseSidebar;\n","import React, { ReactElement, FunctionComponent, useEffect } from 'react';\nimport MarkdownReader from '../../Markdown/MarkdownReader';\n\nconst fontSizes = ['small', 'regular', 'bigger', 'big'];\n\nconst TextPlayer: FunctionComponent<{\n  value?: string;\n  onLoad?: () => void;\n  fontSize: number;\n}> = ({ value, onLoad, fontSize }): ReactElement => {\n  useEffect(() => {\n    value && onLoad && onLoad();\n  }, [value, onLoad]);\n\n  return (\n    <div className={`container-xl center-image-richtext typebase size-${fontSizes[fontSize]}`}>\n      {value && <MarkdownReader>{value}</MarkdownReader>}\n    </div>\n  );\n};\n\nexport default TextPlayer;\n","import React, { useContext, useEffect, useMemo, useCallback } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { TopicType } from \"@escolalms/sdk/lib/services/courses\";\nimport { XAPIEvent } from \"@escolalms/h5p-react\";\nimport TextPlayer from \"./Players/TextPlayer\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { ImagePlayer } from \"@escolalms/components/lib/components/players/ImagePlayer/ImagePlayer\";\nimport { AudioVideoPlayer } from \"@escolalms/components/lib/components/players/AudioVideoPlayer/AudioVideoPlayer\";\nimport { OEmbedPlayer } from \"@escolalms/components/lib/components/players/OEmbedPlayer/OEmbedPlayer\";\nimport { H5P } from \"@escolalms/components/lib/components/players/H5Player/H5Player\";\nimport { PdfPlayer } from \"@escolalms/components/lib/components/players/PdfPlayer/PdfPlayer\";\nimport { isMobile } from \"react-device-detect\";\n\nexport const CourseProgramContent: React.FC<{\n  lessonId: number;\n  topicId?: number;\n  preview?: boolean;\n  customNoCompletedEventsIds?: string[];\n  setIsDisabledNextTopicButton?: (b: boolean) => void;\n}> = ({\n  lessonId,\n  topicId,\n  preview = false,\n  setIsDisabledNextTopicButton,\n  customNoCompletedEventsIds = [],\n}) => {\n  const {\n    program,\n    topicPing,\n    topicIsFinished,\n    fontSize,\n    sendProgress,\n    h5pProgress,\n    apiUrl,\n  } = useContext(EscolaLMSContext);\n  const topic = useMemo(() => {\n    return program.value?.lessons\n      ?.find((lesson: API.Lesson) => lesson.id === lessonId)\n      ?.topics?.find((topic: API.Topic) => topic.id === topicId);\n  }, [program, lessonId, topicId]);\n  useEffect(() => {\n    setIsDisabledNextTopicButton && setIsDisabledNextTopicButton(false);\n\n    if (\n      topic?.topicable_type === TopicType.Video ||\n      topic?.topicable_type === TopicType.Audio\n    ) {\n      setIsDisabledNextTopicButton && setIsDisabledNextTopicButton(true);\n    }\n  }, [\n    topicId,\n    lessonId,\n    program,\n    topic?.topicable_type,\n    setIsDisabledNextTopicButton,\n  ]);\n  const onCompleteTopic = useCallback((): void => {\n    setIsDisabledNextTopicButton && setIsDisabledNextTopicButton(false);\n    if (program?.value?.id) {\n      sendProgress(program?.value?.id, [\n        { topic_id: Number(topicId), status: 1 },\n      ]);\n    }\n  }, [program, topicId, setIsDisabledNextTopicButton, sendProgress]);\n\n  const onXAPI = useCallback(\n    (event: XAPIEvent): void => {\n      setIsDisabledNextTopicButton && setIsDisabledNextTopicButton(true);\n\n      if (event?.statement) {\n        /* \n        TODO This doesn't work \n        if (\n          (event?.statement?.verb?.id &&\n            completed.includes(event?.statement?.verb?.id)) ||\n          [...noCompletedEventsIds, ...customNoCompletedEventsIds].includes(\n            event?.statement?.context?.contextActivities?.category &&\n              event?.statement?.context?.contextActivities?.category[0]?.id\n          )\n        ) {\n          setIsDisabledNextTopicButton && setIsDisabledNextTopicButton(false);\n        }\n        \n\n        h5pProgress(\n          String(program?.value?.id),\n          Number(topicId),\n          event?.statement\n        );\n        */\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      program,\n      topicId,\n      h5pProgress,\n      setIsDisabledNextTopicButton,\n      customNoCompletedEventsIds,\n    ]\n  );\n  useEffect(() => {\n    if (!preview) {\n      const ping = () =>\n        topicId && !topicIsFinished(topicId) && topicPing(topicId);\n      const interval = setInterval(() => {\n        ping();\n      }, 5000);\n      ping();\n      return () => clearInterval(interval);\n    }\n  }, [topicPing, preview, topicId, topicIsFinished]);\n\n  if (!topic) {\n    return <React.Fragment />;\n  }\n\n  if (!topic.topicable?.value) {\n    return (\n      <pre className=\"error\">Error: topic.topicable?.value is missing</pre>\n    );\n  }\n  if (topic.topicable_type) {\n    // TODO: specific interface for advanced topic players -> example: ImagePlayer\n    switch (topic.topicable_type) {\n      case TopicType.H5P:\n        return (\n          <H5P\n            onXAPI={(e: XAPIEvent) => onXAPI(e)}\n            id={topic?.topicable?.value}\n          />\n        );\n      case TopicType.OEmbed:\n        return (\n          <>\n            <OEmbedPlayer\n              url={topic.topicable.value}\n              key={topicId}\n              FallbackElement={\n                <H5P\n                  onXAPI={(e: XAPIEvent) => onXAPI(e)}\n                  id={topic?.topicable?.value}\n                />\n              }\n            />\n          </>\n        );\n      case TopicType.RichText:\n        return <TextPlayer value={topic.topicable.value} fontSize={fontSize} />;\n      case TopicType.Video:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            url={topic.topicable.url}\n            light\n            onFinish={(): void => onCompleteTopic()}\n          />\n        );\n      case TopicType.Image:\n        return <ImagePlayer topic={topic} onLoad={() => onCompleteTopic()} />;\n\n      case TopicType.Audio:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            audio\n            url={topic.topicable.value}\n            light\n            onFinish={(): void => onCompleteTopic()}\n          />\n        );\n\n      case TopicType.Pdf:\n        return <PdfPlayer url={topic.topicable.url} />;\n\n      case TopicType.Scorm:\n        return (\n          <div className=\"scorm-wrapper\">\n            <iframe\n              title={topic.topicable.value}\n              src={`${apiUrl}/api/scorm/play/${topic.topicable.uuid}`}\n            />\n          </div>\n        );\n      default:\n        return <pre>{topic.topicable_type}</pre>;\n    }\n  }\n\n  return <pre>loading... (or error)</pre>;\n};\n\nexport default CourseProgramContent;\n"],"sourceRoot":""}