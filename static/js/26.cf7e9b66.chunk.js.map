{"version":3,"sources":["pages/login.tsx"],"names":["Login","search","useLocation","useContext","EscolaLMSContext","user","socialAuthorize","useState","view","setView","history","useHistory","token","split","setTimeout","push","loading","value","metaTitle","t","className","onResetPasswordLink","onRegisterLink","mobile","isMobile","backToLogin","return_url","onFirstStepSuccess","toast","success","onFirstStepError","error"],"mappings":"oNAkEeA,UAvDD,WACZ,IAAQC,EAAWC,cAAXD,OACR,EAAkCE,qBAAWC,oBAArCC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,gBACd,EAAwBC,mBAEtB,SAFF,mBAAOC,EAAP,KAAaC,EAAb,KAIMC,EAAUC,cACVC,EAAQX,EAAOY,MAAM,WAAW,GAatC,OAXID,IACFN,EAAgBM,GAChBE,YAAW,WACTJ,EAAQK,KAAK,OACZ,MAGAV,EAAKW,SAAYJ,IAASP,EAAKY,OAClCP,EAAQK,KAAK,KAIb,cAAC,IAAD,CAAQG,UAAWC,YAAE,oBAArB,SACE,qBAAKC,UAAU,8BAAf,SACE,qBAAKA,UAAU,YAAf,SACE,qBAAKA,UAAU,6BAAf,SACE,qBAAKA,UAAU,qBAAf,SACY,UAATZ,EACC,cAAC,YAAD,CACEa,oBAAqB,kBAAMZ,EAAQ,mBACnCa,eAAgB,kBAAMZ,EAAQK,KAAK,cACnCQ,OAAQC,aAGV,cAAC,oBAAD,CACED,OAAQC,WACRC,YAAa,kBAAMhB,EAAQ,UAC3Ba,eAAgB,kBAAMZ,EAAQK,KAAK,cACnCW,WAAW,mBACXC,mBAAoB,kBAClBC,IAAMC,QAAQV,YAAU,6BAE1BW,iBAAkB,kBAChBF,IAAMG,MAAMZ,YAAU","file":"static/js/26.cf7e9b66.chunk.js","sourcesContent":["import { useContext, useState } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { useHistory } from \"react-router-dom\";\nimport Layout from \"@/components/_App/Layout\";\nimport { isMobile } from \"react-device-detect\";\nimport { useLocation } from \"react-router-dom\";\n\nimport { LoginForm, ResetPasswordForm } from \"@escolalms/components\";\nimport { toast } from \"react-toastify\";\nimport { t } from \"i18next\";\n\nconst Login = () => {\n  const { search } = useLocation();\n  const { user, socialAuthorize } = useContext(EscolaLMSContext);\n  const [view, setView] = useState<\n    \"login\" | \"forgotPassword\" | \"register\" | \"success\"\n  >(\"login\");\n\n  const history = useHistory();\n  const token = search.split(\"?token=\")[1];\n\n  if (token) {\n    socialAuthorize(token);\n    setTimeout(() => {\n      history.push(\"/\");\n    }, 1000);\n  }\n\n  if (!user.loading && !token && user.value) {\n    history.push(\"/\");\n  }\n\n  return (\n    <Layout metaTitle={t(\"LoginAndRegister\")}>\n      <div className=\"profile-authentication-area\">\n        <div className=\"container\">\n          <div className=\"row justify-content-center\">\n            <div className=\"col-lg-6 col-md-12\">\n              {view === \"login\" ? (\n                <LoginForm\n                  onResetPasswordLink={() => setView(\"forgotPassword\")}\n                  onRegisterLink={() => history.push(\"/register\")}\n                  mobile={isMobile}\n                />\n              ) : (\n                <ResetPasswordForm\n                  mobile={isMobile}\n                  backToLogin={() => setView(\"login\")}\n                  onRegisterLink={() => history.push(\"/register\")}\n                  return_url=\"#/reset-password\"\n                  onFirstStepSuccess={() =>\n                    toast.success(t<string>(\"LoginPage.ForgotSuccess\"))\n                  }\n                  onFirstStepError={() =>\n                    toast.error(t<string>(\"UnexpectedError\"))\n                  }\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}