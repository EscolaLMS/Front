{"version":3,"sources":["config/app.ts","utils/date.ts","utils/index.ts","components/Preloader/index.tsx","../node_modules/@escolalms/components/lib/components/molecules/Upload/Upload.js","hooks/useLessonProgram.ts","components/Course/Players/ScormPlayer.tsx","components/Course/CourseSidebar/index.tsx","components/Course/Players/TextPlayer.tsx","components/Course/CourseProgramContent.tsx","../node_modules/@escolalms/components/lib/components/players/ProjectPlayer/ProjectPlayer.js","../node_modules/@escolalms/sdk/lib/services/project.js"],"names":["APP_CONFIG","defaultDateFormat","defaultDateTimeFormat","tutorPlaceholderPath","formatDate","date","dateFormat","arguments","length","undefined","format","Date","isTwoDatesEqual","firstDate","secondDate","createArrayWithDateAndTimes","terms","newTerms","forEach","term","existingTerm","find","t","times","push","removePastDates","dates","filter","isAfter","sortDates","sort","a","b","getTime","extractTimeUnits","input","matches","Array","from","matchAll","extractedUnits","foundMatch","match","value","parseInt","unit","numberRegex","addTimeToDate","time","add","years","year","months","month","weeks","week","days","day","hours","hour","minutes","minute","seconds","second","getOrderProductsNames","order","_order$items","items","map","item","name","join","getNotificationTranslationObject","notification","_notification$data$st","_notification$data$st2","_notification$data$st3","_notification$data$st4","_notification$data$pr","_notification$data$pr2","_notification$data$pr3","_notification$data$pr4","_notification$data$pr5","_notification$data$pr6","_notification$data$pr7","_notification$data$pa","_notification$data$pa2","_notification$data$pa3","_notification$data$pa4","_notification$data$pa5","_notification$data$pa6","_notification$data$pa7","_notification$data$co","_notification$data$co2","_notification$data$co3","_notification$data$co4","_notification$data$co5","_notification$data$co6","_notification$data$co7","_notification$data$co8","_notification$data$co9","_notification$data$co10","_notification$data$co11","_notification$data$co12","_notification$data$co13","_notification$data$to","_notification$data$co14","_notification$data$co15","_notification$data$co16","_notification$data$co17","_notification$data$co18","_notification$data$co19","_notification$data$co20","_notification$data$co21","_notification$data$co22","_notification$data$co23","_notification$data$co24","_notification$data$co25","_notification$data$co26","translation","concat","event","EventTypes","StationaryEventAuthorAssigned","object","data","stationaryEvent","StationaryEventAuthorUnassigned","StationaryEventAssigned","StationaryEventUnassigned","AbandonedCartEvent","OrderCancelled","OrderCreated","OrderPaid","ProductableAttached","productable","ProductableDetached","ProductAddedToCart","product","ProductAttached","ProductBought","ProductDetached","ProductRemovedFromCart","PaymentCancelled","amount","payment","payable","PaymentFailed","PaymentRegistered","PaymentSuccess","CourseAccessFinished","course","title","CourseAccessStarted","CourseAssigned","CourseDeadlineSoon","active_to","CoursedPublished","CourseFinished","CourseStarted","CourseStatusChanged","CourseTutorAssigned","CourseTutorUnassigned","CourseUnassigned","TopicFinished","TopicTypeChanged","topicContent","ReportTerm","consultationTerm","consultation","executed_at","user","first_name","last_name","ApprovedTerm","ApprovedTermWithTrainer","ChangeTerm","RejectTerm","RejectTermWithTrainer","ReminderAboutTerm","ReminderTrainerAboutTerm","roundTo","val","places","divider","returnedValue","Math","round","pow","formatPrice","price","taxRate","toLocaleString","minimumFractionDigits","maximumFractionDigits","userIsCourseAuthor","userId","authors","findIndex","author","id","getFormattedDifferenceRelativeToNow","_ref","daysDifference","differenceInDays","hoursDifference","differenceInHours","minutesDifference","differenceInMinutes","timeDifferenceInDays","relativeTimeFormatter","Intl","RelativeTimeFormat","style","StyledLoader","styled","div","_templateObject","_taggedTemplateLiteral","theme","mode","dm__background","background","Preloader","useTheme","useEffect","document","body","overflow","_jsx","children","Spin","color","primaryColor","__makeTemplateObject","this","cooked","raw","Object","defineProperty","__assign","assign","s","i","n","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","__setModuleDefault","v","__importStar","mod","result","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","exports","Upload","templateObject_1","templateObject_2","jsx_runtime_1","require","react_1","styled_components_1","__1","react_i18next_1","utils_1","utils_2","zIndexTop","StyledDiv","default","_a","getStylesBasedOnTheme","gray1","gray3","cardRadius","UploadIcon","jsx","width","height","viewBox","fill","xmlns","d","props","useTranslation","onChange","url","loading","buttonTitle","_b","className","rest","_c","useState","src","setSrc","onInternalChange","useCallback","target","files","file","reader_1","FileReader","readAsDataURL","onload","toString","onerror","error","console","log","getUniqueId","jsxs","type","alt","Link","underline","withTheme","useLessonProgram","program","_flatLessons$","_flatTopics$","courseRouteName","sendProgress","getNextPrevTopic","progress","courseProgressDetails","useContext","EscolaLMSContext","isNextTopicButtonDisabled","disableNextTopicButton","lessonID","topicID","useParams","useHistory","flatLessons","useMemo","_program$lessons","getFlatLessons","lessons","flatTopics","_program$lessons2","getFlatTopics","lessonId","Number","topicId","lesson","topic","isLastTopic","_flatTopics$at","at","onNextTopic","topic_id","status","then","nextTopic","lesson_id","onPrevTopic","prevTopic","can_skip","onNextTopicPreview","next","fullview","css","_templateObject2","_templateObject3","ScormPlayer","apiUrl","fullView","setFullView","_jsxs","Button","onClick","ResizeIcon","uuid","StyledSidebar","aside","isMobile","CourseSidebar","_ref2","_user$value","onCompleteTopic","onCourseFinish","history","agendaVisible","setAgendaVisible","_lesson$topics$length","_lesson$topics","topics","topicIsFinished","_course$lessons","getCourseProgress","_progress$value$find","courseId","byId","courseProgress","finishedTopics","some","progressItem","CourseAgenda","areAllTopicsUnlocked","onNextTopicClick","currentTopicIndex","mobile","currentTopicId","finishedTopicIds","onMarkFinished","onTopicClick","onCourseFinished","React","Fragment","TextPlayerStyles","TextPlayer","onLoad","resources","isResources","MarkdownRenderer","Text","_ref3","Download","href","fileName","StyledPdfPlayer","PdfPlayer","CourseProgramContent","_topic$topicable","_program$value$id","_program$value","preview","isThereAnotherTopic","onXAPI","onVideoEnd","onAudioEnd","onPdfEnd","onQuizEnd","onProjectEnd","onProjectsChange","topicPing","isTopicFinished","Boolean","ping","interval","setInterval","clearInterval","topicable","topicable_type","API","TopicType","H5P","H5Player","h5pObject","content","hideActionButtons","OEmbed","_Fragment","OEmbedPlayer","RichText","Video","AudioVideoPlayer","light","onTopicEnd","Image","ImagePlayer","Audio","audio","Pdf","pageConfig","renderMode","Scorm","GiftQuiz","GiftQuizPlayer","Project","ProjectPlayer","course_id","onSuccess","__spreadArray","to","pack","ar","l","slice","date_fns_1","react_2","project_1","Button_1","Card_1","Spin_1","Text_1","MarkdownRenderer_1","Upload_1","ProjectPlayerWrapper","IconBin","ProjectsList","projects","onDeleteSuccess","onDeleteError","token","isDeleting","setIsDeleting","onFileDeleteFactory","fileId","warn","prev","removeProject","catch","finally","created_at","Card","DATETIME_FORMAT","includes","onError","setProjects","_d","isUploading","setIsUploading","refreshProjects","fetchProjects","res","success","err","onProjectFileSelect","currentTarget","addProject","description","disabled","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","done","__generator","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","op","TypeError","pop","__importDefault","umi_request_1","options","formData","FormData","entries","key","append","method","headers","Accept","Authorization","currentTimezone","per_page","page","params","project_file_id"],"mappings":"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","file":"static/js/4.10eba919.chunk.js","sourcesContent":["export const APP_CONFIG = {\n  defaultDateFormat: \"dd/MM/yyyy\",\n  defaultDateTimeFormat: \"dd/MM/yyyy, HH:mm\",\n  tutorPlaceholderPath: \"/images/tutorblind.png\",\n};\n","import { add, format, isAfter } from \"date-fns\";\nimport { APP_CONFIG } from \"@/config/app\";\n\nexport const formatDate = (\n  date: string | number | Date | null | undefined,\n  dateFormat: string = APP_CONFIG.defaultDateFormat\n) => {\n  if (!date) return \"\";\n  return format(new Date(date), dateFormat);\n};\n\nexport const isTwoDatesEqual = (\n  firstDate: Date | string | number | null | undefined,\n  secondDate: Date | string | number | null | undefined,\n  format?: string\n) => {\n  if (!firstDate || !secondDate) return false;\n  return formatDate(firstDate, format) === formatDate(secondDate, format);\n};\n\nexport const createArrayWithDateAndTimes = (terms: string[] | Date[]) => {\n  const newTerms: {\n    date: string;\n    times: Date[];\n  }[] = [];\n\n  terms.forEach((term) => {\n    const date = format(new Date(term), \"MM/dd/yyyy\");\n    const existingTerm = newTerms.find(\n      (t) => format(new Date(t.date), \"MM/dd/yyyy\") === date\n    );\n\n    if (existingTerm) {\n      existingTerm.times.push(new Date(term));\n    } else {\n      newTerms.push({\n        date: date,\n        times: [new Date(term)],\n      });\n    }\n  });\n\n  return newTerms;\n};\n\nexport const removePastDates = (dates: Date[]) =>\n  dates.filter((date) => isAfter(date, new Date()));\n\nexport const sortDates = (dates: Date[]): Date[] =>\n  dates.sort((a, b) => a.getTime() - b.getTime());\n\nexport const extractTimeUnits = (input: string): Record<string, number> => {\n  const timeRegex = /(\\d+)\\s+(day|hour|minute|second|week|year)s?/g;\n  const matches = Array.from(input.matchAll(timeRegex));\n\n  const extractedUnits: Record<string, number> = {};\n\n  let foundMatch = false;\n  matches.forEach((match) => {\n    foundMatch = true;\n    const value = parseInt(match[1]);\n    const unit = match[2];\n\n    if (!extractedUnits[unit]) {\n      extractedUnits[unit] = value;\n    } else {\n      extractedUnits[unit] += value;\n    }\n  });\n\n  if (!foundMatch) {\n    const numberRegex = /\\d+/g;\n    const numberMatches = Array.from(input.matchAll(numberRegex));\n\n    numberMatches.forEach((match) => {\n      const value = parseInt(match[0]);\n      extractedUnits[\"hour\"] = value;\n    });\n  }\n\n  return extractedUnits;\n};\n\nexport const addTimeToDate = (\n  date: Date | string | number,\n  time: {\n    day?: number;\n    hour?: number;\n    minute?: number;\n    second?: number;\n    week?: number;\n    year?: number;\n    month?: number;\n  }\n) => {\n  return add(new Date(date), {\n    years: time.year || 0,\n    months: time.month || 0,\n    weeks: time.week || 0,\n    days: time.day || 0,\n    hours: time.hour || 0,\n    minutes: time.minute || 0,\n    seconds: time.second || 0,\n  });\n};\n","import { EventTypes, Notification, Order } from \"@escolalms/sdk/lib/types/api\";\nimport { APP_CONFIG } from \"@/config/app\";\nimport { formatDate } from \"@/utils/date\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport {\n  differenceInDays,\n  differenceInHours,\n  differenceInMinutes,\n} from \"date-fns\";\n\nexport const getTopicType = (type: string) => type.split(\"\\\\\")?.pop();\n\nexport const getPriceWithTax = (price: number, taxPercentage: number) => {\n  const totalTax = ((price / 100) * taxPercentage).toFixed(2);\n  const totalPrice = Number(price / 100) + Number(totalTax);\n  return totalPrice.toFixed(2);\n};\n\nexport const getOrderProductsNames = (order: Order | undefined | null) => {\n  if (!order) return \"\";\n  return order.items?.map((item) => item.name).join(\", \");\n};\n\nexport const getNotificationTranslationObject = (\n  notification: Notification\n): {\n  translation: string;\n  object?: { name?: string; amount?: number; date?: string; user?: string };\n} => {\n  const translationPrefix = \"Notifications.\";\n  const translation = `${translationPrefix}${notification.event}`;\n  switch (notification.event) {\n    // STATIONARY EVENT\n    case EventTypes.StationaryEventAuthorAssigned:\n      return {\n        translation,\n        object: { name: notification.data.stationaryEvent?.name || \"\" },\n      };\n    case EventTypes.StationaryEventAuthorUnassigned:\n      return {\n        translation,\n        object: { name: notification.data.stationaryEvent?.name || \"\" },\n      };\n    case EventTypes.StationaryEventAssigned:\n      return {\n        translation,\n        object: { name: notification.data.stationaryEvent?.name || \"\" },\n      };\n    case EventTypes.StationaryEventUnassigned:\n      return {\n        translation,\n        object: { name: notification.data.stationaryEvent?.name || \"\" },\n      };\n    // CART\n    case EventTypes.AbandonedCartEvent:\n      return { translation };\n    case EventTypes.OrderCancelled:\n      return { translation };\n    case EventTypes.OrderCreated:\n      return { translation };\n    case EventTypes.OrderPaid:\n      return {\n        translation,\n        object: { name: getOrderProductsNames(notification.data.order) || \"\" },\n      };\n    case EventTypes.ProductableAttached:\n      return {\n        translation,\n        object: { name: notification.data.productable?.name || \"\" },\n      };\n    case EventTypes.ProductableDetached:\n      return {\n        translation,\n        object: { name: notification.data.productable?.name || \"\" },\n      };\n    case EventTypes.ProductAddedToCart:\n      return {\n        translation,\n        object: { name: notification.data.product?.name || \"\" },\n      };\n    case EventTypes.ProductAttached:\n      return {\n        translation,\n        object: { name: notification.data.product?.name || \"\" },\n      };\n    case EventTypes.ProductBought:\n      return {\n        translation,\n        object: { name: notification.data.product?.name || \"\" },\n      };\n    case EventTypes.ProductDetached:\n      return {\n        translation,\n        object: { name: notification.data.product?.name || \"\" },\n      };\n    case EventTypes.ProductRemovedFromCart:\n      return {\n        translation,\n        object: { name: notification.data.product?.name || \"\" },\n      };\n    // PAYMENT\n    case EventTypes.PaymentCancelled:\n      return {\n        translation,\n        object: {\n          amount: notification.data.payment?.amount || 0,\n          name: getOrderProductsNames(notification.data.payment?.payable),\n        },\n      };\n    case EventTypes.PaymentFailed:\n      return {\n        translation,\n        object: {\n          amount: notification.data.payment?.amount || 0,\n          name: getOrderProductsNames(notification.data.payment?.payable),\n        },\n      };\n    case EventTypes.PaymentRegistered:\n      return {\n        translation,\n        object: {\n          amount: notification.data.payment?.amount || 0,\n        },\n      };\n    case EventTypes.PaymentSuccess:\n      return {\n        translation,\n        object: {\n          amount: notification.data.payment?.amount || 0,\n          name: getOrderProductsNames(notification.data.payment?.payable),\n        },\n      };\n    // COURSE\n    case EventTypes.CourseAccessFinished:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.CourseAccessStarted:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.CourseAssigned:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.CourseDeadlineSoon:\n      return {\n        translation,\n        object: {\n          name: notification.data.course?.title || \"\",\n          date: formatDate(\n            notification.data.course?.active_to,\n            APP_CONFIG.defaultDateTimeFormat\n          ),\n        },\n      };\n    case EventTypes.CoursedPublished:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.CourseFinished:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.CourseStarted:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.CourseStatusChanged:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.CourseTutorAssigned:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.CourseTutorUnassigned:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.CourseUnassigned:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    case EventTypes.TopicFinished:\n      return {\n        translation,\n        object: { name: notification.data.course?.title || \"\" },\n      };\n    // TOPIC\n    case EventTypes.TopicTypeChanged:\n      return {\n        translation,\n        object: { name: notification.data.topicContent?.value || \"\" },\n      };\n    // CONSULTATIONS\n    case EventTypes.ReportTerm:\n      return {\n        translation,\n        object: {\n          name: notification.data.consultationTerm?.consultation.name || \"\",\n          date: formatDate(\n            notification.data.consultationTerm?.executed_at,\n            APP_CONFIG.defaultDateTimeFormat\n          ),\n          user: `${notification.data.consultationTerm?.user?.first_name} ${notification.data.consultationTerm?.user?.last_name}`,\n        },\n      };\n    case EventTypes.ApprovedTerm:\n      return {\n        translation,\n        object: {\n          date:\n            formatDate(notification.data.consultationTerm?.executed_at) || \"\",\n        },\n      };\n    case EventTypes.ApprovedTermWithTrainer:\n      return {\n        translation,\n        object: {\n          date:\n            formatDate(notification.data.consultationTerm?.executed_at) || \"\",\n        },\n      };\n    case EventTypes.ChangeTerm:\n      return {\n        translation,\n        object: {\n          date:\n            formatDate(notification.data.consultationTerm?.executed_at) || \"\",\n        },\n      };\n    case EventTypes.RejectTerm:\n      return {\n        translation,\n        object: {\n          date:\n            formatDate(notification.data.consultationTerm?.executed_at) || \"\",\n        },\n      };\n    case EventTypes.RejectTermWithTrainer:\n      return {\n        translation,\n        object: {\n          date:\n            formatDate(notification.data.consultationTerm?.executed_at) || \"\",\n        },\n      };\n    case EventTypes.ReminderAboutTerm:\n      return {\n        translation,\n        object: {\n          date:\n            formatDate(notification.data.consultationTerm?.executed_at) || \"\",\n        },\n      };\n    case EventTypes.ReminderTrainerAboutTerm:\n      return {\n        translation,\n        object: {\n          date:\n            formatDate(notification.data.consultationTerm?.executed_at) || \"\",\n        },\n      };\n    default:\n      return { translation };\n  }\n};\n\nexport const roundTo = (val: number, places = 2, divider?: number): number => {\n  if (!val || typeof val !== \"number\") return 0;\n  const returnedValue =\n    Math.round(val * Math.pow(10, places)) / Math.pow(10, places);\n  if (divider) {\n    return returnedValue / divider;\n  }\n  return returnedValue;\n};\n\nexport const formatPrice = (price: number | undefined, taxRate?: number) => {\n  if (!price) return 0;\n  const roundedPrice = taxRate\n    ? roundTo(price, 2, 100) * (1 + taxRate / 100)\n    : roundTo(price, 2, 100);\n  const formatted = roundedPrice.toLocaleString(undefined, {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  });\n  return formatted;\n};\n\nexport const userIsCourseAuthor = (\n  userId: number,\n  course: API.Course\n): boolean => {\n  return course.authors.findIndex((author) => author.id === userId) !== -1;\n};\n\nexport const getFormattedDifferenceRelativeToNow = (time: Date) => {\n  const daysDifference = time\n    ? differenceInDays(time.getTime(), new Date().getTime())\n    : null;\n  const hoursDifference = time\n    ? differenceInHours(time.getTime(), new Date().getTime())\n    : null;\n  const minutesDifference = time\n    ? differenceInMinutes(time.getTime(), new Date().getTime())\n    : null;\n\n  const timeDifferenceInDays: null | Parameters<\n    Intl.RelativeTimeFormat[\"format\"]\n  > =\n    daysDifference !== null && daysDifference !== 0\n      ? [daysDifference, \"day\"]\n      : null;\n\n  const timeDifferenceInHours: null | Parameters<\n    Intl.RelativeTimeFormat[\"format\"]\n  > =\n    hoursDifference !== null && hoursDifference !== 0\n      ? [hoursDifference, \"hour\"]\n      : null;\n\n  const timeDifferenceInMinutes: null | Parameters<\n    Intl.RelativeTimeFormat[\"format\"]\n  > =\n    minutesDifference !== null && minutesDifference !== 0\n      ? [minutesDifference, \"minute\"]\n      : null;\n\n  return (\n    timeDifferenceInDays ?? timeDifferenceInHours ?? timeDifferenceInMinutes\n  );\n};\n\nexport const relativeTimeFormatter = new Intl.RelativeTimeFormat(\"pl\", {\n  style: \"short\",\n});\n","import { useEffect } from \"react\";\nimport { Spin } from \"@escolalms/components/lib/components/atoms/Spin/Spin\";\nimport styled, { useTheme } from \"styled-components\";\n\nconst StyledLoader = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${({ theme }) =>\n    theme.mode === \"dark\" ? theme.dm__background : theme.background};\n`;\n\nconst Preloader = () => {\n  const theme = useTheme();\n  useEffect(() => {\n    document.body.style.overflow = \"hidden\";\n\n    return () => {\n      document.body.style.overflow = \"inherit\";\n    };\n  }, []);\n\n  return (\n    <StyledLoader>\n      <Spin color={theme.primaryColor} />\n    </StyledLoader>\n  );\n};\n\nexport default Preloader;\n","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Upload = void 0;\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\nvar react_1 = require(\"react\");\nvar styled_components_1 = __importStar(require(\"styled-components\"));\nvar __1 = require(\"../../..\");\nvar react_i18next_1 = require(\"react-i18next\");\nvar utils_1 = require(\"../../../utils/utils\");\nvar utils_2 = require(\"../../../utils/utils\");\nvar zIndexTop = 999;\nvar StyledDiv = (0, styled_components_1.default)(\"div\")(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  width: 100%;\\n  text-align: center;\\n  position: relative;\\n  > a {\\n    margin-top: 0.5em;\\n  }\\n  > input {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    height: 100%;\\n    z-index: \", \";\\n    opacity: 0.001;\\n  }\\n\\n  .wrapper {\\n    width: 100%;\\n    position: relative;\\n    cursor: pointer;\\n    :after {\\n      content: \\\"\\\";\\n      padding-top: 100%;\\n      display: block;\\n    }\\n\\n    .border,\\n    img,\\n    input {\\n      position: absolute;\\n      left: 0;\\n      top: 0;\\n      width: 100%;\\n      height: 100%;\\n    }\\n    img {\\n      display: block;\\n      object-fit: cover;\\n      z-index: \", \";\\n    }\\n    img,\\n    svg {\\n      transition: transform 0.5s ease-out;\\n    }\\n    .border {\\n      overflow: hidden;\\n      border-width: 1px;\\n      opacity: 1;\\n      border: \", \";\\n      border-radius: \", \"px;\\n      display: flex;\\n      flex-direction: row;\\n      flex-wrap: nowrap;\\n      justify-content: center;\\n      align-items: center;\\n      align-content: center;\\n\\n      > svg {\\n        position: relative;\\n        z-index: \", \";\\n      }\\n    }\\n  }\\n\\n  &:hover {\\n    .wrapper .border > svg {\\n      transform: scale(1.5);\\n      z-index: \", \";\\n    }\\n    img {\\n      transform: scale(1.1);\\n    }\\n    a:after {\\n      transform: scaleX(0);\\n      transform-origin: bottom left;\\n    }\\n  }\\n\"], [\"\\n  width: 100%;\\n  text-align: center;\\n  position: relative;\\n  > a {\\n    margin-top: 0.5em;\\n  }\\n  > input {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    height: 100%;\\n    z-index: \", \";\\n    opacity: 0.001;\\n  }\\n\\n  .wrapper {\\n    width: 100%;\\n    position: relative;\\n    cursor: pointer;\\n    :after {\\n      content: \\\"\\\";\\n      padding-top: 100%;\\n      display: block;\\n    }\\n\\n    .border,\\n    img,\\n    input {\\n      position: absolute;\\n      left: 0;\\n      top: 0;\\n      width: 100%;\\n      height: 100%;\\n    }\\n    img {\\n      display: block;\\n      object-fit: cover;\\n      z-index: \", \";\\n    }\\n    img,\\n    svg {\\n      transition: transform 0.5s ease-out;\\n    }\\n    .border {\\n      overflow: hidden;\\n      border-width: 1px;\\n      opacity: 1;\\n      border: \", \";\\n      border-radius: \", \"px;\\n      display: flex;\\n      flex-direction: row;\\n      flex-wrap: nowrap;\\n      justify-content: center;\\n      align-items: center;\\n      align-content: center;\\n\\n      > svg {\\n        position: relative;\\n        z-index: \", \";\\n      }\\n    }\\n  }\\n\\n  &:hover {\\n    .wrapper .border > svg {\\n      transform: scale(1.5);\\n      z-index: \", \";\\n    }\\n    img {\\n      transform: scale(1.1);\\n    }\\n    a:after {\\n      transform: scaleX(0);\\n      transform-origin: bottom left;\\n    }\\n  }\\n\"])), zIndexTop, zIndexTop - 1, function (_a) {\n    var theme = _a.theme;\n    return \"1px solid \".concat((0, utils_1.getStylesBasedOnTheme)(theme.mode, theme.gray1, theme.gray3));\n}, function (_a) {\n    var theme = _a.theme;\n    return theme.cardRadius;\n}, zIndexTop - 2, zIndexTop - 1);\nvar UploadIcon = function () { return ((0, jsx_runtime_1.jsx)(\"svg\", __assign({ width: \"20\", height: \"19\", viewBox: \"0 0 20 19\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, { children: (0, jsx_runtime_1.jsx)(\"path\", { d: \"M20 10.636V17.636C20 17.9012 19.8946 18.1556 19.7071 18.3431C19.5196 18.5306 19.2652 18.636 19 18.636H1C0.734784 18.636 0.48043 18.5306 0.292893 18.3431C0.105357 18.1556 0 17.9012 0 17.636V10.636C0 10.3708 0.105357 10.1164 0.292893 9.92888C0.48043 9.74134 0.734784 9.63599 1 9.63599C1.26522 9.63599 1.51957 9.74134 1.70711 9.92888C1.89464 10.1164 2 10.3708 2 10.636V16.636H18V10.636C18 10.3708 18.1054 10.1164 18.2929 9.92888C18.4804 9.74134 18.7348 9.63599 19 9.63599C19.2652 9.63599 19.5196 9.74134 19.7071 9.92888C19.8946 10.1164 20 10.3708 20 10.636V10.636ZM10 0.635986C9.73478 0.635986 9.48043 0.741343 9.29289 0.928879C9.10536 1.11642 9 1.37077 9 1.63599V5.63599H5C4.73478 5.63599 4.48043 5.74134 4.29289 5.92888C4.10536 6.11642 4 6.37077 4 6.63599C4 6.9012 4.10536 7.15556 4.29289 7.34309C4.48043 7.53063 4.73478 7.63599 5 7.63599H9V11.636C9 11.9012 9.10536 12.1556 9.29289 12.3431C9.48043 12.5306 9.73478 12.636 10 12.636C10.2652 12.636 10.5196 12.5306 10.7071 12.3431C10.8946 12.1556 11 11.9012 11 11.636V7.63599H15C15.2652 7.63599 15.5196 7.53063 15.7071 7.34309C15.8946 7.15556 16 6.9012 16 6.63599C16 6.37077 15.8946 6.11642 15.7071 5.92888C15.5196 5.74134 15.2652 5.63599 15 5.63599H11V1.63599C11 1.37077 10.8946 1.11642 10.7071 0.928879C10.5196 0.741343 10.2652 0.635986 10 0.635986V0.635986Z\", fill: \"#4A4A4A\" }) }))); };\nvar Upload = function (props) {\n    var t = (0, react_i18next_1.useTranslation)().t;\n    var onChange = props.onChange, url = props.url, loading = props.loading, _a = props.buttonTitle, buttonTitle = _a === void 0 ? t(\"Upload.button\") : _a, _b = props.className, className = _b === void 0 ? \"\" : _b, rest = __rest(props, [\"onChange\", \"url\", \"loading\", \"buttonTitle\", \"className\"]);\n    var _c = (0, react_1.useState)(url), src = _c[0], setSrc = _c[1];\n    (0, react_1.useEffect)(function () {\n        setSrc(url);\n    }, [url]);\n    var onInternalChange = (0, react_1.useCallback)(function (e) {\n        if (e.target.files && e.target.files[0]) {\n            var file = e.target.files[0];\n            var reader_1 = new FileReader();\n            reader_1.readAsDataURL(file);\n            reader_1.onload = function () { var _a; return setSrc((_a = reader_1.result) === null || _a === void 0 ? void 0 : _a.toString()); };\n            reader_1.onerror = function (error) { return console.log(\"reading error\", error); };\n        }\n        if (onChange) {\n            onChange(e);\n        }\n    }, []);\n    var id = buttonTitle ? (0, utils_2.getUniqueId)(\"upload\") : null;\n    return ((0, jsx_runtime_1.jsxs)(StyledDiv, __assign({ className: \"wellms-component upload \".concat(className) }, { children: [(0, jsx_runtime_1.jsx)(\"input\", __assign({ type: \"file\" }, rest, { onChange: onInternalChange }, (id\n                ? { \"aria-labelledby\": id }\n                : { \"aria-label\": t(\"Upload.button\") }))), (0, jsx_runtime_1.jsx)(\"div\", __assign({ className: \"wrapper\" }, { children: (0, jsx_runtime_1.jsxs)(\"div\", __assign({ className: \"border\" }, { children: [loading && (0, jsx_runtime_1.jsx)(__1.Spin, {}), src && (0, jsx_runtime_1.jsx)(\"img\", { src: src, alt: \"Upload preview\" }), (0, jsx_runtime_1.jsx)(UploadIcon, {})] })) })), buttonTitle && ((0, jsx_runtime_1.jsx)(__1.Link, __assign({ underline: true, id: id }, { children: buttonTitle })))] })));\n};\nexports.Upload = Upload;\nexports.default = (0, styled_components_1.withTheme)((0, styled_components_1.default)(exports.Upload)(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\"], [\"\"]))));\nvar templateObject_1, templateObject_2;\n","import { useCallback, useContext, useMemo, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport {\n  getFlatLessons,\n  getFlatTopics,\n} from \"@escolalms/components/lib/utils/course\";\n\nexport function useLessonProgram(\n  program: API.CourseProgram,\n  courseRouteName: string = \"/course/\"\n) {\n  const { sendProgress, getNextPrevTopic, progress, courseProgressDetails } =\n    useContext(EscolaLMSContext);\n  const [isNextTopicButtonDisabled, disableNextTopicButton] = useState(false);\n  const { lessonID, topicID } = useParams<{\n    lessonID: string;\n    topicID: string;\n  }>();\n  const { push } = useHistory();\n\n  const flatLessons = useMemo(\n    () => getFlatLessons(program?.lessons ?? []),\n    [program?.lessons]\n  );\n  const flatTopics = useMemo(\n    () => getFlatTopics(program?.lessons ?? []),\n    [program?.lessons]\n  );\n\n  const lessonId = lessonID ? Number(lessonID) : flatLessons?.[0]?.id;\n  const topicId = topicID ? Number(topicID) : flatTopics?.[0]?.id;\n\n  const lesson = useMemo(\n    () => flatLessons.find((lesson) => lesson.id === lessonId),\n    [flatLessons, lessonId]\n  );\n\n  const topic = useMemo(\n    () => flatTopics.find((topic) => topic.id === topicId),\n    [flatTopics, topicId]\n  );\n\n  const isLastTopic = useMemo(\n    () => flatTopics.at(-1)?.id === topic?.id,\n    [flatTopics, topic?.id]\n  );\n\n  const onNextTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const nextTopic = getNextPrevTopic(Number(topicId));\n          nextTopic &&\n            push(\n              `${courseRouteName}${program.id}/${nextTopic.lesson_id}/${nextTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n  const onPrevTopic = useCallback(() => {\n    const prevTopic = getNextPrevTopic(Number(topicId), false);\n    if (program.id && topic?.can_skip) {\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          prevTopic &&\n            push(\n              `${courseRouteName}${program.id}/${prevTopic.lesson_id}/${prevTopic.id}`,\n              null\n            );\n        }\n      );\n      return;\n    }\n    prevTopic &&\n      push(\n        `${courseRouteName}${program.id}/${prevTopic.lesson_id}/${prevTopic.id}`,\n        null\n      );\n  }, [\n    topicId,\n    program,\n    push,\n    getNextPrevTopic,\n    sendProgress,\n    courseRouteName,\n    topic,\n  ]);\n\n  const onNextTopicPreview = useCallback(\n    (next = true) => {\n      const nextTopic = getNextPrevTopic(Number(topicId), next);\n\n      nextTopic &&\n        push(\n          `${courseRouteName}${program.id}/${nextTopic?.lesson_id}/${nextTopic?.id}`\n        );\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [lessonId, topicId, program, program.id, push, courseRouteName]\n  );\n\n  return {\n    topic,\n    lesson,\n    onNextTopic,\n    onPrevTopic,\n    getNextPrevTopic,\n    isNextTopicButtonDisabled,\n    disableNextTopicButton,\n    onNextTopicPreview,\n    sendProgress,\n    progress,\n    courseProgressDetails,\n    isLastTopic,\n  } as const;\n}\n","import React, {\n  ReactElement,\n  FunctionComponent,\n  useContext,\n  useState,\n} from \"react\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport styled, { css } from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { ResizeIcon } from \"../../../icons\";\n\nconst StyledDiv = styled.div<{ fullview: boolean }>`\n  > button {\n    position: fixed;\n    right: 5px;\n    bottom: 5px;\n    z-index: 9999;\n    svg path {\n      fill: white;\n    }\n  }\n  iframe {\n    border: none;\n    display: block;\n    width: 100%;\n  }\n  ${(props) => {\n    if (props.fullview) {\n      return css`\n        iframe {\n          position: fixed;\n          top: 90px;\n          left: 0;\n          height: calc(100% - 90px - 80px);\n\n          z-index: 9999;\n        }\n      `;\n    } else {\n      return css`\n        display: flex;\n\n        min-height: 80vh;\n        max-height: 80vh;\n        height: 100vh;\n        iframe {\n          height: 100%;\n        }\n      `;\n    }\n  }}\n`;\n\ninterface ScormPlayerProps {\n  title: string;\n  uuid: string;\n}\n\nconst ScormPlayer: FunctionComponent<{\n  value: ScormPlayerProps;\n}> = ({ value }): ReactElement => {\n  const { apiUrl } = useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n  const [fullView, setFullView] = useState(false);\n\n  return (\n    <div className=\"scorm-wrapper\">\n      <StyledDiv fullview={fullView}>\n        <Button onClick={() => setFullView(!fullView)}>\n          {\" \"}\n          {t(\"Scorm.Resize\")} <ResizeIcon />\n        </Button>\n        <iframe\n          title={value.title}\n          src={`${apiUrl}/api/scorm/play/${value.uuid}`}\n        />\n      </StyledDiv>\n    </div>\n  );\n};\n\nexport default ScormPlayer;\n","import React, { useContext, useState, useMemo } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { CourseAgenda } from \"@escolalms/components/lib/components/organisms/CourseAgenda/CourseAgenda\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { getFlatTopics } from \"@escolalms/components/lib/utils/course\";\nimport { useHistory } from \"react-router-dom\";\nimport { isMobile } from \"react-device-detect\";\nimport styled, { css } from \"styled-components\";\nimport { useLessonProgram } from \"@/hooks/useLessonProgram\";\nimport { Button } from \"@escolalms/components\";\nimport { t } from \"i18next\";\nimport { userIsCourseAuthor } from \"@/utils/index\";\n\nconst StyledSidebar = styled.aside`\n  padding-bottom: 100px;\n  .show-agenda-btn {\n    width: 100%;\n  }\n  .agenda-wrapper {\n    ${isMobile &&\n    css`\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      transform: translate(100%, 0);\n      transition: transform 0.25s;\n      overflow: scroll;\n      padding: 40px 0 55px;\n      z-index: 10;\n      background-color: ${({ theme }) =>\n        theme.mode === \"dark\" ? theme.dm__background : theme.background};\n      &--visible {\n        transform: translate(0, 0);\n      }\n      .hide-agenda-btn {\n        display: block;\n        margin: 0 15px 0 auto;\n      }\n    `}\n  }\n`;\n\nexport const CourseSidebar: React.FC<{\n  course: API.CourseProgram;\n  topicId: number;\n  onCompleteTopic?: () => void;\n  onCourseFinish?: () => void;\n}> = ({ course, topicId, onCompleteTopic, onCourseFinish }) => {\n  const { progress } = useLessonProgram(course);\n  const { courseProgressDetails, user } = useContext(EscolaLMSContext);\n\n  const history = useHistory();\n  const [agendaVisible, setAgendaVisible] = useState(false);\n  const program = (course?.lessons || []).filter(\n    (lesson) => (lesson?.topics?.length ?? 0) > 0\n  );\n  const { topicIsFinished } = useContext(EscolaLMSContext);\n  const flatTopics = useMemo(\n    () => getFlatTopics(course.lessons ?? []),\n    [course.lessons]\n  );\n\n  const getCourseProgress = useMemo(() => {\n    const courseId = course.id;\n    if (\n      courseProgressDetails &&\n      courseProgressDetails.byId &&\n      courseProgressDetails.byId[Number(courseId)] &&\n      courseProgressDetails.byId[Number(courseId)].value\n    ) {\n      return courseProgressDetails.byId[Number(courseId)].value;\n    }\n    return (\n      progress &&\n      progress.value &&\n      progress.value.find(\n        (courseProgress: API.CourseProgressItem) =>\n          courseProgress.course.id === Number(courseId)\n      )?.progress\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [progress, course]);\n\n  const finishedTopics = flatTopics\n    .filter((item: API.Topic) => {\n      return (\n        topicIsFinished(item.id) ||\n        getCourseProgress?.some(\n          (progressItem) =>\n            progressItem.topic_id === item.id && progressItem.status === 1\n        )\n      );\n    })\n    .map((item: API.Topic) => item.id);\n\n  if (!course && !program) {\n    return <React.Fragment />;\n  }\n  return (\n    <StyledSidebar>\n      {isMobile && (\n        <Button\n          mode=\"outline\"\n          className=\"show-agenda-btn\"\n          onClick={() => setAgendaVisible(true)}\n        >\n          {t(\"CourseProgram.ShowAgenda\")}\n        </Button>\n      )}\n      <div\n        className={`${\n          agendaVisible\n            ? \"agenda-wrapper agenda-wrapper--visible\"\n            : \"agenda-wrapper\"\n        }`}\n      >\n        {isMobile && (\n          <Button\n            className=\"hide-agenda-btn\"\n            mode=\"secondary\"\n            onClick={() => setAgendaVisible(false)}\n          >\n            &#10005;\n          </Button>\n        )}\n        <CourseAgenda\n          areAllTopicsUnlocked={userIsCourseAuthor(\n            Number(user.value?.id),\n            course\n          )}\n          onNextTopicClick={() => {\n            const currentTopicIndex = flatTopics.findIndex(\n              (t) => t.id === topicId\n            );\n            const nextTopic = flatTopics?.[currentTopicIndex + 1];\n\n            if (nextTopic && currentTopicIndex !== -1) {\n              history.push(\n                `/course/${course.id}/${nextTopic.lesson_id}/${nextTopic.id}`\n              );\n              setAgendaVisible(false);\n            }\n          }}\n          mobile={isMobile}\n          lessons={course.lessons}\n          currentTopicId={topicId}\n          finishedTopicIds={finishedTopics}\n          onMarkFinished={() => onCompleteTopic?.()}\n          onTopicClick={(topic) => {\n            history.push(`/course/${course.id}/${topic.lesson_id}/${topic.id}`);\n            setAgendaVisible(false);\n          }}\n          onCourseFinished={() => onCourseFinish?.()}\n        />\n      </div>\n    </StyledSidebar>\n  );\n};\n\nexport default CourseSidebar;\n","import { ReactElement, FunctionComponent, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { Download } from \"@escolalms/components/lib/components/atoms/Download/Download\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\n\nconst TextPlayerStyles = styled.div`\n  h1 {\n    font-size: 2em;\n  }\n  h2 {\n    font-size: 1.5em;\n  }\n  h3 {\n    font-size: 1.17em;\n  }\n  h4 {\n    font-size: 1em;\n  }\n  h5 {\n    font-size: 0.9em;\n  }\n  .resources-container {\n    padding: 24px 0;\n    margin-top: 24px;\n    border-top-width: 1px;\n    border-top-style: solid;\n    border-top-color: ${({ theme }) => theme.primaryColor};\n  }\n`;\n\nconst TextPlayer: FunctionComponent<{\n  value?: string;\n  onLoad?: () => void;\n  resources?: API.TopicResource[];\n}> = ({ value, onLoad, resources }): ReactElement => {\n  const { t } = useTranslation();\n  const isResources = resources && resources.length > 0;\n\n  useEffect(() => {\n    value && onLoad && onLoad();\n  }, [value, onLoad]);\n\n  return (\n    <TextPlayerStyles>\n      {value && <MarkdownRenderer>{value}</MarkdownRenderer>}\n      {isResources && (\n        <div className=\"resources-container\">\n          <Text>{t(\"CoursePage.Resources\")}</Text>\n          {resources.map(({ name, url }) => (\n            <Download href={url} fileName={name} />\n          ))}\n        </div>\n      )}\n    </TextPlayerStyles>\n  );\n};\n\nexport default TextPlayer;\n","import React, { useContext, useEffect } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { XAPIEvent } from \"@escolalms/h5p-react\";\nimport TextPlayer from \"./Players/TextPlayer\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { ImagePlayer } from \"@escolalms/components/lib/components/players/ImagePlayer/ImagePlayer\";\nimport { AudioVideoPlayer } from \"@escolalms/components/lib/components/players/AudioVideoPlayer/AudioVideoPlayer\";\nimport { OEmbedPlayer } from \"@escolalms/components/lib/components/players/OEmbedPlayer/OEmbedPlayer\";\nimport { H5Player } from \"@escolalms/components/lib/components/players/H5Player/H5Player\";\nimport { PdfPlayer } from \"@escolalms/components/lib/components/players/PdfPlayer/PdfPlayer\";\nimport {\n  ProjectPlayer,\n  ProjectsData,\n} from \"@escolalms/components/lib/components/players/ProjectPlayer/ProjectPlayer\";\nimport { isMobile } from \"react-device-detect\";\nimport ScormPlayer from \"./Players/ScormPlayer\";\nimport styled from \"styled-components\";\nimport GiftQuizPlayer from \"@escolalms/components/lib/components/quizzes\";\n\nconst StyledPdfPlayer = styled(PdfPlayer)`\n  .course-pdf-player {\n    .react-pdf__Page__svg,\n    svg {\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n`;\n\nexport const CourseProgramContent: React.FC<{\n  topic: API.Topic | undefined;\n  isThereAnotherTopic?: boolean;\n  preview?: boolean;\n  disableNextTopicButton?: (b: boolean) => void;\n  onXAPI?: (event: XAPIEvent) => void;\n  onVideoEnd?: () => void;\n  onAudioEnd?: () => void;\n  onPdfEnd?: () => void;\n  onQuizEnd?: () => void;\n  onProjectEnd?: () => void;\n  onProjectsChange?: (projects: ProjectsData) => void;\n}> = ({\n  topic,\n  preview = false,\n  disableNextTopicButton,\n  isThereAnotherTopic = true,\n  onXAPI,\n  onVideoEnd,\n  onAudioEnd,\n  onPdfEnd,\n  onQuizEnd,\n  onProjectEnd,\n  onProjectsChange,\n}) => {\n  const { program, topicPing, topicIsFinished } = useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    const isTopicFinished = topic?.id && topicIsFinished(topic.id);\n\n    isThereAnotherTopic &&\n      disableNextTopicButton &&\n      isTopicFinished &&\n      disableNextTopicButton(!isTopicFinished && !Boolean(topic?.can_skip));\n  }, [disableNextTopicButton, topic, isThereAnotherTopic, topicIsFinished]);\n\n  useEffect(() => {\n    if (!preview) {\n      const ping = () =>\n        topic?.id && !topicIsFinished(topic?.id) && topicPing(topic?.id);\n      const interval = setInterval(() => {\n        ping();\n      }, 5000);\n      ping();\n      return () => clearInterval(interval);\n    }\n  }, [topicPing, preview, topic?.id, topicIsFinished]);\n\n  if (!topic) {\n    return <React.Fragment />;\n  }\n\n  if (!topic.topicable?.value) {\n    return (\n      <pre className=\"error\">Error: topic.topicable?.value is missing</pre>\n    );\n  }\n  if (topic.topicable_type) {\n    switch (topic.topicable_type) {\n      case API.TopicType.H5P:\n        return (\n          <H5Player\n            onXAPI={(e: XAPIEvent) => onXAPI?.(e)}\n            //@ts-ignore\n            h5pObject={topic.topicable.content as API.H5PObject}\n            hideActionButtons\n          />\n        );\n      case API.TopicType.OEmbed:\n        return (\n          <>\n            <OEmbedPlayer url={topic.topicable.value} key={topic.id} />\n          </>\n        );\n      case API.TopicType.RichText:\n        return (\n          <TextPlayer\n            value={topic.topicable.value}\n            resources={topic.resources}\n          />\n        );\n      case API.TopicType.Video:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            url={topic.topicable.url}\n            light\n            onTopicEnd={onVideoEnd}\n          />\n        );\n      case API.TopicType.Image:\n        return <ImagePlayer topic={topic} onLoad={() => {}} />;\n      case API.TopicType.Audio:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            audio\n            url={topic.topicable.url}\n            light\n            onTopicEnd={onAudioEnd}\n          />\n        );\n\n      case API.TopicType.Pdf:\n        return (\n          <StyledPdfPlayer\n            url={topic.topicable.url}\n            pageConfig={{\n              renderMode: \"svg\",\n              className: \"course-pdf-player\",\n            }}\n            onTopicEnd={onPdfEnd}\n          />\n        );\n\n      case API.TopicType.Scorm:\n        return (\n          <ScormPlayer\n            value={{\n              title: topic.title,\n              uuid: topic.topicable.uuid,\n            }}\n          />\n        );\n\n      case API.TopicType.GiftQuiz:\n        return <GiftQuizPlayer topic={topic} onTopicEnd={onQuizEnd} />;\n      case API.TopicType.Project:\n        return (\n          <ProjectPlayer\n            course_id={program.value?.id ?? 0}\n            topic={topic}\n            onSuccess={onProjectEnd}\n            onProjectsChange={onProjectsChange}\n          />\n        );\n      default:\n        return <pre>{(topic as API.Topic).topicable_type}</pre>;\n    }\n  }\n\n  return <pre>loading... (or error)</pre>;\n};\n\nexport default CourseProgramContent;\n","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProjectPlayer = void 0;\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\nvar react_1 = require(\"react\");\nvar styled_components_1 = __importStar(require(\"styled-components\"));\nvar react_i18next_1 = require(\"react-i18next\");\nvar date_fns_1 = require(\"date-fns\");\nvar react_2 = require(\"@escolalms/sdk/lib/react\");\nvar project_1 = require(\"@escolalms/sdk/lib/services/project\");\nvar utils_1 = require(\"../../../utils/utils\");\nvar Button_1 = require(\"../../atoms/Button/Button\");\nvar Card_1 = require(\"../../atoms/Card/Card\");\nvar Spin_1 = require(\"../../atoms/Spin/Spin\");\nvar Text_1 = require(\"../../atoms/Typography/Text\");\nvar MarkdownRenderer_1 = require(\"../../molecules/MarkdownRenderer/MarkdownRenderer\");\nvar Upload_1 = require(\"../../molecules/Upload/Upload\");\nvar ProjectPlayerWrapper = styled_components_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  .project-player__upload-input {\\n    margin-bottom: 1em;\\n    .wrapper {\\n      .border img {\\n        display: none;\\n      }\\n\\n      &::after {\\n        padding-top: 0;\\n        aspect-ratio: 16 / 3;\\n      }\\n    }\\n  }\\n\\n  .project-player__projects-list {\\n    display: flex;\\n    flex-wrap: wrap;\\n    gap: 1em;\\n\\n    .project-card {\\n      width: 100%;\\n      max-width: 225px;\\n\\n      .content {\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: flex-start;\\n      }\\n    }\\n  }\\n\"], [\"\\n  .project-player__upload-input {\\n    margin-bottom: 1em;\\n    .wrapper {\\n      .border img {\\n        display: none;\\n      }\\n\\n      &::after {\\n        padding-top: 0;\\n        aspect-ratio: 16 / 3;\\n      }\\n    }\\n  }\\n\\n  .project-player__projects-list {\\n    display: flex;\\n    flex-wrap: wrap;\\n    gap: 1em;\\n\\n    .project-card {\\n      width: 100%;\\n      max-width: 225px;\\n\\n      .content {\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: flex-start;\\n      }\\n    }\\n  }\\n\"])));\nvar IconBin = function () {\n    return ((0, jsx_runtime_1.jsx)(\"svg\", __assign({ width: \"20\", height: \"20\", viewBox: \"0 0 20 20\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, { children: (0, jsx_runtime_1.jsx)(\"path\", { d: \"M5 2C5 0.89543 5.89543 0 7 0H13C14.1046 0 15 0.895431 15 2V4H16.9897C16.9959 3.99994 17.0021 3.99994 17.0083 4H19C19.5523 4 20 4.44772 20 5C20 5.55228 19.5523 6 19 6H17.9311L17.0638 18.1425C16.989 19.1891 16.1182 20 15.0689 20H4.93112C3.88184 20 3.01096 19.1891 2.9362 18.1425L2.06888 6H1C0.447715 6 0 5.55228 0 5C0 4.44772 0.447715 4 1 4H2.99174C2.99795 3.99994 3.00414 3.99994 3.01032 4H5V2ZM7 4H13V2H7V4ZM4.07398 6L4.93112 18H15.0689L15.926 6H4.07398ZM8 8C8.55228 8 9 8.44772 9 9V15C9 15.5523 8.55228 16 8 16C7.44772 16 7 15.5523 7 15V9C7 8.44772 7.44772 8 8 8ZM12 8C12.5523 8 13 8.44772 13 9V15C13 15.5523 12.5523 16 12 16C11.4477 16 11 15.5523 11 15V9C11 8.44772 11.4477 8 12 8Z\", fill: \"currentColor\" }) })));\n};\nvar ProjectsList = function (_a) {\n    var projects = _a.projects, onDeleteSuccess = _a.onDeleteSuccess, onDeleteError = _a.onDeleteError, className = _a.className;\n    var t = (0, react_i18next_1.useTranslation)().t;\n    var _b = (0, react_1.useContext)(react_2.EscolaLMSContext), token = _b.token, apiUrl = _b.apiUrl;\n    var _c = (0, react_1.useState)([]), isDeleting = _c[0], setIsDeleting = _c[1];\n    var onFileDeleteFactory = (0, react_1.useCallback)(function (fileId) { return function () {\n        if (!token)\n            return console.warn(\"noToken\");\n        setIsDeleting(function (prev) { return __spreadArray(__spreadArray([], prev, true), [fileId], false); });\n        (0, project_1.removeProject)(apiUrl, token, fileId)\n            .then(function () { return onDeleteSuccess === null || onDeleteSuccess === void 0 ? void 0 : onDeleteSuccess(); })\n            .catch(function () { return onDeleteError === null || onDeleteError === void 0 ? void 0 : onDeleteError(); })\n            .finally(function () {\n            return setIsDeleting(function (prev) { return prev.filter(function (id) { return id !== fileId; }); });\n        });\n    }; }, [token, apiUrl]);\n    return ((0, jsx_runtime_1.jsxs)(\"div\", __assign({ className: className }, { children: [projects.loading && !projects.data.length && (0, jsx_runtime_1.jsx)(Spin_1.Spin, {}), projects.data.map(function (_a, i) {\n                var id = _a.id, created_at = _a.created_at;\n                return ((0, jsx_runtime_1.jsxs)(Card_1.Card, __assign({ className: \"project-card\" }, { children: [(0, jsx_runtime_1.jsxs)(\"div\", __assign({ className: \"project-card__details\" }, { children: [(0, jsx_runtime_1.jsxs)(Text_1.Text, __assign({ className: \"project-card__title\" }, { children: [t(\"ProjectPlayer.ProjectFile\"), \" \".concat(i + 1)] })), (0, jsx_runtime_1.jsx)(Text_1.Text, __assign({ className: \"project-card__date\" }, { children: (0, date_fns_1.format)(new Date(created_at), utils_1.DATETIME_FORMAT) }))] })), (0, jsx_runtime_1.jsx)(Button_1.Button, __assign({ className: \"project-card__delete-btn\", mode: \"icon\", loading: isDeleting.includes(id), onClick: onFileDeleteFactory(id) }, { children: (0, jsx_runtime_1.jsx)(IconBin, {}) }))] }), id));\n            })] })));\n};\nvar ProjectPlayer = function (_a) {\n    var course_id = _a.course_id, topic = _a.topic, onSuccess = _a.onSuccess, onError = _a.onError, className = _a.className, onProjectsChange = _a.onProjectsChange;\n    var _b = (0, react_1.useContext)(react_2.EscolaLMSContext), token = _b.token, apiUrl = _b.apiUrl;\n    var _c = (0, react_1.useState)({\n        data: [],\n        loading: false,\n    }), projects = _c[0], setProjects = _c[1];\n    var _d = (0, react_1.useState)(false), isUploading = _d[0], setIsUploading = _d[1];\n    (0, react_1.useEffect)(function () {\n        onProjectsChange && onProjectsChange(projects);\n    }, [projects]);\n    var refreshProjects = (0, react_1.useCallback)(function () {\n        if (!token)\n            return console.error(\"noToken\");\n        setProjects(function (prev) { return (__assign(__assign({}, prev), { loading: true })); });\n        (0, project_1.fetchProjects)(apiUrl, token, { course_id: course_id, topic_id: topic === null || topic === void 0 ? void 0 : topic.id })\n            .then(function (res) {\n            if (res.success) {\n                setProjects(function (prev) { return (__assign(__assign({}, prev), { data: res.data })); });\n            }\n        })\n            .catch(function (err) { return console.warn(err); })\n            .finally(function () { return setProjects(function (prev) { return (__assign(__assign({}, prev), { loading: false })); }); });\n    }, [token, apiUrl, course_id, topic === null || topic === void 0 ? void 0 : topic.id]);\n    (0, react_1.useEffect)(function () {\n        refreshProjects();\n    }, [refreshProjects]);\n    var onProjectFileSelect = (0, react_1.useCallback)(function (e) {\n        var _a;\n        if (!((_a = e.currentTarget.files) === null || _a === void 0 ? void 0 : _a[0]) || !token)\n            return;\n        setIsUploading(true);\n        var body = {\n            topic_id: (topic === null || topic === void 0 ? void 0 : topic.id) + \"\",\n            file: e.currentTarget.files[0],\n        };\n        (0, project_1.addProject)(apiUrl, token, body)\n            .then(function () {\n            refreshProjects();\n            onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess();\n        })\n            .catch(function () {\n            onError === null || onError === void 0 ? void 0 : onError();\n        })\n            .finally(function () {\n            setIsUploading(false);\n        });\n    }, [apiUrl, token, topic === null || topic === void 0 ? void 0 : topic.id, refreshProjects]);\n    return ((0, jsx_runtime_1.jsxs)(ProjectPlayerWrapper, __assign({ className: \"wellms-component\" + \" \".concat(className), \"data-testid\": \"project-player\" }, { children: [topic.description && ((0, jsx_runtime_1.jsx)(MarkdownRenderer_1.MarkdownRenderer, __assign({ className: \"project-player__description\" }, { children: topic.description }))), (0, jsx_runtime_1.jsx)(Upload_1.Upload, { className: \"project-player__upload-input\", name: \"project_file\", onChange: onProjectFileSelect, disabled: isUploading }), (0, jsx_runtime_1.jsx)(ProjectsList, { className: \"project-player__projects-list\", projects: projects, onDeleteSuccess: refreshProjects })] })));\n};\nexports.ProjectPlayer = ProjectPlayer;\nexports.default = (0, styled_components_1.withTheme)((0, styled_components_1.default)(exports.ProjectPlayer)(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\"], [\"\"]))));\nvar templateObject_1, templateObject_2;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeProject = exports.fetchProjects = exports.addProject = void 0;\nvar umi_request_1 = __importDefault(require(\"umi-request\"));\nvar utils_1 = require(\"../utils\");\nfunction addProject(apiUrl, token, body, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var formData;\n        return __generator(this, function (_a) {\n            formData = new FormData();\n            Object.entries(body).forEach(function (_a) {\n                var key = _a[0], val = _a[1];\n                formData.append(key, val);\n            });\n            return [2 /*return*/, (0, umi_request_1.default)(\"\".concat(apiUrl, \"/api/topic-project-solutions\"), __assign({ method: \"POST\", headers: {\n                        Accept: \"application/json\",\n                        Authorization: \"Bearer \".concat(token),\n                        \"Current-timezone\": (0, utils_1.currentTimezone)(),\n                    }, data: formData }, (options || {})))];\n        });\n    });\n}\nexports.addProject = addProject;\nfunction fetchProjects(apiUrl, token, _a, options) {\n    var per_page = _a.per_page, page = _a.page, params = __rest(_a, [\"per_page\", \"page\"]);\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            return [2 /*return*/, (0, umi_request_1.default)(\"\".concat(apiUrl, \"/api/topic-project-solutions\"), __assign({ method: \"GET\", headers: {\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\",\n                        Authorization: \"Bearer \".concat(token),\n                        \"Current-timezone\": (0, utils_1.currentTimezone)(),\n                    }, params: __assign({ per_page: per_page !== null && per_page !== void 0 ? per_page : 15, page: page !== null && page !== void 0 ? page : 1 }, params) }, (options || {})))];\n        });\n    });\n}\nexports.fetchProjects = fetchProjects;\nfunction removeProject(apiUrl, token, project_file_id, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, (0, umi_request_1.default)(\"\".concat(apiUrl, \"/api/topic-project-solutions/\").concat(project_file_id), __assign({ method: \"DELETE\", headers: {\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\",\n                        Authorization: \"Bearer \".concat(token),\n                        \"Current-timezone\": (0, utils_1.currentTimezone)(),\n                    } }, (options || {})))];\n        });\n    });\n}\nexports.removeProject = removeProject;\n"],"sourceRoot":""}