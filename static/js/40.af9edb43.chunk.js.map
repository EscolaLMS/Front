{"version":3,"sources":["components/NewestCourses/index.tsx","pages/index.tsx"],"names":["NewestCourses","_useState","useState","_useState2","_slicedToArray","currentCourses","setCurrentCourses","_useState3","_useState4","loading","setLoading","fetchCourses","useContext","EscolaLMSContext","t","useTranslation","useEffect","per_page","order_by","order","then","res","data","catch","finally","_jsxs","Container","children","_jsx","Title","className","level","as","ContentLoader","CoursesSlider","courses","HomePageStyled","styled","div","_templateObject","_taggedTemplateLiteral","Index","_settings$value","_settings$value$homep","_settings$value$homep2","_settings$value$homep3","_settings$value$homep4","_settings$value2","_settings$value2$home","_categoryTree$list","setCourses","_useContext","categoryTree","fetchCategories","settings","history","useHistory","_useTranslation","i18n","Layout","metaTitle","value","homepage","heroBannerText","heroBannerImg","Banner","mobile","isMobile","title","MarkdownRenderer","concat","language","btnText","asset","ResponsiveImage","path","srcSizes","handleBtn","push","PromotedCoursesSection","CategoriesSection","categories","list","filter","category","icon"],"mappings":"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","file":"static/js/40.af9edb43.chunk.js","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { Container } from \"react-grid-system\";\nimport { useTranslation } from \"react-i18next\";\nimport { Title } from \"@escolalms/components\";\nimport CoursesSlider from \"../CoursesSlider\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { Course, PaginatedMetaList } from \"@escolalms/sdk/lib/types/api\";\nimport ContentLoader from \"@/components/ContentLoader\";\n\nconst NewestCourses = () => {\n  const [currentCourses, setCurrentCourses] = useState<Course[]>();\n  const [loading, setLoading] = useState(true);\n  const { fetchCourses } = useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    fetchCourses({\n      per_page: 8,\n      order_by: \"created_at\",\n      order: \"DESC\",\n    })\n      .then((res) => {\n        setCurrentCourses((res as PaginatedMetaList<Course>).data || []);\n      })\n      .catch(() => setLoading(false))\n      .finally(() => setLoading(false));\n  }, [fetchCourses]);\n\n  return (\n    <Container>\n      <Title className=\"slider-title\" level={3} as=\"h1\">\n        <strong>{t<string>(\"Homepage.CoursesSlider2Title\")}</strong>\n      </Title>\n      {loading && <ContentLoader />}\n      {!loading && currentCourses && <CoursesSlider courses={currentCourses} />}\n    </Container>\n  );\n};\n\nexport default NewestCourses;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport Layout from \"@/components/_App/Layout\";\nimport { Title } from \"@escolalms/components/lib/components/atoms/Typography/Title\";\nimport { Banner } from \"@escolalms/components/lib/components/molecules/Banner/Banner\";\nimport { ResponsiveImage } from \"@escolalms/components/lib/components/organisms/ResponsiveImage/ResponsiveImage\";\nimport styled from \"styled-components\";\nimport { isMobile } from \"react-device-detect\";\nimport { useTranslation } from \"react-i18next\";\nimport CoursesSlider from \"@/components/CoursesSlider\";\nimport PromotedCoursesSection from \"@/components/PromotedCoursesSection\";\nimport CategoriesSection from \"@/components/CategoriesSection\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport { useHistory } from \"react-router-dom\";\nimport Container from \"@/components/Container\";\nimport NewestCourses from \"@/components/NewestCourses\";\nimport { Course, PaginatedMetaList } from \"@escolalms/sdk/lib/types/api\";\nimport ContentLoader from \"@/components/ContentLoader\";\n\nconst HomePageStyled = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: -120px;\n  @media (max-width: 1200px) {\n    margin-top: 0;\n  }\n  @media (max-width: 575px) {\n    margin-top: -30px;\n  }\n  .home-hero {\n    margin-bottom: 45px;\n    padding-top: 42px;\n    order: 1;\n    h1 {\n      margin-top: 0 !important;\n    }\n    @media (max-width: 768px) {\n      margin-bottom: 30px;\n      padding-top: 0;\n      h1 {\n        font-size: 26px;\n      }\n    }\n    button {\n      @media (max-width: 991px) {\n        width: 100%;\n      }\n    }\n  }\n\n  .home-best-courses {\n    margin: 40px 0;\n    order: 2;\n    @media (max-width: 768px) {\n      margin: 30px 0;\n    }\n  }\n\n  .home-newest-courses {\n    order: 1;\n    margin: 40px 0;\n    @media (max-width: 768px) {\n      margin: 30px 0;\n    }\n  }\n\n  .promoted-courses-wrapper {\n    order: 3;\n  }\n\n  .categories-section-wrapper {\n    order: 5;\n  }\n`;\n\nconst Index = () => {\n  const [courses, setCourses] = useState<Course[]>();\n  const [loading, setLoading] = useState(true);\n  const { categoryTree, fetchCategories, fetchCourses, settings } =\n    useContext(EscolaLMSContext);\n\n  const history = useHistory();\n  const { t, i18n } = useTranslation();\n  useEffect(() => {\n    fetchCourses({\n      per_page: 8,\n    })\n      .then((res) => {\n        setCourses((res as PaginatedMetaList<Course>).data);\n      })\n      .catch(() => setLoading(false))\n      .finally(() => setLoading(false));\n    fetchCategories();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Layout metaTitle={t(\"Home\")}>\n      <HomePageStyled>\n        <section className=\"home-hero\">\n          {settings.value?.homepage &&\n            settings.value.homepage?.heroBannerText &&\n            settings.value.homepage?.heroBannerImg &&\n            settings.value.homepage?.heroBannerImg !== \"\" && (\n              <Container>\n                <Banner\n                  mobile={isMobile}\n                  title={\n                    <MarkdownRenderer>\n                      {`<h1>${\n                        settings.value.homepage?.heroBannerText[\n                          i18n.language\n                        ] || \"\"\n                      }</h1>`}\n                    </MarkdownRenderer>\n                  }\n                  btnText={t(\"Homepage.HeroBtnText\")}\n                  asset={\n                    <ResponsiveImage\n                      path={settings?.value?.homepage?.heroBannerImg || \"\"}\n                      srcSizes={[500, 750, 1000]}\n                    />\n                  }\n                  handleBtn={() => history.push(\"/courses\")}\n                />\n              </Container>\n            )}\n        </section>\n\n        <section className=\"home-newest-courses\">\n          <NewestCourses />\n        </section>\n\n        <section className=\"home-best-courses\">\n          <Container>\n            <Title className=\"slider-title\" level={3} as=\"h1\">\n              <strong>{t<string>(\"Homepage.CoursesSlider1Title\")}</strong>\n            </Title>\n            {loading && <ContentLoader />}\n            {!loading && courses && <CoursesSlider courses={courses} />}\n          </Container>\n        </section>\n\n        <div className=\"promoted-courses-wrapper\">\n          <PromotedCoursesSection />\n        </div>\n\n        {categoryTree && (\n          <div className=\"categories-section-wrapper\">\n            <CategoriesSection\n              categories={\n                categoryTree.list?.filter((category) => !!category.icon) || []\n              }\n            />\n          </div>\n        )}\n      </HomePageStyled>\n    </Layout>\n  );\n};\n\nexport default Index;\n"],"sourceRoot":""}