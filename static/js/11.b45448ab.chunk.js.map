{"version":3,"sources":["components/Errorbox/index.tsx","components/Course/CourseProgramLessonsStyles.tsx","components/Course/CourseFinishModal/index.tsx","components/Course/CourseDownloads/index.tsx","components/Course/CourseProgramPlayer/index.tsx","components/Course/CourseProgramLessons.tsx","hooks/useCourseProgram.ts","hooks/useBookmarkNotes.ts","hooks/useCourseBreakPoint.ts","pages/course/index.tsx","components/Breadcrumbs/index.tsx","components/Preloader/index.tsx","hooks/useLessonProgram.ts","components/Course/Players/ScormPlayer.tsx","components/Course/CourseSidebar/index.tsx","components/Course/Players/TextPlayer.tsx","components/Course/CourseProgramContent.tsx"],"names":["StyledErrorPage","styled","div","_templateObject","_taggedTemplateLiteral","ErrorBox","_ref","error","_ref$goTo","goTo","goToText","alternativeButton","t","useTranslation","history","useHistory","buttonText","_jsx","Layout","children","_jsxs","Text","size","className","Button","mode","onClick","push","StyledCourse","section","CourseFinishModal","StyledDownloads","CourseDownloads","resources","subtitle","mappedResources","map","item","href","url","fileName","name","Downloads","title","downloads","CourseProgramPlayer","_topic$json","_topic$resources","lesson","topic","disableNextTopicButton","getNextPrevTopic","onXAPI","columnWidth","summary","introduction","MarkdownRenderer","style","_objectSpread","json","wrapperStyle","CourseProgramContent","lessonId","Number","id","topicId","isThereAnotherTopic","Boolean","event","Row","Col","sm","md","lg","length","CourseProgramLessons","program","courseId","_useLessonProgram","useLessonProgram","onNextTopic","onPrevTopic","isNextTopicButtonDisabled","sendProgress","_useState","useState","_useState2","_slicedToArray","showFinishModal","setShowFinishModal","_useCourseProgram","_ref$isThereAnotherTo","topicID","useParams","_useContext","useContext","EscolaLMSContext","h5pProgress","lastH5pEvent","setLastH5pEvent","onCompleteH5pTopic","useCallback","_h5pProgress","clearState","arguments","undefined","String","statement","then","onCompleteTopic","console","log","topic_id","status","_event$statement","_event$statement$verb","_event$statement2","_event$statement2$ver","verb","useCourseProgram","_useBookmarkNotes","_bookmarkNotes$list2","_bookmarkNotes$list4","bookmarkNotes","fetchBookmarkNotes","createBookmarkNote","deleteBookmarkNote","topicBookmark","useMemo","_bookmarkNotes$list","list","data","filter","bookmarkable_id","value","topicNote","_bookmarkNotes$list3","handleBookmark","toast","success","bookmarkable_type","concat","useBookmarkNotes","_useCourseBreakPoint","courseProgressDetails","progress","location","useLocation","startWithBreakPoint","pathname","split","getCourseProgress","_courseProgressDetail","_progress$value$find","byId","find","courseProgress","course","topicBreakPoint","currentProgress","lastStartedLesson","API","CourseProgressItemElementStatus","IN_PROGRESS","sort","a","b","Date","started_at","getTime","INCOMPLETE","findLessonBreakPoint","lessons","topics","some","useEffect","finishedTopicIndex","findIndex","ttopic","COMPLETE","useCourseBreakPoint","window","scrollTo","top","behavior","resetProgress","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","flatMap","stop","React","Fragment","Container","Breadcrumbs","items","Link","to","Title","level","CourseSidebar","onCourseFinish","CourseTopNav","onFinish","mobile","isMobile","onNext","isFinished","onPrev","addNotes","newNoteData","type","currentNote","addBookmarks","bookmarkBtnText","onBookmarkClick","hasPrev","hasNext","CourseProgramScorm","sco","scorm_sco","uuid","ScormPlayer","CourseProgram","_program$value","fetchProgram","fetchCourseProgress","loading","Preloader","scorm_sco_id","metaTitle","StyledBreadcrumbs","theme","gray5","gray2","_ref2","BreadCrumbs","StyledLoader","dm__background","background","useTheme","document","body","overflow","Spin","color","primaryColor","_program$lessons$","_program$lessons$$top","courseRouteName","_useParams","lessonID","nextTopic","lesson_id","prevTopic","onNextTopicPreview","StyledDiv","props","fullview","css","_templateObject2","_templateObject3","apiUrl","fullView","setFullView","ResizeIcon","src","StyledSidebar","aside","agendaVisible","setAgendaVisible","_lesson$topics","topicIsFinished","allTopics","arrayOfTopics","apply","finishedTopics","progressItem","CourseAgenda","onNextTopicClick","forEach","lIndex","tIndex","currentTopicId","finishedTopicIds","onMarkFinished","onTopicClick","onCourseFinished","TextPlayerStyles","TextPlayer","onLoad","StyledPdfPlayer","PdfPlayer","_topic$topicable","_program$value$id","_program$value2","_ref$preview","preview","topicPing","_program$value$lesson","_program$value$lesson2","_program$value$lesson3","isTopicFinished","can_skip","ping","interval","setInterval","clearInterval","topicable","topicable_type","TopicType","H5P","H5Player","e","h5pObject","content","OEmbed","_Fragment","OEmbedPlayer","RichText","Video","AudioVideoPlayer","light","Image","ImagePlayer","Audio","audio","Pdf","pageConfig","renderMode","Scorm","GiftQuiz","GiftQuizPlayer","Project","ProjectPlayer","course_id"],"mappings":"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","file":"static/js/11.b45448ab.chunk.js","sourcesContent":["import Layout from \"@/components/_App/Layout\";\nimport { Button, Text } from \"@escolalms/components\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nconst StyledErrorPage = styled.div`\n  min-height: calc(100vh - 150px);\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n\n  .buttons-block {\n    display: grid;\n    gap: 8px;\n  }\n`;\n\ninterface AlternativeButton {\n  goTo: string;\n  goToText: string;\n}\n\ninterface Props {\n  error: string;\n  goTo?: string;\n  goToText?: string;\n  alternativeButton?: AlternativeButton;\n}\n\nconst ErrorBox: React.FC<Props> = ({\n  error,\n  goTo = \"/courses\",\n  goToText,\n  alternativeButton,\n}) => {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const buttonText = goToText ?? t(\"CoursePage.SeeOtherCourses\");\n\n  return (\n    <Layout>\n      <StyledErrorPage>\n        <Text size=\"16\">\n          <strong>{t(\"CoursePage.ErrorOccurred\")}</strong>\n        </Text>\n        <Text size=\"14\">{error}</Text>\n        <hr />\n        <div className=\"buttons-block\">\n          <Button mode=\"secondary\" onClick={() => history.push(goTo)}>\n            {buttonText}\n          </Button>\n          {alternativeButton && (\n            <Button\n              mode=\"outline\"\n              onClick={() => history.push(alternativeButton.goTo)}\n            >\n              {alternativeButton.goToText}\n            </Button>\n          )}\n        </div>\n      </StyledErrorPage>\n    </Layout>\n  );\n};\nexport default ErrorBox;\n","import styled from \"styled-components\";\n\nexport const StyledCourse = styled.section`\n  padding-bottom: 110px;\n  .main-title {\n    margin-bottom: 20px;\n  }\n  .course-nav {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: 100;\n  }\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n\n  .course-program-finish-modal {\n    font-family: \"Mulish\", sans-serif;\n    background: #f8f8f8;\n    inset: 0;\n    border: 1px solid #157493;\n    padding: 16px;\n    display: grid;\n    place-content: center;\n    gap: 16px;\n    height: 100%;\n    max-height: 500px;\n\n    p {\n      text-align: center;\n      margin: 0;\n    }\n\n    &__title {\n      font-size: 24px;\n      font-weight: 500;\n    }\n\n    &__paragraph {\n      font-size: 18px;\n    }\n\n    &__buttons {\n      display: grid;\n      grid-auto-flow: column;\n      gap: 8px;\n      justify-content: center;\n      margin-top: 8px;\n    }\n  }\n`;\n","import { useTranslation } from \"react-i18next\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { useHistory } from \"react-router-dom\";\n\nconst CourseFinishModal = () => {\n  const { t } = useTranslation();\n  const { push } = useHistory();\n\n  return (\n    <div className=\"course-program-finish-modal\">\n      <p className=\"course-program-finish-modal__title\">\n        {t(\"CourseProgram.FinishTitle\")}\n      </p>\n      <p className=\"course-program-finish-modal__paragraph\">\n        {t(\"CourseProgram.FinishSubtitle\")}\n      </p>\n\n      <div className=\"course-program-finish-modal__buttons\">\n        <Button mode=\"primary\" onClick={() => push(\"/user/my-profile\")}>\n          {t(\"Menu.Profile\")}\n        </Button>\n        <Button mode=\"primary\" onClick={() => push(\"/courses\")}>\n          {t(\"Menu.Courses\")}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default CourseFinishModal;\n","import React from \"react\";\nimport { Downloads } from \"@escolalms/components/lib/components/molecules/Downloads/Downloads\";\nimport styled from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { API } from \"@escolalms/sdk/lib\";\n\ntype Props = {\n  resources: API.TopicResource[];\n  subtitle: string;\n};\n\nconst StyledDownloads = styled.div`\n  margin-top: 100px;\n`;\n\nconst CourseDownloads: React.FC<Props> = ({ resources, subtitle }) => {\n  const { t } = useTranslation();\n  const mappedResources = resources.map((item) => {\n    return { href: item.url, fileName: item.name };\n  });\n  return (\n    <StyledDownloads>\n      <Downloads\n        subtitle={subtitle}\n        title={t<string>(\"CourseProgram.TopicAttachment\")}\n        downloads={mappedResources}\n      />\n    </StyledDownloads>\n  );\n};\n\nexport default CourseDownloads;\n","import CourseProgramContent from \"@/components/Course/CourseProgramContent\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport CourseDownloads from \"../CourseDownloads\";\nimport { Col, Row } from \"react-grid-system\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { XAPIEvent } from \"@escolalms/h5p-react\";\n\ninterface Props {\n  lesson: API.Lesson | undefined;\n  topic: API.Topic | undefined;\n  disableNextTopicButton: React.Dispatch<React.SetStateAction<boolean>>;\n  getNextPrevTopic: (\n    topicId: number,\n    next?: boolean | undefined\n  ) => API.Topic | null;\n  onXAPI?: (event: XAPIEvent) => void;\n}\n\nconst CourseProgramPlayer = ({\n  lesson,\n  topic,\n  disableNextTopicButton,\n  getNextPrevTopic,\n  onXAPI,\n}: Props) => {\n  const columnWidth =\n    lesson && lesson.summary && topic && topic.summary ? 6 : 12;\n\n  return (\n    <div className=\"course-program-player\">\n      <div className=\"course-program-player-content\">\n        {topic && topic.introduction && (\n          <MarkdownRenderer>{topic.introduction}</MarkdownRenderer>\n        )}\n        <div\n          className=\"course-program-player-content__wrapper\"\n          style={{\n            ...((topic?.json?.wrapperStyle as object) || {}),\n          }}\n        >\n          <CourseProgramContent\n            key={topic?.id}\n            lessonId={Number(lesson?.id)}\n            topicId={topic && Number(topic.id)}\n            disableNextTopicButton={disableNextTopicButton}\n            isThereAnotherTopic={Boolean(getNextPrevTopic(Number(topic?.id)))}\n            onXAPI={(event) => onXAPI?.(event)}\n          />\n        </div>\n      </div>\n      <div className=\"course-program-content__container\">\n        <Row>\n          {lesson && lesson.summary && (\n            <Col sm={12} md={columnWidth} lg={columnWidth}>\n              <div className=\"course-program-summary\">\n                <MarkdownRenderer>{lesson.summary}</MarkdownRenderer>\n              </div>\n            </Col>\n          )}\n          {topic && topic.summary && (\n            <Col sm={12} md={columnWidth} lg={columnWidth}>\n              <div className=\"course-program-summary\">\n                <MarkdownRenderer>{topic.summary}</MarkdownRenderer>\n\n                {topic && topic.resources && topic.resources?.length > 0 && (\n                  <CourseDownloads\n                    resources={topic.resources || []}\n                    subtitle={topic.introduction || \"\"}\n                  />\n                )}\n              </div>\n            </Col>\n          )}\n        </Row>\n      </div>\n    </div>\n  );\n};\n\nexport default CourseProgramPlayer;\n","/* eslint-disable @typescript-eslint/no-unused-expressions */\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Col, Row } from \"react-grid-system\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { Link } from \"react-router-dom\";\nimport { isMobile } from \"react-device-detect\";\nimport CourseSidebar from \"@/components/Course/CourseSidebar\";\nimport { useLessonProgram } from \"../../hooks/useLessonProgram\";\nimport { Title } from \"@escolalms/components/lib/components/atoms/Typography/Title\";\nimport {\n  CourseTopNav,\n  NoteData,\n} from \"@escolalms/components/lib/components/molecules/CourseTopNav/CourseTopNav\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport Breadcrumbs from \"../Breadcrumbs\";\nimport Container from \"../Container\";\nimport ErrorBox from \"../Errorbox\";\nimport { useCourseProgram } from \"../../hooks/useCourseProgram\";\nimport { StyledCourse } from \"./CourseProgramLessonsStyles\";\nimport { useBookmarkNotes } from \"../../hooks/useBookmarkNotes\";\nimport CourseFinishModal from \"./CourseFinishModal\";\nimport CourseProgramPlayer from \"./CourseProgramPlayer\";\nimport { useCourseBreakPoint } from \"../../hooks/useCourseBreakPoint\";\n\nexport const CourseProgramLessons: React.FC<{\n  program: API.CourseProgram;\n  courseId?: number;\n}> = ({ program, courseId }) => {\n  const {\n    topic,\n    lesson,\n    onNextTopic,\n    onPrevTopic,\n    getNextPrevTopic,\n    isNextTopicButtonDisabled,\n    disableNextTopicButton,\n    sendProgress,\n  } = useLessonProgram(program);\n  const [showFinishModal, setShowFinishModal] = useState<boolean>(false);\n  const { onCompleteTopic, onXAPI } = useCourseProgram({ program });\n  const { topicBookmark, handleBookmark, topicNote } = useBookmarkNotes({\n    topic,\n    lesson,\n    program,\n    courseId,\n  });\n  const { finishedTopicIndex } = useCourseBreakPoint({\n    courseId,\n    program,\n    topic,\n  });\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [lesson?.id, topic?.id]);\n\n  useEffect(() => {\n    if (!program || !topic) return;\n    if (getNextPrevTopic(Number(topic?.id)) === null) {\n      disableNextTopicButton(true);\n      return;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [topic?.id, program]);\n\n  //@ts-ignore\n  window.resetProgress = () =>\n    (async () => {\n      await sendProgress(\n        program.id,\n        program.lessons\n          .flatMap((lesson) => lesson.topics)\n          .map((topic) => ({ topic_id: Number(topic?.id), status: 0 }))\n      );\n    })();\n\n  if (!program) {\n    return <ErrorBox error={t(\"CourseProgram.NoProgram\")} />;\n  }\n\n  if (!topic) {\n    return (\n      <ErrorBox\n        error={t(\"CourseProgram.NoTopic\")}\n        goTo={`/course/${program.id}`}\n        goToText={t(\"CoursePage.BackToCourse\")}\n        alternativeButton={{\n          goTo: \"/courses\",\n          goToText: t(\"CoursePage.SeeOtherCourses\"),\n        }}\n      />\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <StyledCourse className=\"course-program-wrapper\">\n        <Container>\n          <Breadcrumbs\n            items={[\n              <Link to=\"/\">{t(\"Home\")}</Link>,\n              <Link to=\"/courses\">{t(\"Courses\")}</Link>,\n              <Text size=\"12\">{program.title}</Text>,\n              <Text size=\"12\">{topic.title}</Text>,\n            ]}\n          />\n          <Title className=\"main-title\" level={3}>\n            {topic.title}\n          </Title>\n          <Row>\n            <Col lg={9}>\n              {!!showFinishModal && <CourseFinishModal />}\n              {!showFinishModal && (\n                <CourseProgramPlayer\n                  lesson={lesson}\n                  topic={topic}\n                  onXAPI={onXAPI}\n                  disableNextTopicButton={disableNextTopicButton}\n                  getNextPrevTopic={getNextPrevTopic}\n                />\n              )}\n            </Col>\n            <Col lg={3}>\n              <CourseSidebar\n                course={program}\n                topicId={Number(topic?.id)}\n                onCourseFinish={() => setShowFinishModal(true)}\n                onCompleteTopic={onCompleteTopic}\n              />\n            </Col>\n          </Row>\n        </Container>\n        <div className=\"course-nav\">\n          <Container>\n            <CourseTopNav\n              onFinish={() => onCompleteTopic()}\n              mobile={isMobile}\n              onNext={onNextTopic}\n              isFinished={finishedTopicIndex ? finishedTopicIndex > -1 : false}\n              onPrev={onPrevTopic}\n              addNotes={true}\n              newNoteData={{\n                id: topic.id,\n                type: `${courseId}/${lesson?.id}/${topic?.id}:${program.title}:${topic?.title}`,\n              }}\n              currentNote={\n                topicNote?.length ? (topicNote[0] as NoteData) : undefined\n              }\n              addBookmarks={true}\n              bookmarkBtnText={\n                topicBookmark?.length ? \"deleteBookmark\" : \"addBookmark\"\n              }\n              onBookmarkClick={() => handleBookmark()}\n              hasPrev={\n                getNextPrevTopic(Number(topic?.id), false) ? true : false\n              }\n              hasNext={!isNextTopicButtonDisabled}\n            />\n          </Container>\n        </div>\n      </StyledCourse>\n    </React.Fragment>\n  );\n};\n\nexport default CourseProgramLessons;\n","import { useCallback, useContext, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { XAPIEvent } from \"@escolalms/h5p-react\";\n\ninterface Props {\n  program: API.CourseProgram;\n  disableNextTopicButton?: (b: boolean) => void;\n  isThereAnotherTopic?: boolean;\n}\n\nexport const useCourseProgram = ({\n  program,\n  disableNextTopicButton,\n  isThereAnotherTopic = true,\n}: Props) => {\n  const { topicID } = useParams<{ lessonID: string; topicID: string }>();\n  const { sendProgress, h5pProgress } = useContext(EscolaLMSContext);\n  const [lastH5pEvent, setLastH5pEvent] = useState<XAPIEvent | null>(null);\n\n  const onCompleteH5pTopic = useCallback(\n    (event: XAPIEvent, clearState: boolean = true): void => {\n      if (program?.id) {\n        h5pProgress(\n          String(program?.id),\n          Number(topicID),\n          event?.statement as API.IStatement\n        )?.then(() => {\n          if (clearState) {\n            setLastH5pEvent(null);\n          }\n        });\n      }\n    },\n    [program?.id, topicID, h5pProgress]\n  );\n\n  const onCompleteTopic = useCallback((): void => {\n    console.log(\"onCompleteTopic: \", lastH5pEvent);\n    disableNextTopicButton && disableNextTopicButton(false);\n    if (program?.id && !lastH5pEvent) {\n      sendProgress(program?.id, [{ topic_id: Number(topicID), status: 1 }]);\n    } else if (lastH5pEvent) {\n      onCompleteH5pTopic(lastH5pEvent);\n    }\n  }, [\n    lastH5pEvent,\n    disableNextTopicButton,\n    program?.id,\n    sendProgress,\n    topicID,\n    onCompleteH5pTopic,\n  ]);\n\n  const onXAPI = useCallback(\n    (event: XAPIEvent): void => {\n      isThereAnotherTopic &&\n        disableNextTopicButton &&\n        disableNextTopicButton(!Boolean(event?.statement?.verb?.id));\n\n      setLastH5pEvent(event);\n      if (\n        event?.statement &&\n        event?.statement?.verb?.id !==\n          \"http://adlnet.gov/expapi/verbs/completed\"\n      ) {\n        onCompleteH5pTopic(event, false);\n      }\n    },\n    [isThereAnotherTopic, disableNextTopicButton, onCompleteH5pTopic]\n  );\n\n  return {\n    onCompleteTopic,\n    onXAPI,\n    onCompleteH5pTopic,\n  };\n};\n","import { useContext, useMemo } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useTranslation } from \"react-i18next\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { API } from \"@escolalms/sdk/lib\";\n\ninterface Props {\n  topic?: API.Topic;\n  courseId?: number;\n  program: API.CourseProgram;\n  lesson?: API.Lesson;\n}\n\nexport const useBookmarkNotes = ({\n  topic,\n  courseId,\n  program,\n  lesson,\n}: Props) => {\n  const {\n    bookmarkNotes,\n    fetchBookmarkNotes,\n    createBookmarkNote,\n    deleteBookmarkNote,\n  } = useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n\n  const topicBookmark = useMemo(\n    () =>\n      bookmarkNotes.list?.data.filter(\n        (item) =>\n          item.bookmarkable_id === Number(topic?.id) && item.value === null\n      ),\n    [bookmarkNotes.list?.data, topic?.id]\n  );\n\n  const handleBookmark = () => {\n    return !topicBookmark?.length\n      ? createBookmarkNote({\n          bookmarkable_id: Number(topic?.id),\n          bookmarkable_type: `${courseId}/${lesson?.id}/${topic?.id}:${program.title}:${topic?.title}`,\n        }).then(() => {\n          fetchBookmarkNotes();\n          toast.success(t<string>(\"Notifications.CreateBookmark\"));\n        })\n      : deleteBookmarkNote(topicBookmark[0].id).then(() => {\n          fetchBookmarkNotes();\n          toast.success(t<string>(\"Notifications.DeleteBookmark\"));\n        });\n  };\n\n  const topicNote = useMemo(\n    () =>\n      bookmarkNotes.list?.data.filter(\n        (item) =>\n          item.bookmarkable_id === Number(topic?.id) && item.value !== null\n      ),\n    [bookmarkNotes.list?.data, topic?.id]\n  );\n\n  return {\n    handleBookmark,\n    topicBookmark,\n    topicNote,\n  };\n};\n","import { useContext, useEffect, useMemo } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\n\ninterface Props {\n  courseId: number | undefined;\n  program: API.CourseProgram;\n  topic: API.Topic | undefined;\n}\n\nexport const useCourseBreakPoint = ({ courseId, program, topic }: Props) => {\n  const { courseProgressDetails, progress } = useContext(EscolaLMSContext);\n  const location = useLocation();\n  const { push } = useHistory();\n  // if pathname contain 3 splited items we cannot fire topicbreakpoint effect otherwise we can\n  const startWithBreakPoint = location.pathname.split(\"/\").length === 3;\n\n  const getCourseProgress = useMemo(() => {\n    if (\n      courseProgressDetails.byId?.[Number(courseId)] &&\n      courseProgressDetails.byId[Number(courseId)].value\n    ) {\n      return courseProgressDetails.byId[Number(courseId)].value;\n    }\n    return (\n      progress &&\n      progress.value &&\n      progress.value.find(\n        (courseProgress: API.CourseProgressItem) =>\n          courseProgress.course.id === Number(courseId)\n      )?.progress\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [progress, courseId]);\n\n  const topicBreakPoint = useMemo(() => {\n    const currentProgress = getCourseProgress || [];\n\n    const lastStartedLesson = currentProgress\n      .filter(\n        (topic: API.CourseProgressItemElement) =>\n          topic.status === API.CourseProgressItemElementStatus.IN_PROGRESS\n      )\n      .sort(\n        (a: API.CourseProgressItemElement, b: API.CourseProgressItemElement) =>\n          new Date(b.started_at as string).getTime() -\n          new Date(a.started_at as string).getTime()\n      )[0];\n\n    if (!lastStartedLesson) {\n      return currentProgress.filter(\n        (topic: API.CourseProgressItemElement) =>\n          topic.status === API.CourseProgressItemElementStatus.INCOMPLETE\n      )[0];\n    }\n    return lastStartedLesson;\n  }, [getCourseProgress]);\n\n  const findLessonBreakPoint = useMemo(() => {\n    return (\n      topicBreakPoint &&\n      program.lessons.find(\n        (lesson: API.Lesson) =>\n          lesson &&\n          lesson.topics &&\n          lesson.topics.some(\n            (topic: API.Topic) => topic.id === topicBreakPoint.topic_id\n          )\n      )\n    );\n  }, [program, topicBreakPoint]);\n\n  useEffect(() => {\n    if (startWithBreakPoint) {\n      if (findLessonBreakPoint && topicBreakPoint) {\n        push(\n          `/course/${program.id}/${findLessonBreakPoint.id}/${topicBreakPoint.topic_id}`,\n          null\n        );\n      }\n    }\n  }, [\n    startWithBreakPoint,\n    findLessonBreakPoint,\n    program,\n    push,\n    topicBreakPoint,\n  ]);\n\n  const finishedTopicIndex = getCourseProgress?.findIndex((ttopic) => {\n    return (\n      ttopic.topic_id === topic?.id &&\n      ttopic.status === API.CourseProgressItemElementStatus.COMPLETE\n    );\n  });\n\n  return {\n    getCourseProgress,\n    finishedTopicIndex,\n  };\n};\n","import React, { useContext, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport Preloader from \"@/components/Preloader\";\nimport Layout from \"@/components/_App/Layout\";\n\nimport CourseProgramLessons from \"@/components/Course/CourseProgramLessons\";\nimport ErrorBox from \"@/components/Errorbox\";\nimport { t } from \"i18next\";\nimport ScormPlayer from \"@/components/Course/Players/ScormPlayer\";\n\nconst CourseProgramScorm: React.FC<{ program: API.CourseProgram }> = ({\n  program,\n}) => {\n  const sco = program?.scorm_sco;\n  const uuid = sco?.uuid;\n\n  if (!sco && !uuid) {\n    return <React.Fragment />;\n  }\n\n  return (\n    <ScormPlayer\n      value={{\n        title: sco.title,\n        uuid: sco.uuid,\n      }}\n    />\n  );\n};\n\nconst CourseProgram = () => {\n  const { id } = useParams<{ id: string }>();\n  const { program, fetchProgram, fetchCourseProgress } =\n    useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (id) {\n      fetchProgram(Number(id));\n      fetchCourseProgress(Number(id));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n  if (program.loading) {\n    return <Preloader />;\n  }\n  if (program.error) {\n    return <ErrorBox error={t(\"CourseProgram.NoProgram\")} />;\n  }\n  if (program.value && program?.value?.scorm_sco_id) {\n    return (\n      <Layout metaTitle={program.value.title}>\n        <CourseProgramScorm program={program.value} />\n      </Layout>\n    );\n  }\n  if (program.value && program.value.lessons && program.value.lessons.length) {\n    return (\n      <Layout metaTitle={program.value.title}>\n        <CourseProgramLessons program={program.value} courseId={Number(id)} />\n      </Layout>\n    );\n  }\n\n  return <Preloader />;\n};\n\nexport default CourseProgram;\n","import React from \"react\";\nimport { BreadCrumbs } from \"@escolalms/components/lib/components/atoms/BreadCrumbs/BreadCrumbs\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  items: React.ReactNode[];\n};\n\nconst StyledBreadcrumbs = styled.div`\n  margin-bottom: 15px;\n  a {\n    text-decoration: none;\n    color: ${({ theme }) =>\n      theme.mode === \"dark\" ? theme.gray5 : theme.gray2}!important;\n  }\n`;\n\nconst Breadcrumbs: React.FC<Props> = ({ items }) => {\n  return (\n    <StyledBreadcrumbs>\n      <BreadCrumbs items={items} />\n    </StyledBreadcrumbs>\n  );\n};\n\nexport default Breadcrumbs;\n","import { useEffect } from \"react\";\nimport { Spin } from \"@escolalms/components/lib/components/atoms/Spin/Spin\";\nimport styled, { useTheme } from \"styled-components\";\n\nconst StyledLoader = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${({ theme }) =>\n    theme.mode === \"dark\" ? theme.dm__background : theme.background};\n`;\n\nconst Preloader = () => {\n  const theme = useTheme();\n  useEffect(() => {\n    document.body.style.overflow = \"hidden\";\n\n    return () => {\n      document.body.style.overflow = \"inherit\";\n    };\n  }, []);\n\n  return (\n    <StyledLoader>\n      <Spin color={theme.primaryColor} />\n    </StyledLoader>\n  );\n};\n\nexport default Preloader;\n","import { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useCallback, useContext, useMemo, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nexport function useLessonProgram(\n  program: API.CourseProgram,\n  courseRouteName: string = \"/course/\"\n) {\n  const { sendProgress, getNextPrevTopic, progress } =\n    useContext(EscolaLMSContext);\n  const [isNextTopicButtonDisabled, disableNextTopicButton] = useState(false);\n  const { lessonID, topicID } =\n    useParams<{ lessonID: string; topicID: string }>();\n  const { push } = useHistory();\n\n  const lessonId = lessonID ? lessonID : program.lessons[0].id;\n  const topicId = topicID\n    ? topicID\n    : (program &&\n        program.lessons &&\n        program.lessons[0] &&\n        program.lessons[0].topics &&\n        program?.lessons[0]?.topics[0]?.id) ||\n      0;\n\n  const lesson: API.Lesson | undefined = useMemo(\n    () => program.lessons.find((lesson) => lesson.id === Number(lessonId)),\n    [program, lessonId]\n  );\n\n  const topic: API.Topic | undefined = useMemo(\n    () =>\n      lesson &&\n      lesson.topics &&\n      lesson.topics.find((topic) => topic.id === Number(topicId)),\n    [lesson, topicId]\n  );\n\n  const onNextTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const nextTopic = getNextPrevTopic(Number(topicId));\n\n          nextTopic &&\n            push(\n              `${courseRouteName}${program.id}/${nextTopic.lesson_id}/${nextTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n  const onPrevTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const prevTopic = getNextPrevTopic(Number(topicId), false);\n\n          prevTopic &&\n            push(\n              `${courseRouteName}${program.id}/${prevTopic.lesson_id}/${prevTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n\n  const onNextTopicPreview = useCallback(\n    (next = true) => {\n      const nextTopic = getNextPrevTopic(Number(topicId), next);\n\n      nextTopic &&\n        push(\n          `${courseRouteName}${program.id}/${nextTopic?.lesson_id}/${nextTopic?.id}`\n        );\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [lessonId, topicId, program, program.id, push, courseRouteName]\n  );\n\n  return {\n    topic,\n    lesson,\n    onNextTopic,\n    onPrevTopic,\n    getNextPrevTopic,\n    isNextTopicButtonDisabled,\n    disableNextTopicButton,\n    onNextTopicPreview,\n    sendProgress,\n    progress,\n  } as const;\n}\n","import React, {\n  ReactElement,\n  FunctionComponent,\n  useContext,\n  useState,\n} from \"react\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport styled, { css } from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { ResizeIcon } from \"../../../icons\";\n\nconst StyledDiv = styled.div<{ fullview: boolean }>`\n  > button {\n    position: fixed;\n    right: 5px;\n    bottom: 5px;\n    z-index: 9999;\n    svg path {\n      fill: white;\n    }\n  }\n  iframe {\n    border: none;\n    display: block;\n    width: 100%;\n  }\n  ${(props) => {\n    if (props.fullview) {\n      return css`\n        iframe {\n          position: fixed;\n          top: 90px;\n          left: 0;\n          height: calc(100% - 90px - 80px);\n\n          z-index: 9999;\n        }\n      `;\n    } else {\n      return css`\n        display: flex;\n\n        min-height: 80vh;\n        max-height: 80vh;\n        height: 100vh;\n        iframe {\n          height: 100%;\n        }\n      `;\n    }\n  }}\n`;\n\ninterface ScormPlayerProps {\n  title: string;\n  uuid: string;\n}\n\nconst ScormPlayer: FunctionComponent<{\n  value: ScormPlayerProps;\n}> = ({ value }): ReactElement => {\n  const { apiUrl } = useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n  const [fullView, setFullView] = useState(false);\n\n  return (\n    <div className=\"scorm-wrapper\">\n      <StyledDiv fullview={fullView}>\n        <Button onClick={() => setFullView(!fullView)}>\n          {\" \"}\n          {t(\"Scorm.Resize\")} <ResizeIcon />\n        </Button>\n        <iframe\n          title={value.title}\n          src={`${apiUrl}/api/scorm/play/${value.uuid}`}\n        />\n      </StyledDiv>\n    </div>\n  );\n};\n\nexport default ScormPlayer;\n","import React, { useContext, useState, useMemo } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { CourseAgenda } from \"@escolalms/components/lib/components/organisms/CourseAgenda/CourseAgenda\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useHistory } from \"react-router-dom\";\nimport { isMobile } from \"react-device-detect\";\nimport styled, { css } from \"styled-components\";\nimport { useLessonProgram } from \"../../../hooks/useLessonProgram\";\nimport { Button } from \"@escolalms/components\";\nimport { t } from \"i18next\";\nimport { Topic } from \"@escolalms/sdk/lib/types/api\";\n\nconst StyledSidebar = styled.aside`\n  padding-bottom: 100px;\n  .show-agenda-btn {\n    width: 100%;\n  }\n  .agenda-wrapper {\n    ${isMobile &&\n    css`\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      transform: translate(100%, 0);\n      transition: transform 0.25s;\n      overflow: scroll;\n      padding: 40px 0 55px;\n      z-index: 10;\n      background-color: ${({ theme }) =>\n        theme.mode === \"dark\" ? theme.dm__background : theme.background};\n      &--visible {\n        transform: translate(0, 0);\n      }\n      .hide-agenda-btn {\n        display: block;\n        margin: 0 15px 0 auto;\n      }\n    `}\n  }\n`;\n\nexport const CourseSidebar: React.FC<{\n  course: API.CourseProgram;\n  topicId: number;\n  onCompleteTopic?: () => void;\n  onCourseFinish?: () => void;\n}> = ({ course, topicId, onCompleteTopic, onCourseFinish }) => {\n  const { progress } = useLessonProgram(course);\n  const { courseProgressDetails } = useContext(EscolaLMSContext);\n\n  const history = useHistory();\n  const [agendaVisible, setAgendaVisible] = useState(false);\n  const program = (course?.lessons || []).filter(\n    (lesson) => lesson && lesson.topics && lesson?.topics?.length > 0\n  ) as API.Lesson[];\n  const { topicIsFinished } = useContext(EscolaLMSContext);\n  const allTopics = course.lessons.map((item) => item.topics);\n  //@ts-ignore\n  const arrayOfTopics = [].concat.apply([], allTopics);\n\n  const getCourseProgress = useMemo(() => {\n    const courseId = course.id;\n    if (\n      courseProgressDetails &&\n      courseProgressDetails.byId &&\n      courseProgressDetails.byId[Number(courseId)] &&\n      courseProgressDetails.byId[Number(courseId)].value\n    ) {\n      return courseProgressDetails.byId[Number(courseId)].value;\n    }\n    return (\n      progress &&\n      progress.value &&\n      progress.value.find(\n        (courseProgress: API.CourseProgressItem) =>\n          courseProgress.course.id === Number(courseId)\n      )?.progress\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [progress, course]);\n\n  const finishedTopics = arrayOfTopics\n    .filter((item: API.Topic) => {\n      return (\n        topicIsFinished(item.id) ||\n        getCourseProgress?.some(\n          (progressItem) =>\n            progressItem.topic_id === item.id && progressItem.status === 1\n        )\n      );\n    })\n    .map((item: API.Topic) => item.id);\n\n  if (!course && !program) {\n    return <React.Fragment />;\n  }\n  return (\n    <StyledSidebar>\n      {isMobile && (\n        <Button\n          mode=\"outline\"\n          className=\"show-agenda-btn\"\n          onClick={() => setAgendaVisible(true)}\n        >\n          {t(\"CourseProgram.ShowAgenda\")}\n        </Button>\n      )}\n      <div\n        className={`${\n          agendaVisible\n            ? \"agenda-wrapper agenda-wrapper--visible\"\n            : \"agenda-wrapper\"\n        }`}\n      >\n        {isMobile && (\n          <Button\n            className=\"hide-agenda-btn\"\n            mode=\"secondary\"\n            onClick={() => setAgendaVisible(false)}\n          >\n            &#10005;\n          </Button>\n        )}\n        <CourseAgenda\n          onNextTopicClick={() => {\n            let nextTopic;\n\n            course.lessons.forEach((lesson, lIndex, lessons) => {\n              lesson.topics &&\n                lesson.topics.forEach((topic, tIndex) => {\n                  if (topic.id === topicId) {\n                    // try find next topic in current lesson\n                    if (lesson.topics && lesson.topics[tIndex + 1]) {\n                      nextTopic =\n                        lesson.topics[tIndex + 1] && lesson.topics[tIndex + 1];\n                      // try find first topic in next lesson\n                    } else if (lessons[lIndex + 1]) {\n                      nextTopic =\n                        lessons[lIndex + 1].topics &&\n                        //@ts-ignore\n                        lessons[lIndex + 1].topics[0];\n                      // otherwise this is end so going back to first lesson and topic\n                    } else {\n                      nextTopic = lessons[0].topics && lessons[0].topics[0];\n                    }\n                  }\n                });\n            });\n\n            if (nextTopic) {\n              history.push(\n                `/course/${course.id}/${(nextTopic as Topic).lesson_id}/${\n                  (nextTopic as Topic).id\n                }`\n              );\n              setAgendaVisible(false);\n            }\n          }}\n          mobile={isMobile}\n          lessons={course.lessons}\n          currentTopicId={topicId}\n          finishedTopicIds={finishedTopics}\n          onMarkFinished={() => onCompleteTopic?.()}\n          onTopicClick={(topic) => {\n            history.push(`/course/${course.id}/${topic.lesson_id}/${topic.id}`);\n            setAgendaVisible(false);\n          }}\n          onCourseFinished={() => onCourseFinish?.()}\n        />\n      </div>\n    </StyledSidebar>\n  );\n};\n\nexport default CourseSidebar;\n","import React, { ReactElement, FunctionComponent, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\n\nconst TextPlayerStyles = styled.div`\n  h1 {\n    font-size: 2em;\n  }\n  h2 {\n    font-size: 1.5em;\n  }\n  h3 {\n    font-size: 1.17em;\n  }\n  h4 {\n    font-size: 1em;\n  }\n  h5 {\n    font-size: 0.9em;\n  }\n`;\n\nconst TextPlayer: FunctionComponent<{\n  value?: string;\n  onLoad?: () => void;\n}> = ({ value, onLoad }): ReactElement => {\n  useEffect(() => {\n    value && onLoad && onLoad();\n  }, [value, onLoad]);\n\n  return (\n    <TextPlayerStyles>\n      {value && <MarkdownRenderer>{value}</MarkdownRenderer>}\n    </TextPlayerStyles>\n  );\n};\n\nexport default TextPlayer;\n","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { XAPIEvent } from \"@escolalms/h5p-react\";\nimport TextPlayer from \"./Players/TextPlayer\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { ImagePlayer } from \"@escolalms/components/lib/components/players/ImagePlayer/ImagePlayer\";\nimport { AudioVideoPlayer } from \"@escolalms/components/lib/components/players/AudioVideoPlayer/AudioVideoPlayer\";\nimport { OEmbedPlayer } from \"@escolalms/components/lib/components/players/OEmbedPlayer/OEmbedPlayer\";\nimport { H5Player } from \"@escolalms/components/lib/components/players/H5Player/H5Player\";\nimport { PdfPlayer } from \"@escolalms/components/lib/components/players/PdfPlayer/PdfPlayer\";\nimport { ProjectPlayer } from \"@escolalms/components/lib/components/players/ProjectPlayer/ProjectPlayer\";\nimport { isMobile } from \"react-device-detect\";\nimport ScormPlayer from \"./Players/ScormPlayer\";\nimport styled from \"styled-components\";\nimport GiftQuizPlayer from \"@escolalms/components/lib/components/quizzes\";\n\nconst StyledPdfPlayer = styled(PdfPlayer)`\n  .course-pdf-player {\n    .react-pdf__Page__svg,\n    svg {\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n`;\n\nexport const CourseProgramContent: React.FC<{\n  lessonId: number;\n  isThereAnotherTopic?: boolean;\n  topicId?: number;\n  preview?: boolean;\n  disableNextTopicButton?: (b: boolean) => void;\n  onXAPI?: (event: XAPIEvent) => void;\n}> = ({\n  lessonId,\n  topicId,\n  preview = false,\n  disableNextTopicButton,\n  isThereAnotherTopic = true,\n  onXAPI,\n}) => {\n  const { program, topicPing, topicIsFinished } = useContext(EscolaLMSContext);\n\n  const topic = useMemo(() => {\n    return program.value?.lessons\n      ?.find((lesson: API.Lesson) => lesson.id === lessonId)\n      ?.topics?.find((topic: API.Topic) => topic.id === topicId);\n  }, [program, lessonId, topicId]);\n\n  useEffect(() => {\n    const isTopicFinished = topic?.id && topicIsFinished(topic.id);\n\n    isThereAnotherTopic &&\n      disableNextTopicButton &&\n      isTopicFinished &&\n      disableNextTopicButton(!isTopicFinished && !Boolean(topic?.can_skip));\n  }, [disableNextTopicButton, topic, isThereAnotherTopic, topicIsFinished]);\n\n  useEffect(() => {\n    if (!preview) {\n      const ping = () =>\n        topicId && !topicIsFinished(topicId) && topicPing(topicId);\n      const interval = setInterval(() => {\n        ping();\n      }, 5000);\n      ping();\n      return () => clearInterval(interval);\n    }\n  }, [topicPing, preview, topicId, topicIsFinished]);\n\n  if (!topic) {\n    return <React.Fragment />;\n  }\n\n  if (!topic.topicable?.value) {\n    return (\n      <pre className=\"error\">Error: topic.topicable?.value is missing</pre>\n    );\n  }\n  if (topic.topicable_type) {\n    switch (topic.topicable_type) {\n      case API.TopicType.H5P:\n        return (\n          <H5Player\n            onXAPI={(e: XAPIEvent) => onXAPI?.(e)}\n            //@ts-ignore\n            h5pObject={topic.topicable.content as API.H5PObject}\n          />\n        );\n      case API.TopicType.OEmbed:\n        return (\n          <>\n            <OEmbedPlayer url={topic.topicable.value} key={topicId} />\n          </>\n        );\n      case API.TopicType.RichText:\n        return <TextPlayer value={topic.topicable.value} />;\n      case API.TopicType.Video:\n        return (\n          <AudioVideoPlayer mobile={isMobile} url={topic.topicable.url} light />\n        );\n      case API.TopicType.Image:\n        return <ImagePlayer topic={topic} onLoad={() => {}} />;\n      case API.TopicType.Audio:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            audio\n            url={topic.topicable.url}\n            light\n          />\n        );\n\n      case API.TopicType.Pdf:\n        return (\n          <StyledPdfPlayer\n            url={topic.topicable.url}\n            pageConfig={{\n              renderMode: \"svg\",\n              className: \"course-pdf-player\",\n            }}\n          />\n        );\n\n      case API.TopicType.Scorm:\n        return (\n          <ScormPlayer\n            value={{\n              title: topic.title,\n              uuid: topic.topicable.uuid,\n            }}\n          />\n        );\n\n      case API.TopicType.GiftQuiz:\n        return <GiftQuizPlayer topic={topic} />;\n      case API.TopicType.Project:\n        return (\n          <ProjectPlayer course_id={program.value?.id ?? 0} topic={topic} />\n        );\n      default:\n        return <pre>{(topic as API.Topic).topicable_type}</pre>;\n    }\n  }\n\n  return <pre>loading... (or error)</pre>;\n};\n\nexport default CourseProgramContent;\n"],"sourceRoot":""}