(this["webpackJsonpescolalms-demo"]=this["webpackJsonpescolalms-demo"]||[]).push([[4],{666:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={defaultDateFormat:"dd/MM/yyyy",defaultDateTimeFormat:"dd/MM/yyyy, HH:mm"}},668:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return p}));var o=n(176),a=n(291),i=n(137),r=n(666),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a.defaultDateFormat;return e?Object(o.default)(new Date(e),t):""},u=function(e,t,n){return!(!e||!t)&&c(e,n)===c(t,n)},s=function(e){var t=[];return e.forEach((function(e){var n=Object(o.default)(new Date(e),"MM/dd/yyyy"),a=t.find((function(e){return Object(o.default)(new Date(e.date),"MM/dd/yyyy")===n}));a?a.times.push(new Date(e)):t.push({date:n,times:[new Date(e)]})})),t},d=function(e){return e.filter((function(e){return Object(a.default)(e,new Date)}))},l=function(e){return e.sort((function(e,t){return e.getTime()-t.getTime()}))},v=function(e){var t=Array.from(e.matchAll(/(\d+)\s+(day|hour|minute|second|week|year)s?/g)),n={},o=!1;if(t.forEach((function(e){o=!0;var t=parseInt(e[1]),a=e[2];n[a]?n[a]+=t:n[a]=t})),!o){Array.from(e.matchAll(/\d+/g)).forEach((function(e){var t=parseInt(e[0]);n.hour=t}))}return n},p=function(e,t){return Object(i.a)(new Date(e),{years:t.year||0,months:t.month||0,weeks:t.week||0,days:t.day||0,hours:t.hour||0,minutes:t.minute||0,seconds:t.second||0})}},675:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return m}));var o=n(369),a=n(666),i=n(668),r=n(162),c=n(145),u=n(146),s=function(e){var t;return e?null===(t=e.items)||void 0===t?void 0:t.map((function(e){return e.name})).join(", "):""},d=function(e){var t,n,r,c,u,d,l,v,p,b,m,f,j,y,h,T,O,g,x,E,P,C,w,A,I,_,M,k,N,D,S,F,z,R,B,L,U,H,V,J,W,X,G,Q,q,K="".concat("Notifications.").concat(e.event);switch(e.event){case o.EventTypes.StationaryEventAuthorAssigned:return{translation:K,object:{name:(null===(t=e.data.stationaryEvent)||void 0===t?void 0:t.name)||""}};case o.EventTypes.StationaryEventAuthorUnassigned:return{translation:K,object:{name:(null===(n=e.data.stationaryEvent)||void 0===n?void 0:n.name)||""}};case o.EventTypes.StationaryEventAssigned:return{translation:K,object:{name:(null===(r=e.data.stationaryEvent)||void 0===r?void 0:r.name)||""}};case o.EventTypes.StationaryEventUnassigned:return{translation:K,object:{name:(null===(c=e.data.stationaryEvent)||void 0===c?void 0:c.name)||""}};case o.EventTypes.AbandonedCartEvent:case o.EventTypes.OrderCancelled:case o.EventTypes.OrderCreated:return{translation:K};case o.EventTypes.OrderPaid:return{translation:K,object:{name:s(e.data.order)||""}};case o.EventTypes.ProductableAttached:return{translation:K,object:{name:(null===(u=e.data.productable)||void 0===u?void 0:u.name)||""}};case o.EventTypes.ProductableDetached:return{translation:K,object:{name:(null===(d=e.data.productable)||void 0===d?void 0:d.name)||""}};case o.EventTypes.ProductAddedToCart:return{translation:K,object:{name:(null===(l=e.data.product)||void 0===l?void 0:l.name)||""}};case o.EventTypes.ProductAttached:return{translation:K,object:{name:(null===(v=e.data.product)||void 0===v?void 0:v.name)||""}};case o.EventTypes.ProductBought:return{translation:K,object:{name:(null===(p=e.data.product)||void 0===p?void 0:p.name)||""}};case o.EventTypes.ProductDetached:return{translation:K,object:{name:(null===(b=e.data.product)||void 0===b?void 0:b.name)||""}};case o.EventTypes.ProductRemovedFromCart:return{translation:K,object:{name:(null===(m=e.data.product)||void 0===m?void 0:m.name)||""}};case o.EventTypes.PaymentCancelled:return{translation:K,object:{amount:(null===(f=e.data.payment)||void 0===f?void 0:f.amount)||0,name:s(null===(j=e.data.payment)||void 0===j?void 0:j.payable)}};case o.EventTypes.PaymentFailed:return{translation:K,object:{amount:(null===(y=e.data.payment)||void 0===y?void 0:y.amount)||0,name:s(null===(h=e.data.payment)||void 0===h?void 0:h.payable)}};case o.EventTypes.PaymentRegistered:return{translation:K,object:{amount:(null===(T=e.data.payment)||void 0===T?void 0:T.amount)||0}};case o.EventTypes.PaymentSuccess:return{translation:K,object:{amount:(null===(O=e.data.payment)||void 0===O?void 0:O.amount)||0,name:s(null===(g=e.data.payment)||void 0===g?void 0:g.payable)}};case o.EventTypes.CourseAccessFinished:return{translation:K,object:{name:(null===(x=e.data.course)||void 0===x?void 0:x.title)||""}};case o.EventTypes.CourseAccessStarted:return{translation:K,object:{name:(null===(E=e.data.course)||void 0===E?void 0:E.title)||""}};case o.EventTypes.CourseAssigned:return{translation:K,object:{name:(null===(P=e.data.course)||void 0===P?void 0:P.title)||""}};case o.EventTypes.CourseDeadlineSoon:return{translation:K,object:{name:(null===(C=e.data.course)||void 0===C?void 0:C.title)||"",date:Object(i.d)(null===(w=e.data.course)||void 0===w?void 0:w.active_to,a.a.defaultDateTimeFormat)}};case o.EventTypes.CoursedPublished:return{translation:K,object:{name:(null===(A=e.data.course)||void 0===A?void 0:A.title)||""}};case o.EventTypes.CourseFinished:return{translation:K,object:{name:(null===(I=e.data.course)||void 0===I?void 0:I.title)||""}};case o.EventTypes.CourseStarted:return{translation:K,object:{name:(null===(_=e.data.course)||void 0===_?void 0:_.title)||""}};case o.EventTypes.CourseStatusChanged:return{translation:K,object:{name:(null===(M=e.data.course)||void 0===M?void 0:M.title)||""}};case o.EventTypes.CourseTutorAssigned:return{translation:K,object:{name:(null===(k=e.data.course)||void 0===k?void 0:k.title)||""}};case o.EventTypes.CourseTutorUnassigned:return{translation:K,object:{name:(null===(N=e.data.course)||void 0===N?void 0:N.title)||""}};case o.EventTypes.CourseUnassigned:return{translation:K,object:{name:(null===(D=e.data.course)||void 0===D?void 0:D.title)||""}};case o.EventTypes.TopicFinished:return{translation:K,object:{name:(null===(S=e.data.course)||void 0===S?void 0:S.title)||""}};case o.EventTypes.TopicTypeChanged:return{translation:K,object:{name:(null===(F=e.data.topicContent)||void 0===F?void 0:F.value)||""}};case o.EventTypes.ReportTerm:return{translation:K,object:{name:(null===(z=e.data.consultationTerm)||void 0===z?void 0:z.consultation.name)||"",date:Object(i.d)(null===(R=e.data.consultationTerm)||void 0===R?void 0:R.executed_at,a.a.defaultDateTimeFormat),user:"".concat(null===(B=e.data.consultationTerm)||void 0===B||null===(L=B.user)||void 0===L?void 0:L.first_name," ").concat(null===(U=e.data.consultationTerm)||void 0===U||null===(H=U.user)||void 0===H?void 0:H.last_name)}};case o.EventTypes.ApprovedTerm:return{translation:K,object:{date:Object(i.d)(null===(V=e.data.consultationTerm)||void 0===V?void 0:V.executed_at)||""}};case o.EventTypes.ApprovedTermWithTrainer:return{translation:K,object:{date:Object(i.d)(null===(J=e.data.consultationTerm)||void 0===J?void 0:J.executed_at)||""}};case o.EventTypes.ChangeTerm:return{translation:K,object:{date:Object(i.d)(null===(W=e.data.consultationTerm)||void 0===W?void 0:W.executed_at)||""}};case o.EventTypes.RejectTerm:return{translation:K,object:{date:Object(i.d)(null===(X=e.data.consultationTerm)||void 0===X?void 0:X.executed_at)||""}};case o.EventTypes.RejectTermWithTrainer:return{translation:K,object:{date:Object(i.d)(null===(G=e.data.consultationTerm)||void 0===G?void 0:G.executed_at)||""}};case o.EventTypes.ReminderAboutTerm:return{translation:K,object:{date:Object(i.d)(null===(Q=e.data.consultationTerm)||void 0===Q?void 0:Q.executed_at)||""}};case o.EventTypes.ReminderTrainerAboutTerm:return{translation:K,object:{date:Object(i.d)(null===(q=e.data.consultationTerm)||void 0===q?void 0:q.executed_at)||""}};default:return{translation:K}}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2?arguments[2]:void 0;if(!e||"number"!==typeof e)return 0;var o=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return n?o/n:o},v=function(e,t){return e?(t?l(e,2,100)*(1+t/100):l(e,2,100)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0},p=function(e,t){return-1!==t.authors.findIndex((function(t){return t.id===e}))},b=function(e){var t,n=e?Object(r.a)(e.getTime(),(new Date).getTime()):null,o=e?Object(c.a)(e.getTime(),(new Date).getTime()):null,a=e?Object(u.a)(e.getTime(),(new Date).getTime()):null,i=null!==n&&0!==n?[n,"day"]:null;return null!==(t=null!==i&&void 0!==i?i:null!==o&&0!==o?[o,"hour"]:null)&&void 0!==t?t:null!==a&&0!==a?[a,"minute"]:null},m=new Intl.RelativeTimeFormat("pl",{style:"short"})},682:function(e,t,n){"use strict";var o,a=n(72),i=n(1),r=n(280),c=n(20),u=n(3),s=c.default.div(o||(o=Object(a.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n"])),(function(e){var t=e.theme;return"dark"===t.mode?t.dm__background:t.background}));t.a=function(){var e=Object(c.useTheme)();return Object(i.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="inherit"}}),[]),Object(u.jsx)(s,{children:Object(u.jsx)(r.Spin,{color:e.primaryColor})})}},713:function(e,t){},717:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(12),a=n(53),i=n(1),r=n(34);function c(e){var t,n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/course/",u=Object(i.useContext)(a.EscolaLMSContext),s=u.sendProgress,d=u.getNextPrevTopic,l=u.progress,v=Object(i.useState)(!1),p=Object(o.a)(v,2),b=p[0],m=p[1],f=Object(r.i)(),j=f.lessonID,y=f.topicID,h=Object(r.g)().push,T=j||e.lessons[0].id,O=y||(e&&e.lessons&&e.lessons[0]&&e.lessons[0].topics&&(null===e||void 0===e||null===(t=e.lessons[0])||void 0===t||null===(n=t.topics[0])||void 0===n?void 0:n.id)||0),g=Object(i.useMemo)((function(){return e.lessons.find((function(e){return e.id===Number(T)}))}),[e,T]),x=Object(i.useMemo)((function(){return g&&g.topics&&g.topics.find((function(e){return e.id===Number(O)}))}),[g,O]),E=Object(i.useCallback)((function(){e.id&&s(e.id,[{topic_id:Number(O),status:1}]).then((function(){var t=d(Number(O));t&&h("".concat(c).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[O,e,h,d,s,c]),P=Object(i.useCallback)((function(){e.id&&s(e.id,[{topic_id:Number(O),status:1}]).then((function(){var t=d(Number(O),!1);t&&h("".concat(c).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[O,e,h,d,s,c]),C=Object(i.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=d(Number(O),t);n&&h("".concat(c).concat(e.id,"/").concat(null===n||void 0===n?void 0:n.lesson_id,"/").concat(null===n||void 0===n?void 0:n.id))}),[T,O,e,e.id,h,c]);return{topic:x,lesson:g,onNextTopic:E,onPrevTopic:P,getNextPrevTopic:d,isNextTopicButtonDisabled:b,disableNextTopicButton:m,onNextTopicPreview:C,sendProgress:s,progress:l}}},746:function(e,t){},747:function(e,t){},748:function(e,t){},749:function(e,t){},750:function(e,t){},757:function(e,t,n){"use strict";var o,a,i,r=n(12),c=n(72),u=n(1),s=n(75),d=n(53),l=n(20),v=n(276),p=n(277),b=n(3),m=l.default.div(o||(o=Object(c.a)(["\n  > button {\n    position: fixed;\n    right: 5px;\n    bottom: 5px;\n    z-index: 9999;\n    svg path {\n      fill: white;\n    }\n  }\n  iframe {\n    border: none;\n    display: block;\n    width: 100%;\n  }\n  ","\n"])),(function(e){return e.fullview?Object(l.css)(a||(a=Object(c.a)(["\n        iframe {\n          position: fixed;\n          top: 90px;\n          left: 0;\n          height: calc(100% - 90px - 80px);\n\n          z-index: 9999;\n        }\n      "]))):Object(l.css)(i||(i=Object(c.a)(["\n        display: flex;\n\n        min-height: 80vh;\n        max-height: 80vh;\n        height: 100vh;\n        iframe {\n          height: 100%;\n        }\n      "])))}));t.a=function(e){var t=e.value,n=Object(u.useContext)(d.EscolaLMSContext).apiUrl,o=Object(v.a)().t,a=Object(u.useState)(!1),i=Object(r.a)(a,2),c=i[0],l=i[1];return Object(b.jsx)("div",{className:"scorm-wrapper",children:Object(b.jsxs)(m,{fullview:c,children:[Object(b.jsxs)(s.Button,{onClick:function(){return l(!c)},children:[" ",o("Scorm.Resize")," ",Object(b.jsx)(p.z,{})]}),Object(b.jsx)("iframe",{title:t.title,src:"".concat(n,"/api/scorm/play/").concat(t.uuid)})]})})}},758:function(e,t,n){"use strict";var o,a,i=n(12),r=n(72),c=n(1),u=n.n(c),s=n(247),d=n(53),l=n(34),v=n(74),p=n(20),b=n(717),m=n(30),f=n(113),j=n(675),y=n(3),h=p.default.aside(o||(o=Object(r.a)(["\n  padding-bottom: 100px;\n  .show-agenda-btn {\n    width: 100%;\n  }\n  .agenda-wrapper {\n    ","\n  }\n"])),v.isMobile&&Object(p.css)(a||(a=Object(r.a)(["\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      transform: translate(100%, 0);\n      transition: transform 0.25s;\n      overflow: scroll;\n      padding: 40px 0 55px;\n      z-index: 10;\n      background-color: ",";\n      &--visible {\n        transform: translate(0, 0);\n      }\n      .hide-agenda-btn {\n        display: block;\n        margin: 0 15px 0 auto;\n      }\n    "])),(function(e){var t=e.theme;return"dark"===t.mode?t.dm__background:t.background})));t.a=function(e){var t,n=e.course,o=e.topicId,a=e.onCompleteTopic,r=e.onCourseFinish,p=Object(b.a)(n).progress,T=Object(c.useContext)(d.EscolaLMSContext),O=T.courseProgressDetails,g=T.user,x=Object(l.g)(),E=Object(c.useState)(!1),P=Object(i.a)(E,2),C=P[0],w=P[1],A=((null===n||void 0===n?void 0:n.lessons)||[]).filter((function(e){var t;return e&&e.topics&&(null===e||void 0===e||null===(t=e.topics)||void 0===t?void 0:t.length)>0})),I=Object(c.useContext)(d.EscolaLMSContext).topicIsFinished,_=n.lessons.map((function(e){return e.topics})),M=[].concat.apply([],_),k=Object(c.useMemo)((function(){var e,t=n.id;return O&&O.byId&&O.byId[Number(t)]&&O.byId[Number(t)].value?O.byId[Number(t)].value:p&&p.value&&(null===(e=p.value.find((function(e){return e.course.id===Number(t)})))||void 0===e?void 0:e.progress)}),[p,n]),N=M.filter((function(e){return I(e.id)||(null===k||void 0===k?void 0:k.some((function(t){return t.topic_id===e.id&&1===t.status})))})).map((function(e){return e.id}));return n||A?Object(y.jsxs)(h,{children:[v.isMobile&&Object(y.jsx)(m.Button,{mode:"outline",className:"show-agenda-btn",onClick:function(){return w(!0)},children:Object(f.t)("CourseProgram.ShowAgenda")}),Object(y.jsxs)("div",{className:"".concat(C?"agenda-wrapper agenda-wrapper--visible":"agenda-wrapper"),children:[v.isMobile&&Object(y.jsx)(m.Button,{className:"hide-agenda-btn",mode:"secondary",onClick:function(){return w(!1)},children:"\u2715"}),Object(y.jsx)(s.CourseAgenda,{unlockAllTopics:Object(j.f)(Number(null===(t=g.value)||void 0===t?void 0:t.id),n),onNextTopicClick:function(){var e;n.lessons.forEach((function(t,n,a){t.topics&&t.topics.forEach((function(i,r){i.id===o&&(e=t.topics&&t.topics[r+1]?t.topics[r+1]&&t.topics[r+1]:a[n+1]?a[n+1].topics&&a[n+1].topics[0]:a[0].topics&&a[0].topics[0])}))})),e&&(x.push("/course/".concat(n.id,"/").concat(e.lesson_id,"/").concat(e.id)),w(!1))},mobile:v.isMobile,lessons:n.lessons,currentTopicId:o,finishedTopicIds:N,onMarkFinished:function(){return null===a||void 0===a?void 0:a()},onTopicClick:function(e){x.push("/course/".concat(n.id,"/").concat(e.lesson_id,"/").concat(e.id)),w(!1)},onCourseFinished:function(){return null===r||void 0===r?void 0:r()}})]})]}):Object(y.jsx)(u.a.Fragment,{})}},763:function(e,t,n){"use strict";var o,a,i=n(72),r=n(1),c=n.n(r),u=n(35),s=n(20),d=n(245),l=n(3),v=s.default.div(o||(o=Object(i.a)(["\n  h1 {\n    font-size: 2em;\n  }\n  h2 {\n    font-size: 1.5em;\n  }\n  h3 {\n    font-size: 1.17em;\n  }\n  h4 {\n    font-size: 1em;\n  }\n  h5 {\n    font-size: 0.9em;\n  }\n"]))),p=function(e){var t=e.value,n=e.onLoad;return Object(r.useEffect)((function(){t&&n&&n()}),[t,n]),Object(l.jsx)(v,{children:t&&Object(l.jsx)(d.MarkdownRenderer,{children:t})})},b=n(702),m=n(751),f=n(741),j=n(732),y=n(752),h=n(745),T=n(756),O=n(74),g=n(757),x=n(754),E=n.n(x),P=Object(s.default)(h.PdfPlayer)(a||(a=Object(i.a)(["\n  .course-pdf-player {\n    .react-pdf__Page__svg,\n    svg {\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n"])));t.a=function(e){var t,n,o,a=e.lessonId,i=e.topicId,s=e.preview,d=void 0!==s&&s,v=e.disableNextTopicButton,h=e.isThereAnotherTopic,x=void 0===h||h,C=e.onXAPI,w=Object(r.useContext)(u.EscolaLMSContext),A=w.program,I=w.topicPing,_=w.topicIsFinished,M=Object(r.useMemo)((function(){var e,t,n,o;return null===(e=A.value)||void 0===e||null===(t=e.lessons)||void 0===t||null===(n=t.find((function(e){return e.id===a})))||void 0===n||null===(o=n.topics)||void 0===o?void 0:o.find((function(e){return e.id===i}))}),[A,a,i]);if(Object(r.useEffect)((function(){var e=(null===M||void 0===M?void 0:M.id)&&_(M.id);x&&v&&e&&v(!e&&!Boolean(null===M||void 0===M?void 0:M.can_skip))}),[v,M,x,_]),Object(r.useEffect)((function(){if(!d){var e=function(){return i&&!_(i)&&I(i)},t=setInterval((function(){e()}),5e3);return e(),function(){return clearInterval(t)}}}),[I,d,i,_]),!M)return Object(l.jsx)(c.a.Fragment,{});if(null===(t=M.topicable)||void 0===t||!t.value)return Object(l.jsx)("pre",{className:"error",children:"Error: topic.topicable?.value is missing"});if(M.topicable_type)switch(M.topicable_type){case b.API.TopicType.H5P:return Object(l.jsx)(y.H5Player,{onXAPI:function(e){return null===C||void 0===C?void 0:C(e)},h5pObject:M.topicable.content});case b.API.TopicType.OEmbed:return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(j.OEmbedPlayer,{url:M.topicable.value},i)});case b.API.TopicType.RichText:return Object(l.jsx)(p,{value:M.topicable.value});case b.API.TopicType.Video:return Object(l.jsx)(f.AudioVideoPlayer,{mobile:O.isMobile,url:M.topicable.url,light:!0});case b.API.TopicType.Image:return Object(l.jsx)(m.ImagePlayer,{topic:M,onLoad:function(){}});case b.API.TopicType.Audio:return Object(l.jsx)(f.AudioVideoPlayer,{mobile:O.isMobile,audio:!0,url:M.topicable.url,light:!0});case b.API.TopicType.Pdf:return Object(l.jsx)(P,{url:M.topicable.url,pageConfig:{renderMode:"svg",className:"course-pdf-player"}});case b.API.TopicType.Scorm:return Object(l.jsx)(g.a,{value:{title:M.title,uuid:M.topicable.uuid}});case b.API.TopicType.GiftQuiz:return Object(l.jsx)(E.a,{topic:M});case b.API.TopicType.Project:return Object(l.jsx)(T.ProjectPlayer,{course_id:null!==(n=null===(o=A.value)||void 0===o?void 0:o.id)&&void 0!==n?n:0,topic:M});default:return Object(l.jsx)("pre",{children:M.topicable_type})}return Object(l.jsx)("pre",{children:"loading... (or error)"})}}}]);
//# sourceMappingURL=4.40ea5ab8.chunk.js.map