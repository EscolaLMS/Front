{"version":3,"sources":["components/Course/CourseDownloads/index.tsx","components/Course/CourseProgramLessons.tsx","components/Errorbox/index.tsx","pages/course/index.tsx","components/Breadcrumbs/index.tsx","components/Preloader/index.tsx","hooks/useLessonProgram.ts","components/Course/CourseSidebar/index.tsx","components/Course/Players/TextPlayer.tsx","components/Course/Players/ScormPlayer.tsx","components/Course/CourseProgramContent.tsx","../node_modules/@escolalms/sdk/lib/index.js"],"names":["StyledDownloads","styled","div","CourseDownloads","resources","subtitle","t","useTranslation","mappedResources","map","item","href","url","fileName","name","Downloads","title","downloads","StyledCourse","section","CourseProgramLessons","program","courseId","useLessonProgram","topic","lesson","onNextTopic","onPrevTopic","getNextPrevTopic","isNextTopicButtonDisabled","disableNextTopicButton","sendProgress","progress","courseProgressDetails","useContext","EscolaLMSContext","topicID","useParams","push","useHistory","startWithBreakPoint","useLocation","pathname","split","length","getCourseProgress","useMemo","byId","Number","value","find","courseProgress","course","id","onCompleteTopic","useCallback","topic_id","status","topicBreakPoint","currentProgress","lastStartedLesson","filter","API","CourseProgressItemElementStatus","IN_PROGRESS","sort","a","b","Date","started_at","getTime","INCOMPLETE","findLessonBreakPoint","lessons","topics","some","useEffect","window","scrollTo","top","behavior","columnWidth","summary","Fragment","className","Container","Breadcrumbs","items","to","Text","size","Title","level","lg","introduction","MarkdownRenderer","style","json","wrapperStyle","CourseProgramContent","lessonId","topicId","isThereAnotherTopic","Boolean","sm","md","CourseSidebar","CourseTopNav","onFinish","mobile","isMobile","onNext","isFinished","onPrev","addNotes","hasPrev","hasNext","StyledErrorPage","ErrorBox","error","history","Layout","mode","onClick","CourseProgramScorm","sco","scorm_sco","uuid","iframeRef","useRef","useState","height","setHeight","apiUrl","current","contentWindow","document","body","scrollHeight","ref","src","scrolling","CourseProgram","fetchProgram","fetchCourseProgress","loading","Preloader","scorm_sco_id","metaTitle","StyledBreadcrumbs","theme","gray5","gray2","StyledLoader","dm__background","background","useTheme","overflow","color","primaryColor","courseRouteName","lessonID","then","nextTopic","lesson_id","prevTopic","onNextTopicPreview","next","StyledSidebar","aside","css","agendaVisible","setAgendaVisible","topicIsFinished","allTopics","arrayOfTopics","concat","apply","finishedTopics","progressItem","onNextTopicClick","forEach","lIndex","tIndex","currentTopicId","finishedTopicIds","onMarkFinished","onTopicClick","fontSizes","TextPlayer","onLoad","fontSize","components","props","Link","underline","StyledDiv","fullview","ScormPlayer","fullView","setFullView","Button","topicable","StyledPdfPlayer","PdfPlayer","preview","customNoCompletedEventsIds","topicPing","h5pProgress","onXAPI","event","statement","verb","String","can_skip","ping","interval","setInterval","clearInterval","topicable_type","TopicType","H5P","H5Player","e","h5pObject","content","OEmbed","OEmbedPlayer","RichText","Video","AudioVideoPlayer","light","Image","ImagePlayer","Audio","audio","Pdf","pageConfig","renderMode","Scorm","__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","__importStar","mod","result","prototype","hasOwnProperty","call","exports","react","require"],"mappings":"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","file":"static/js/10.81442941.chunk.js","sourcesContent":["import React from \"react\";\nimport { Downloads } from \"@escolalms/components/lib/components/molecules/Downloads/Downloads\";\nimport styled from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { API } from \"@escolalms/sdk/lib\";\n\ntype Props = {\n  resources: API.TopicResource[];\n  subtitle: string;\n};\n\nconst StyledDownloads = styled.div`\n  margin-top: 100px;\n`;\n\nconst CourseDownloads: React.FC<Props> = ({ resources, subtitle }) => {\n  const { t } = useTranslation();\n  const mappedResources = resources.map((item) => {\n    return { href: item.url, fileName: item.name };\n  });\n  return (\n    <StyledDownloads>\n      <Downloads\n        subtitle={subtitle}\n        title={t<string>(\"CourseProgram.TopicAttachment\")}\n        downloads={mappedResources}\n      />\n    </StyledDownloads>\n  );\n};\n\nexport default CourseDownloads;\n","//@ts-nocheck - remove when Course Top Nav will have fixed notes props\nimport React, { useCallback, useEffect, useMemo, useContext } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport CourseProgramContent from \"@/components/Course/CourseProgramContent\";\nimport CourseSidebar from \"@/components/Course/CourseSidebar\";\nimport { useLessonProgram } from \"../../hooks/useLessonProgram\";\nimport { Title } from \"@escolalms/components/lib/components/atoms/Typography/Title\";\nimport { CourseTopNav } from \"@escolalms/components/lib/components/molecules/CourseTopNav/CourseTopNav\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport { Link, useHistory, useLocation, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { isMobile } from \"react-device-detect\";\nimport CourseDownloads from \"./CourseDownloads\";\nimport { useTranslation } from \"react-i18next\";\nimport Breadcrumbs from \"../Breadcrumbs\";\nimport { Col, Row } from \"react-grid-system\";\nimport Container from \"../Container\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\n\nconst StyledCourse = styled.section`\n  padding-bottom: 110px;\n  .main-title {\n    margin-bottom: 20px;\n  }\n  .course-nav {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: 100;\n  }\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n`;\n\nexport const courseIncomplete = 0;\nexport const courseComplete = 1;\nexport const courseInProgress = 2;\n\nexport const CourseProgramLessons: React.FC<{\n  program: API.CourseProgram;\n  courseId?: number;\n}> = ({ program, courseId }) => {\n  const {\n    topic,\n    lesson,\n    onNextTopic,\n    onPrevTopic,\n    getNextPrevTopic,\n    isNextTopicButtonDisabled,\n    disableNextTopicButton,\n    sendProgress,\n    progress,\n  } = useLessonProgram(program);\n  const { courseProgressDetails } = useContext(EscolaLMSContext);\n\n  const { topicID } = useParams<{ lessonID: string; topicID: string }>();\n  const { push } = useHistory();\n  const { t } = useTranslation();\n  const location = useLocation();\n  // if pathname contain 3 splited items we cannot fire topicbreakpoint effect otherwise we can\n  const startWithBreakPoint = location.pathname.split(\"/\").length === 3;\n\n  const getCourseProgress = useMemo(() => {\n    if (\n      //courseProgress. &&\n      courseProgressDetails.byId[Number(courseId)] &&\n      courseProgressDetails.byId[Number(courseId)].value\n    ) {\n      return courseProgressDetails.byId[Number(courseId)].value;\n    }\n    return (\n      progress &&\n      progress.value &&\n      progress.value.find(\n        (courseProgress: API.CourseProgressItem) =>\n          courseProgress.course.id === Number(courseId)\n      )?.progress\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [progress, courseId]);\n\n  const onCompleteTopic = useCallback((): void => {\n    if (program?.id) {\n      sendProgress(program?.id, [{ topic_id: Number(topicID), status: 1 }]);\n    }\n  }, [program, topicID, sendProgress]);\n\n  const topicBreakPoint = useMemo(() => {\n    const currentProgress = getCourseProgress || [];\n\n    const lastStartedLesson = currentProgress\n      .filter(\n        (topic: API.CourseProgressItemElement) =>\n          topic.status === API.CourseProgressItemElementStatus.IN_PROGRESS\n      )\n      .sort(\n        (a: API.CourseProgressItemElement, b: API.CourseProgressItemElement) =>\n          new Date(b.started_at as string).getTime() -\n          new Date(a.started_at as string).getTime()\n      )[0];\n\n    if (!lastStartedLesson) {\n      return currentProgress.filter(\n        (topic: API.CourseProgressItemElement) =>\n          topic.status === API.CourseProgressItemElementStatus.INCOMPLETE\n      )[0];\n    }\n    return lastStartedLesson;\n  }, [getCourseProgress]);\n\n  const findLessonBreakPoint = useMemo(() => {\n    return (\n      topicBreakPoint &&\n      program.lessons.find(\n        (lesson: API.Lesson) =>\n          lesson &&\n          lesson.topics &&\n          lesson.topics.some(\n            (topic: API.Topic) => topic.id === topicBreakPoint.topic_id\n          )\n      )\n    );\n  }, [program, topicBreakPoint]);\n\n  useEffect(() => {\n    if (startWithBreakPoint) {\n      if (findLessonBreakPoint && topicBreakPoint) {\n        push(\n          `/course/${program.id}/${findLessonBreakPoint.id}/${topicBreakPoint.topic_id}`,\n          null\n        );\n      }\n    }\n  }, [\n    startWithBreakPoint,\n    findLessonBreakPoint,\n    program,\n    push,\n    topicBreakPoint,\n  ]);\n\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [lesson?.id, topic?.id]);\n\n  useEffect(() => {\n    if (getNextPrevTopic(Number(topic?.id)) === null) {\n      disableNextTopicButton(true);\n      sendProgress(program.id, [{ topic_id: Number(topic?.id), status: 1 }]);\n      return;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [topic?.id, program]);\n\n  const columnWidth =\n    lesson && lesson.summary && topic && topic.summary ? 6 : 12;\n  return (\n    <React.Fragment>\n      <StyledCourse className=\"course-program-wrapper\">\n        <Container>\n          <Breadcrumbs\n            items={[\n              <Link to=\"/\">{t(\"Home\")}</Link>,\n              <Link to=\"/courses\">{t(\"Courses\")}</Link>,\n              <Text size=\"12\">{program.title}</Text>,\n              <Text size=\"12\">{topic.title}</Text>,\n            ]}\n          />\n          <Title className=\"main-title\" level={3}>\n            {topic.title}\n          </Title>\n          <Row>\n            <Col lg={9}>\n              <div className=\"course-program-player\">\n                <div className=\"course-program-player-content\">\n                  {topic && topic.introduction && (\n                    <MarkdownRenderer>{topic.introduction}</MarkdownRenderer>\n                  )}\n                  <div\n                    className=\"course-program-player-content__wrapper\"\n                    style={{\n                      ...((topic?.json?.wrapperStyle as object) || {}),\n                    }}\n                  >\n                    <CourseProgramContent\n                      key={topic.id}\n                      lessonId={Number(lesson?.id)}\n                      topicId={topic && Number(topic.id)}\n                      disableNextTopicButton={disableNextTopicButton}\n                      isThereAnotherTopic={Boolean(\n                        getNextPrevTopic(Number(topic?.id))\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"course-program-content__container\">\n                  <Row>\n                    {lesson && lesson.summary && (\n                      <Col sm={12} md={columnWidth} lg={columnWidth}>\n                        <div className=\"course-program-summary\">\n                          <MarkdownRenderer>{lesson.summary}</MarkdownRenderer>\n                        </div>\n                      </Col>\n                    )}\n                    {topic && topic.summary && (\n                      <Col sm={12} md={columnWidth} lg={columnWidth}>\n                        <div className=\"course-program-summary\">\n                          <MarkdownRenderer>{topic.summary}</MarkdownRenderer>\n\n                          {topic &&\n                            topic.resources &&\n                            topic.resources?.length > 0 && (\n                              <CourseDownloads\n                                resources={topic.resources || []}\n                                subtitle={topic.introduction || \"\"}\n                              />\n                            )}\n                        </div>\n                      </Col>\n                    )}\n                  </Row>\n                </div>\n              </div>\n            </Col>\n            <Col lg={3}>\n              <CourseSidebar\n                course={program}\n                lessonId={Number(lesson?.id)}\n                topicId={Number(topic?.id)}\n              />\n            </Col>\n          </Row>\n        </Container>\n        <div className=\"course-nav\">\n          <Container>\n            <CourseTopNav\n              onFinish={() => onCompleteTopic()}\n              mobile={isMobile}\n              onNext={onNextTopic}\n              isFinished={false}\n              onPrev={onPrevTopic}\n              addNotes={false}\n              hasPrev={\n                getNextPrevTopic(Number(topic?.id), false) ? true : false\n              }\n              hasNext={!isNextTopicButtonDisabled}\n            />\n          </Container>\n        </div>\n      </StyledCourse>\n    </React.Fragment>\n  );\n};\n\nexport default CourseProgramLessons;\n","import Layout from \"@/components/_App/Layout\";\nimport { Button, Text } from \"@escolalms/components\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nconst StyledErrorPage = styled.div`\n  min-height: calc(100vh - 150px);\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst ErrorBox: React.FC<{ error: string }> = ({ error }) => {\n  const { t } = useTranslation();\n  const history = useHistory();\n  return (\n    <Layout>\n      <StyledErrorPage>\n        <Text size=\"16\">\n          <strong>{t(\"CoursePage.ErrorOccurred\")}</strong>\n        </Text>\n        <Text size=\"14\">{error}</Text>\n        <hr />\n        <Button mode=\"secondary\" onClick={() => history.push(\"/courses\")}>\n          {t(\"CoursePage.SeeOtherCourses\")}\n        </Button>\n      </StyledErrorPage>\n    </Layout>\n  );\n};\nexport default ErrorBox;\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport Preloader from \"@/components/Preloader\";\nimport Layout from \"@/components/_App/Layout\";\n\nimport CourseProgramLessons from \"@/components/Course/CourseProgramLessons\";\nimport ErrorBox from \"@/components/Errorbox\";\nimport { t } from \"i18next\";\n\n// TODO: 99% same as: src/pages/courses/preview/index.tsx\n\nconst CourseProgramScorm: React.FC<{ program: API.CourseProgram }> = ({\n  program,\n}) => {\n  const sco = program?.scorm_sco;\n  const uuid = sco?.uuid;\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const [height, setHeight] = useState(0);\n  const headerAndFooterHeight = 610;\n  const { apiUrl } = useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (iframeRef.current) {\n      setHeight(\n        iframeRef.current?.contentWindow?.document?.body?.scrollHeight || 0\n      );\n    }\n  }, [iframeRef]);\n\n  if (!sco && !uuid) {\n    return <React.Fragment />;\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"container-fluid course-program\">\n        <div\n          className=\"course-program-player scorm\"\n          style={{\n            height: `${headerAndFooterHeight + height}px`,\n          }}\n        >\n          <iframe\n            title={\"scorm-player\"}\n            ref={iframeRef}\n            src={`${apiUrl}/api/scorm/play/${uuid}`}\n            scrolling=\"no\"\n          />\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nconst CourseProgram = () => {\n  const { id } = useParams<{ id: string }>();\n  const { program, fetchProgram, fetchCourseProgress } =\n    useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (id) {\n      fetchProgram(Number(id));\n      fetchCourseProgress(Number(id));\n      //fetchCourseProgress(Number(id));\n      //fetchProgress();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  if (program.loading) {\n    return <Preloader />;\n  }\n\n  if (program.error) {\n    return <ErrorBox error={t(\"CourseProgram.NoProgram\")} />;\n  }\n\n  if (program.value && program?.value?.scorm_sco_id) {\n    return (\n      <Layout metaTitle={program.value.title}>\n        <CourseProgramScorm program={program.value} />\n      </Layout>\n    );\n  }\n  if (program.value && program.value.lessons && program.value.lessons.length) {\n    return (\n      <Layout metaTitle={program.value.title}>\n        <CourseProgramLessons program={program.value} courseId={Number(id)} />\n      </Layout>\n    );\n  }\n\n  return <Preloader />;\n};\n\nexport default CourseProgram;\n","import React from \"react\";\nimport { BreadCrumbs } from \"@escolalms/components/lib/components/atoms/BreadCrumbs/BreadCrumbs\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  items: React.ReactNode[];\n};\n\nconst StyledBreadcrumbs = styled.div`\n  margin-bottom: 15px;\n  a {\n    text-decoration: none;\n    color: ${({ theme }) =>\n      theme.mode === \"dark\" ? theme.gray5 : theme.gray2}!important;\n  }\n`;\n\nconst Breadcrumbs: React.FC<Props> = ({ items }) => {\n  return (\n    <StyledBreadcrumbs>\n      <BreadCrumbs items={items} />\n    </StyledBreadcrumbs>\n  );\n};\n\nexport default Breadcrumbs;\n","import { useEffect } from \"react\";\nimport { Spin } from \"@escolalms/components/lib/components/atoms/Spin/Spin\";\nimport styled, { useTheme } from \"styled-components\";\n\nconst StyledLoader = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${({ theme }) =>\n    theme.mode === \"dark\" ? theme.dm__background : theme.background};\n`;\n\nconst Preloader = () => {\n  const theme = useTheme();\n  useEffect(() => {\n    document.body.style.overflow = \"hidden\";\n\n    return () => {\n      document.body.style.overflow = \"inherit\";\n    };\n  }, []);\n\n  return (\n    <StyledLoader>\n      <Spin color={theme.primaryColor} />\n    </StyledLoader>\n  );\n};\n\nexport default Preloader;\n","import { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useCallback, useContext, useMemo, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nexport function useLessonProgram(\n  program: API.CourseProgram,\n  courseRouteName: string = \"/course/\"\n) {\n  const { sendProgress, getNextPrevTopic, progress } =\n    useContext(EscolaLMSContext);\n  const [isNextTopicButtonDisabled, disableNextTopicButton] = useState(false);\n  const { lessonID, topicID } =\n    useParams<{ lessonID: string; topicID: string }>();\n  const { push } = useHistory();\n\n  const lessonId = lessonID ? lessonID : program.lessons[0].id;\n  const topicId = topicID\n    ? topicID\n    : (program &&\n        program.lessons &&\n        program.lessons[0] &&\n        program.lessons[0].topics &&\n        program?.lessons[0]?.topics[0]?.id) ||\n      0;\n\n  const lesson: API.Lesson | undefined = useMemo(\n    () => program.lessons.find((lesson) => lesson.id === Number(lessonId)),\n    [program, lessonId]\n  );\n\n  const topic: API.Topic | undefined = useMemo(\n    () =>\n      lesson &&\n      lesson.topics &&\n      lesson.topics.find((topic) => topic.id === Number(topicId)),\n    [lesson, topicId]\n  );\n\n  const onNextTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const nextTopic = getNextPrevTopic(Number(topicId));\n\n          nextTopic &&\n            push(\n              `${courseRouteName}${program.id}/${nextTopic.lesson_id}/${nextTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n  const onPrevTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const prevTopic = getNextPrevTopic(Number(topicId), false);\n\n          prevTopic &&\n            push(\n              `${courseRouteName}${program.id}/${prevTopic.lesson_id}/${prevTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n\n  const onNextTopicPreview = useCallback(\n    (next = true) => {\n      const nextTopic = getNextPrevTopic(Number(topicId), next);\n\n      nextTopic &&\n        push(\n          `${courseRouteName}${program.id}/${nextTopic?.lesson_id}/${nextTopic?.id}`\n        );\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [lessonId, topicId, program, program.id, push, courseRouteName]\n  );\n\n  return {\n    topic,\n    lesson,\n    onNextTopic,\n    onPrevTopic,\n    getNextPrevTopic,\n    isNextTopicButtonDisabled,\n    disableNextTopicButton,\n    onNextTopicPreview,\n    sendProgress,\n    progress,\n  } as const;\n}\n","import React, { useCallback, useContext, useState, useMemo } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { CourseAgenda } from \"@escolalms/components/lib/components/organisms/CourseAgenda/CourseAgenda\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useHistory } from \"react-router-dom\";\nimport { isMobile } from \"react-device-detect\";\nimport styled, { css } from \"styled-components\";\nimport { useLessonProgram } from \"../../../hooks/useLessonProgram\";\nimport { Button } from \"@escolalms/components\";\nimport { t } from \"i18next\";\nimport { Topic } from \"@escolalms/sdk/lib/types/api\";\n\nconst StyledSidebar = styled.aside`\n  padding-bottom: 100px;\n  .show-agenda-btn {\n    width: 100%;\n  }\n  .agenda-wrapper {\n    ${isMobile &&\n    css`\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      transform: translate(100%, 0);\n      transition: transform 0.25s;\n      overflow: scroll;\n      padding: 40px 0 55px;\n      z-index: 10;\n      background-color: ${({ theme }) =>\n        theme.mode === \"dark\" ? theme.dm__background : theme.background};\n\n      &--visible {\n        transform: translate(0, 0);\n      }\n\n      .hide-agenda-btn {\n        display: block;\n        margin: 0 15px 0 auto;\n      }\n    `}\n  }\n`;\n\nexport const CourseSidebar: React.FC<{\n  course: API.CourseProgram;\n  lessonId: number;\n  topicId: number;\n}> = ({ course, lessonId, topicId }) => {\n  const { disableNextTopicButton, sendProgress, progress } =\n    useLessonProgram(course);\n  const { courseProgressDetails } = useContext(EscolaLMSContext);\n\n  const history = useHistory();\n  const [agendaVisible, setAgendaVisible] = useState(false);\n  const program = (course?.lessons || []).filter(\n    (lesson) => lesson && lesson.topics && lesson?.topics?.length > 0\n  ) as API.Lesson[];\n  const { topicIsFinished } = useContext(EscolaLMSContext);\n  const allTopics = course.lessons.map((item) => item.topics);\n  //@ts-ignore\n  const arrayOfTopics = [].concat.apply([], allTopics);\n\n  const onCompleteTopic = useCallback((): void => {\n    disableNextTopicButton && disableNextTopicButton(false);\n    if (course?.id) {\n      sendProgress(course?.id, [{ topic_id: Number(topicId), status: 1 }]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [program, topicId, disableNextTopicButton, sendProgress]);\n\n  const getCourseProgress = useMemo(() => {\n    const courseId = course.id;\n    if (\n      courseProgressDetails &&\n      courseProgressDetails.byId &&\n      courseProgressDetails.byId[Number(courseId)] &&\n      courseProgressDetails.byId[Number(courseId)].value\n    ) {\n      return courseProgressDetails.byId[Number(courseId)].value;\n    }\n    return (\n      progress &&\n      progress.value &&\n      progress.value.find(\n        (courseProgress: API.CourseProgressItem) =>\n          courseProgress.course.id === Number(courseId)\n      )?.progress\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [progress, course]);\n\n  const finishedTopics = arrayOfTopics\n    .filter((item: API.Topic) => {\n      return (\n        topicIsFinished(item.id) ||\n        getCourseProgress?.some(\n          (progressItem) =>\n            progressItem.topic_id === item.id && progressItem.status === 1\n        )\n      );\n    })\n    .map((item: API.Topic) => item.id);\n\n  if (!course && !program) {\n    return <React.Fragment />;\n  }\n  return (\n    <StyledSidebar>\n      {isMobile && (\n        <Button\n          mode=\"outline\"\n          className=\"show-agenda-btn\"\n          onClick={() => setAgendaVisible(true)}\n        >\n          {t(\"CourseProgram.ShowAgenda\")}\n        </Button>\n      )}\n      <div\n        className={`${\n          agendaVisible\n            ? \"agenda-wrapper agenda-wrapper--visible\"\n            : \"agenda-wrapper\"\n        }`}\n      >\n        {isMobile && (\n          <Button\n            className=\"hide-agenda-btn\"\n            mode=\"secondary\"\n            onClick={() => setAgendaVisible(false)}\n          >\n            &#10005;\n          </Button>\n        )}\n        <CourseAgenda\n          onNextTopicClick={() => {\n            let nextTopic;\n\n            course.lessons.forEach((lesson, lIndex, lessons) => {\n              lesson.topics &&\n                lesson.topics.forEach((topic, tIndex) => {\n                  if (topic.id === topicId) {\n                    // try find next topic in current lesson\n                    if (lesson.topics && lesson.topics[tIndex + 1]) {\n                      nextTopic =\n                        lesson.topics[tIndex + 1] && lesson.topics[tIndex + 1];\n                      // try find first topic in next lesson\n                    } else if (lessons[lIndex + 1]) {\n                      nextTopic =\n                        lessons[lIndex + 1].topics &&\n                        //@ts-ignore\n                        lessons[lIndex + 1].topics[0];\n                      // otherwise this is end so going back to first lesson and topic\n                    } else {\n                      nextTopic = lessons[0].topics && lessons[0].topics[0];\n                    }\n                  }\n                });\n            });\n\n            if (nextTopic) {\n              history.push(\n                `/course/${course.id}/${(nextTopic as Topic).lesson_id}/${\n                  (nextTopic as Topic).id\n                }`\n              );\n              setAgendaVisible(false);\n            }\n          }}\n          mobile={isMobile}\n          lessons={course.lessons}\n          currentTopicId={topicId}\n          finishedTopicIds={finishedTopics}\n          onMarkFinished={() => onCompleteTopic()}\n          onTopicClick={(topic) => {\n            history.push(`/course/${course.id}/${topic.lesson_id}/${topic.id}`);\n            setAgendaVisible(false);\n          }}\n        />\n      </div>\n    </StyledSidebar>\n  );\n};\n\nexport default CourseSidebar;\n","import { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport React, { ReactElement, FunctionComponent, useEffect } from \"react\";\nimport { Link } from \"@escolalms/components/lib/components/atoms/Link/Link\";\n\nconst fontSizes = [\"small\", \"regular\", \"bigger\", \"big\"];\n\nconst TextPlayer: FunctionComponent<{\n  value?: string;\n  onLoad?: () => void;\n  fontSize: number;\n}> = ({ value, onLoad, fontSize }): ReactElement => {\n  useEffect(() => {\n    value && onLoad && onLoad();\n  }, [value, onLoad]);\n\n  return (\n    <div\n      className={`center-image-richtext typebase size-${fontSizes[fontSize]}`}\n    >\n      {value && (\n        <MarkdownRenderer\n          components={{\n            a: (props) => <Link {...props} underline />,\n          }}\n        >\n          {value}\n        </MarkdownRenderer>\n      )}\n    </div>\n  );\n};\n\nexport default TextPlayer;\n","import React, {\n  ReactElement,\n  FunctionComponent,\n  useContext,\n  useState,\n} from \"react\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport styled, { css } from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { ResizeIcon } from \"../../../icons\";\n\nconst StyledDiv = styled.div<{ fullview: boolean }>`\n  > button {\n    position: fixed;\n    right: 5px;\n    bottom: 5px;\n    z-index: 9999;\n    svg path {\n      fill: white;\n    }\n  }\n  iframe {\n    border: none;\n    display: block;\n    width: 100%;\n  }\n  ${(props) => {\n    if (props.fullview) {\n      return css`\n        iframe {\n          position: fixed;\n          top: 90px;\n          left: 0;\n          height: calc(100% - 90px - 80px);\n\n          z-index: 9999;\n        }\n      `;\n    } else {\n      return css`\n        display: flex;\n\n        min-height: 80vh;\n        max-height: 80vh;\n        height: 100vh;\n        iframe {\n          height: 100%;\n        }\n      `;\n    }\n  }}\n`;\n\nconst ScormPlayer: FunctionComponent<{\n  value: API.TopicScorm;\n}> = ({ value }): ReactElement => {\n  const { apiUrl } = useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n  const [fullView, setFullView] = useState(false);\n\n  return (\n    <div className=\"scorm-wrapper\">\n      <StyledDiv fullview={fullView}>\n        <Button onClick={() => setFullView(!fullView)}>\n          {\" \"}\n          {t(\"Scorm.Resize\")} <ResizeIcon />\n        </Button>\n        <iframe\n          title={value.title}\n          src={`${apiUrl}/api/scorm/play/${value.topicable?.uuid}`}\n        />\n      </StyledDiv>\n    </div>\n  );\n};\n\nexport default ScormPlayer;\n","import React, { useContext, useEffect, useMemo, useCallback } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { TopicType } from \"@escolalms/sdk/lib/services/courses\";\nimport { XAPIEvent } from \"@escolalms/h5p-react\";\nimport TextPlayer from \"./Players/TextPlayer\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { ImagePlayer } from \"@escolalms/components/lib/components/players/ImagePlayer/ImagePlayer\";\nimport { AudioVideoPlayer } from \"@escolalms/components/lib/components/players/AudioVideoPlayer/AudioVideoPlayer\";\nimport { OEmbedPlayer } from \"@escolalms/components/lib/components/players/OEmbedPlayer/OEmbedPlayer\";\nimport { H5Player } from \"@escolalms/components/lib/components/players/H5Player/H5Player\";\nimport { PdfPlayer } from \"@escolalms/components/lib/components/players/PdfPlayer/PdfPlayer\";\nimport { isMobile } from \"react-device-detect\";\nimport ScormPlayer from \"./Players/ScormPlayer\";\nimport styled from \"styled-components\";\n\nconst StyledPdfPlayer = styled(PdfPlayer)`\n  .course-pdf-player {\n    .react-pdf__Page__svg,\n    svg {\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n`;\n\nexport const CourseProgramContent: React.FC<{\n  lessonId: number;\n  isThereAnotherTopic?: boolean;\n  topicId?: number;\n  preview?: boolean;\n  customNoCompletedEventsIds?: string[];\n  disableNextTopicButton?: (b: boolean) => void;\n}> = ({\n  lessonId,\n  topicId,\n  preview = false,\n  disableNextTopicButton,\n  customNoCompletedEventsIds = [\n    \"http://h5p.org/libraries/H5P.GuessTheAnswer-1.5\",\n  ],\n  isThereAnotherTopic = true,\n}) => {\n  const {\n    program,\n    topicPing,\n    topicIsFinished,\n    fontSize,\n    sendProgress,\n    h5pProgress,\n  } = useContext(EscolaLMSContext);\n\n  const topic = useMemo(() => {\n    return program.value?.lessons\n      ?.find((lesson: API.Lesson) => lesson.id === lessonId)\n      ?.topics?.find((topic: API.Topic) => topic.id === topicId);\n  }, [program, lessonId, topicId]);\n\n  const onCompleteTopic = useCallback((): void => {\n    if (program?.value?.id) {\n      sendProgress(program?.value?.id, [\n        { topic_id: Number(topicId), status: 1 },\n      ]);\n    }\n  }, [program, topicId, sendProgress]);\n\n  const onXAPI = useCallback(\n    (event: XAPIEvent): void => {\n      isThereAnotherTopic &&\n        disableNextTopicButton &&\n        disableNextTopicButton(!Boolean(event?.statement?.verb?.id));\n\n      if (event?.statement) {\n        h5pProgress(\n          String(program?.value?.id),\n          Number(topicId),\n          event?.statement as API.IStatement\n        );\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      program,\n      topicId,\n      h5pProgress,\n      disableNextTopicButton,\n      customNoCompletedEventsIds,\n    ]\n  );\n\n  useEffect(() => {\n    isThereAnotherTopic &&\n      disableNextTopicButton &&\n      disableNextTopicButton(!Boolean(topic?.can_skip));\n  }, [disableNextTopicButton, topic, isThereAnotherTopic]);\n\n  useEffect(() => {\n    if (!preview) {\n      const ping = () =>\n        topicId && !topicIsFinished(topicId) && topicPing(topicId);\n      const interval = setInterval(() => {\n        ping();\n      }, 5000);\n      ping();\n      return () => clearInterval(interval);\n    }\n  }, [topicPing, preview, topicId, topicIsFinished]);\n\n  if (!topic) {\n    return <React.Fragment />;\n  }\n\n  if (!topic.topicable?.value) {\n    return (\n      <pre className=\"error\">Error: topic.topicable?.value is missing</pre>\n    );\n  }\n  if (topic.topicable_type) {\n    // TODO: specific interface for advanced topic players -> example: ImagePlayer\n    switch (topic.topicable_type) {\n      case TopicType.H5P:\n        return (\n          <H5Player\n            onXAPI={(e: XAPIEvent) => onXAPI(e)}\n            //@ts-ignore\n            h5pObject={topic.topicable.content as API.H5PObject}\n          />\n        );\n      case TopicType.OEmbed:\n        return (\n          <>\n            <OEmbedPlayer url={topic.topicable.value} key={topicId} />\n          </>\n        );\n      case TopicType.RichText:\n        return <TextPlayer value={topic.topicable.value} fontSize={fontSize} />;\n      case TopicType.Video:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            url={topic.topicable.url}\n            light\n            onFinish={(): void => onCompleteTopic()}\n          />\n        );\n      case TopicType.Image:\n        return <ImagePlayer topic={topic} onLoad={() => onCompleteTopic()} />;\n\n      case TopicType.Audio:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            audio\n            url={topic.topicable.value}\n            light\n            onFinish={(): void => onCompleteTopic()}\n          />\n        );\n\n      case TopicType.Pdf:\n        return (\n          <StyledPdfPlayer\n            url={topic.topicable.url}\n            pageConfig={{\n              renderMode: \"svg\",\n              className: \"course-pdf-player\",\n            }}\n          />\n        );\n\n      case TopicType.Scorm:\n        return <ScormPlayer value={topic} />;\n      default:\n        return <pre>{topic.topicable_type}</pre>;\n    }\n  }\n\n  return <pre>loading... (or error)</pre>;\n};\n\nexport default CourseProgramContent;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.react = exports.API = void 0;\nvar API = __importStar(require(\"./types/api\"));\nexports.API = API;\nvar react = __importStar(require(\"./react\"));\nexports.react = react;\n"],"sourceRoot":""}