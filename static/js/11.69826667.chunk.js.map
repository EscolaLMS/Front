{"version":3,"sources":["components/Course/CourseDownloads/index.tsx","components/Errorbox/index.tsx","components/Course/CourseProgramLessons.tsx","pages/course/index.tsx","components/Breadcrumbs/index.tsx","components/Preloader/index.tsx","hooks/useLessonProgram.ts","components/Course/Players/ScormPlayer.tsx","components/Course/CourseSidebar/index.tsx","components/Course/Players/TextPlayer.tsx","components/Course/CourseProgramContent.tsx"],"names":["StyledDownloads","styled","div","_templateObject","_taggedTemplateLiteral","CourseDownloads","_ref","resources","subtitle","t","useTranslation","mappedResources","map","item","href","url","fileName","name","_jsx","children","Downloads","title","downloads","StyledErrorPage","ErrorBox","error","_ref$goTo","goTo","goToText","alternativeButton","history","useHistory","buttonText","Layout","_jsxs","Text","size","className","Button","mode","onClick","push","StyledCourse","section","CourseProgramLessons","_bookmarkNotes$list2","_bookmarkNotes$list4","_topic$json","_topic$resources","program","courseId","_useLessonProgram","useLessonProgram","topic","lesson","onNextTopic","onPrevTopic","getNextPrevTopic","isNextTopicButtonDisabled","disableNextTopicButton","sendProgress","progress","_useContext","useContext","EscolaLMSContext","courseProgressDetails","bookmarkNotes","fetchBookmarkNotes","createBookmarkNote","deleteBookmarkNote","_useState","useState","_useState2","_slicedToArray","showFinishModal","setShowFinishModal","topicID","useParams","startWithBreakPoint","useLocation","pathname","split","length","getCourseProgress","useMemo","_courseProgressDetail","_progress$value$find","byId","Number","value","find","courseProgress","course","id","onCompleteTopic","useCallback","topic_id","status","topicBreakPoint","currentProgress","lastStartedLesson","filter","API","CourseProgressItemElementStatus","IN_PROGRESS","sort","a","b","Date","started_at","getTime","INCOMPLETE","findLessonBreakPoint","lessons","topics","some","topicBookmark","_bookmarkNotes$list","list","data","bookmarkable_id","topicNote","_bookmarkNotes$list3","useEffect","concat","window","scrollTo","top","behavior","columnWidth","summary","resetProgress","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","flatMap","stop","finishedTopicIndex","findIndex","ttopic","COMPLETE","React","Fragment","Container","Breadcrumbs","items","Link","to","Title","level","Row","Col","lg","introduction","MarkdownRenderer","style","_objectSpread","json","wrapperStyle","CourseProgramContent","lessonId","topicId","isThereAnotherTopic","Boolean","sm","md","CourseSidebar","onCourseFinish","CourseTopNav","onFinish","mobile","isMobile","onNext","isFinished","onPrev","addNotes","newNoteData","type","currentNote","undefined","addBookmarks","bookmarkBtnText","onBookmarkClick","then","toast","success","bookmarkable_type","hasPrev","hasNext","CourseProgramScorm","sco","scorm_sco","uuid","ScormPlayer","CourseProgram","_program$value","fetchProgram","loading","Preloader","scorm_sco_id","metaTitle","StyledBreadcrumbs","theme","gray5","gray2","_ref2","BreadCrumbs","StyledLoader","dm__background","background","useTheme","document","body","overflow","Spin","color","primaryColor","_program$lessons$","_program$lessons$$top","courseRouteName","arguments","_useParams","lessonID","nextTopic","lesson_id","prevTopic","onNextTopicPreview","StyledDiv","props","fullview","css","_templateObject2","_templateObject3","apiUrl","fullView","setFullView","ResizeIcon","src","StyledSidebar","aside","agendaVisible","setAgendaVisible","_lesson$topics","topicIsFinished","allTopics","arrayOfTopics","apply","finishedTopics","progressItem","CourseAgenda","onNextTopicClick","forEach","lIndex","tIndex","currentTopicId","finishedTopicIds","onMarkFinished","onTopicClick","onCourseFinished","TextPlayerStyles","TextPlayer","onLoad","StyledPdfPlayer","PdfPlayer","_topic$topicable","_program$value$id","_program$value5","_ref$preview","preview","_ref$customNoComplete","customNoCompletedEventsIds","_ref$isThereAnotherTo","topicPing","h5pProgress","_program$value$lesson","_program$value$lesson2","_program$value$lesson3","_program$value2","_program$value3","onXAPI","event","_event$statement","_event$statement$verb","_program$value4","statement","verb","String","isTopicFinished","can_skip","ping","interval","setInterval","clearInterval","topicable","topicable_type","TopicType","H5P","H5Player","e","h5pObject","content","OEmbed","_Fragment","OEmbedPlayer","RichText","Video","AudioVideoPlayer","light","Image","ImagePlayer","Audio","audio","Pdf","pageConfig","renderMode","Scorm","GiftQuiz","GiftQuizPlayer","Project","ProjectPlayer","course_id","onSuccess"],"mappings":"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","file":"static/js/11.69826667.chunk.js","sourcesContent":["import React from \"react\";\nimport { Downloads } from \"@escolalms/components/lib/components/molecules/Downloads/Downloads\";\nimport styled from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { API } from \"@escolalms/sdk/lib\";\n\ntype Props = {\n  resources: API.TopicResource[];\n  subtitle: string;\n};\n\nconst StyledDownloads = styled.div`\n  margin-top: 100px;\n`;\n\nconst CourseDownloads: React.FC<Props> = ({ resources, subtitle }) => {\n  const { t } = useTranslation();\n  const mappedResources = resources.map((item) => {\n    return { href: item.url, fileName: item.name };\n  });\n  return (\n    <StyledDownloads>\n      <Downloads\n        subtitle={subtitle}\n        title={t<string>(\"CourseProgram.TopicAttachment\")}\n        downloads={mappedResources}\n      />\n    </StyledDownloads>\n  );\n};\n\nexport default CourseDownloads;\n","import Layout from \"@/components/_App/Layout\";\nimport { Button, Text } from \"@escolalms/components\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nconst StyledErrorPage = styled.div`\n  min-height: calc(100vh - 150px);\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n\n  .buttons-block {\n    display: grid;\n    gap: 8px;\n  }\n`;\n\ninterface AlternativeButton {\n  goTo: string;\n  goToText: string;\n}\n\ninterface Props {\n  error: string;\n  goTo?: string;\n  goToText?: string;\n  alternativeButton?: AlternativeButton;\n}\n\nconst ErrorBox: React.FC<Props> = ({\n  error,\n  goTo = \"/courses\",\n  goToText,\n  alternativeButton,\n}) => {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const buttonText = goToText ?? t(\"CoursePage.SeeOtherCourses\");\n\n  return (\n    <Layout>\n      <StyledErrorPage>\n        <Text size=\"16\">\n          <strong>{t(\"CoursePage.ErrorOccurred\")}</strong>\n        </Text>\n        <Text size=\"14\">{error}</Text>\n        <hr />\n        <div className=\"buttons-block\">\n          <Button mode=\"secondary\" onClick={() => history.push(goTo)}>\n            {buttonText}\n          </Button>\n          {alternativeButton && (\n            <Button\n              mode=\"outline\"\n              onClick={() => history.push(alternativeButton.goTo)}\n            >\n              {alternativeButton.goToText}\n            </Button>\n          )}\n        </div>\n      </StyledErrorPage>\n    </Layout>\n  );\n};\nexport default ErrorBox;\n","/* eslint-disable @typescript-eslint/no-unused-expressions */\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useContext,\n  useState,\n} from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport CourseProgramContent from \"@/components/Course/CourseProgramContent\";\nimport CourseSidebar from \"@/components/Course/CourseSidebar\";\nimport { useLessonProgram } from \"../../hooks/useLessonProgram\";\nimport { Title } from \"@escolalms/components/lib/components/atoms/Typography/Title\";\nimport {\n  CourseTopNav,\n  NoteData,\n} from \"@escolalms/components/lib/components/molecules/CourseTopNav/CourseTopNav\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport { Link, useHistory, useLocation, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { isMobile } from \"react-device-detect\";\nimport CourseDownloads from \"./CourseDownloads\";\nimport { useTranslation } from \"react-i18next\";\nimport Breadcrumbs from \"../Breadcrumbs\";\nimport { Col, Row } from \"react-grid-system\";\nimport Container from \"../Container\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport ErrorBox from \"../Errorbox\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { toast } from \"react-toastify\";\n\nconst StyledCourse = styled.section`\n  padding-bottom: 110px;\n  .main-title {\n    margin-bottom: 20px;\n  }\n  .course-nav {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: 100;\n  }\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n\n  .course-program-finish-modal {\n    font-family: \"Mulish\", sans-serif;\n    background: #f8f8f8;\n    inset: 0;\n    border: 1px solid #157493;\n    padding: 16px;\n    display: grid;\n    place-content: center;\n    gap: 16px;\n    height: 100%;\n    max-height: 500px;\n\n    p {\n      text-align: center;\n      margin: 0;\n    }\n\n    &__title {\n      font-size: 24px;\n      font-weight: 500;\n    }\n\n    &__paragraph {\n      font-size: 18px;\n    }\n\n    &__buttons {\n      display: grid;\n      grid-auto-flow: column;\n      gap: 8px;\n      justify-content: center;\n      margin-top: 8px;\n    }\n  }\n`;\n\nexport const courseIncomplete = 0;\nexport const courseComplete = 1;\nexport const courseInProgress = 2;\n\nexport const CourseProgramLessons: React.FC<{\n  program: API.CourseProgram;\n  courseId?: number;\n}> = ({ program, courseId }) => {\n  const {\n    topic,\n    lesson,\n    onNextTopic,\n    onPrevTopic,\n    getNextPrevTopic,\n    isNextTopicButtonDisabled,\n    disableNextTopicButton,\n    sendProgress,\n    progress,\n  } = useLessonProgram(program);\n  const {\n    courseProgressDetails,\n    bookmarkNotes,\n    fetchBookmarkNotes,\n    createBookmarkNote,\n    deleteBookmarkNote,\n  } = useContext(EscolaLMSContext);\n  const [showFinishModal, setShowFinishModal] = useState<boolean>(false);\n\n  const { topicID } = useParams<{ lessonID: string; topicID: string }>();\n\n  const { push } = useHistory();\n  const { t } = useTranslation();\n  const location = useLocation();\n  // if pathname contain 3 splited items we cannot fire topicbreakpoint effect otherwise we can\n  const startWithBreakPoint = location.pathname.split(\"/\").length === 3;\n\n  const getCourseProgress = useMemo(() => {\n    if (\n      courseProgressDetails.byId?.[Number(courseId)] &&\n      courseProgressDetails.byId[Number(courseId)].value\n    ) {\n      return courseProgressDetails.byId[Number(courseId)].value;\n    }\n    return (\n      progress &&\n      progress.value &&\n      progress.value.find(\n        (courseProgress: API.CourseProgressItem) =>\n          courseProgress.course.id === Number(courseId)\n      )?.progress\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [progress, courseId]);\n\n  const onCompleteTopic = useCallback((): void => {\n    if (program?.id) {\n      sendProgress(program?.id, [{ topic_id: Number(topicID), status: 1 }]);\n    }\n  }, [program, topicID, sendProgress]);\n\n  const topicBreakPoint = useMemo(() => {\n    const currentProgress = getCourseProgress || [];\n\n    const lastStartedLesson = currentProgress\n      .filter(\n        (topic: API.CourseProgressItemElement) =>\n          topic.status === API.CourseProgressItemElementStatus.IN_PROGRESS\n      )\n      .sort(\n        (a: API.CourseProgressItemElement, b: API.CourseProgressItemElement) =>\n          new Date(b.started_at as string).getTime() -\n          new Date(a.started_at as string).getTime()\n      )[0];\n\n    if (!lastStartedLesson) {\n      return currentProgress.filter(\n        (topic: API.CourseProgressItemElement) =>\n          topic.status === API.CourseProgressItemElementStatus.INCOMPLETE\n      )[0];\n    }\n    return lastStartedLesson;\n  }, [getCourseProgress]);\n\n  const findLessonBreakPoint = useMemo(() => {\n    return (\n      topicBreakPoint &&\n      program.lessons.find(\n        (lesson: API.Lesson) =>\n          lesson &&\n          lesson.topics &&\n          lesson.topics.some(\n            (topic: API.Topic) => topic.id === topicBreakPoint.topic_id\n          )\n      )\n    );\n  }, [program, topicBreakPoint]);\n\n  const topicBookmark = useMemo(\n    () =>\n      bookmarkNotes.list?.data.filter(\n        (item) =>\n          item.bookmarkable_id === Number(topic?.id) && item.value === null\n      ),\n    [bookmarkNotes.list?.data, topic?.id]\n  );\n\n  const topicNote = useMemo(\n    () =>\n      bookmarkNotes.list?.data.filter(\n        (item) =>\n          item.bookmarkable_id === Number(topic?.id) && item.value !== null\n      ),\n    [bookmarkNotes.list?.data, topic?.id]\n  );\n\n  const handleBookmark = () => {\n    return !topicBookmark?.length\n      ? createBookmarkNote({\n          bookmarkable_id: Number(topic?.id),\n          bookmarkable_type: `${courseId}/${lesson?.id}/${topic?.id}:${program.title}:${topic?.title}`,\n        }).then(() => {\n          fetchBookmarkNotes();\n          toast.success(t<string>(\"Notifications.CreateBookmark\"));\n        })\n      : deleteBookmarkNote(topicBookmark[0].id).then(() => {\n          fetchBookmarkNotes();\n          toast.success(t<string>(\"Notifications.DeleteBookmark\"));\n        });\n  };\n\n  useEffect(() => {\n    if (startWithBreakPoint) {\n      if (findLessonBreakPoint && topicBreakPoint) {\n        push(\n          `/course/${program.id}/${findLessonBreakPoint.id}/${topicBreakPoint.topic_id}`,\n          null\n        );\n      }\n    }\n  }, [\n    startWithBreakPoint,\n    findLessonBreakPoint,\n    program,\n    push,\n    topicBreakPoint,\n  ]);\n\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [lesson?.id, topic?.id]);\n\n  useEffect(() => {\n    if (!program || !topic) return;\n    if (getNextPrevTopic(Number(topic?.id)) === null) {\n      disableNextTopicButton(true);\n      return;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [topic?.id, program]);\n\n  const columnWidth =\n    lesson && lesson.summary && topic && topic.summary ? 6 : 12;\n\n  //@ts-ignore\n  window.resetProgress = () =>\n    (async () => {\n      await sendProgress(\n        program.id,\n        program.lessons\n          .flatMap((lesson) => lesson.topics)\n          .map((topic) => ({ topic_id: Number(topic?.id), status: 0 }))\n      );\n    })();\n\n  const finishedTopicIndex = getCourseProgress?.findIndex((ttopic) => {\n    return (\n      ttopic.topic_id === topic?.id &&\n      ttopic.status === API.CourseProgressItemElementStatus.COMPLETE\n    );\n  });\n\n  if (!program) {\n    return <ErrorBox error={t(\"CourseProgram.NoProgram\")} />;\n  }\n\n  if (!topic) {\n    return (\n      <ErrorBox\n        error={t(\"CourseProgram.NoTopic\")}\n        goTo={`/course/${program.id}`}\n        goToText={t(\"CoursePage.BackToCourse\")}\n        alternativeButton={{\n          goTo: \"/courses\",\n          goToText: t(\"CoursePage.SeeOtherCourses\"),\n        }}\n      />\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <StyledCourse className=\"course-program-wrapper\">\n        <Container>\n          <Breadcrumbs\n            items={[\n              <Link to=\"/\">{t(\"Home\")}</Link>,\n              <Link to=\"/courses\">{t(\"Courses\")}</Link>,\n              <Text size=\"12\">{program.title}</Text>,\n              <Text size=\"12\">{topic.title}</Text>,\n            ]}\n          />\n          <Title className=\"main-title\" level={3}>\n            {topic.title}\n          </Title>\n          <Row>\n            <Col lg={9}>\n              {!!showFinishModal && (\n                <div className=\"course-program-finish-modal\">\n                  <p className=\"course-program-finish-modal__title\">\n                    {t(\"CourseProgram.FinishTitle\")}\n                  </p>\n                  <p className=\"course-program-finish-modal__paragraph\">\n                    {t(\"CourseProgram.FinishSubtitle\")}\n                  </p>\n\n                  <div className=\"course-program-finish-modal__buttons\">\n                    <Button\n                      mode=\"primary\"\n                      onClick={() => push(\"/user/my-profile\")}\n                    >\n                      {t(\"Menu.Profile\")}\n                    </Button>\n                    <Button mode=\"primary\" onClick={() => push(\"/courses\")}>\n                      {t(\"Menu.Courses\")}\n                    </Button>\n                  </div>\n                </div>\n              )}\n              {!showFinishModal && (\n                <div className=\"course-program-player\">\n                  <div className=\"course-program-player-content\">\n                    {topic && topic.introduction && (\n                      <MarkdownRenderer>{topic.introduction}</MarkdownRenderer>\n                    )}\n                    <div\n                      className=\"course-program-player-content__wrapper\"\n                      style={{\n                        ...((topic?.json?.wrapperStyle as object) || {}),\n                      }}\n                    >\n                      <CourseProgramContent\n                        key={topic.id}\n                        lessonId={Number(lesson?.id)}\n                        topicId={topic && Number(topic.id)}\n                        disableNextTopicButton={disableNextTopicButton}\n                        isThereAnotherTopic={Boolean(\n                          getNextPrevTopic(Number(topic?.id))\n                        )}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"course-program-content__container\">\n                    <Row>\n                      {lesson && lesson.summary && (\n                        <Col sm={12} md={columnWidth} lg={columnWidth}>\n                          <div className=\"course-program-summary\">\n                            <MarkdownRenderer>\n                              {lesson.summary}\n                            </MarkdownRenderer>\n                          </div>\n                        </Col>\n                      )}\n                      {topic && topic.summary && (\n                        <Col sm={12} md={columnWidth} lg={columnWidth}>\n                          <div className=\"course-program-summary\">\n                            <MarkdownRenderer>{topic.summary}</MarkdownRenderer>\n\n                            {topic &&\n                              topic.resources &&\n                              topic.resources?.length > 0 && (\n                                <CourseDownloads\n                                  resources={topic.resources || []}\n                                  subtitle={topic.introduction || \"\"}\n                                />\n                              )}\n                          </div>\n                        </Col>\n                      )}\n                    </Row>\n                  </div>\n                </div>\n              )}\n            </Col>\n            <Col lg={3}>\n              <CourseSidebar\n                course={program}\n                lessonId={Number(lesson?.id)}\n                topicId={Number(topic?.id)}\n                onCourseFinish={() => setShowFinishModal(true)}\n              />\n            </Col>\n          </Row>\n        </Container>\n        <div className=\"course-nav\">\n          <Container>\n            <CourseTopNav\n              onFinish={() => onCompleteTopic()}\n              mobile={isMobile}\n              onNext={onNextTopic}\n              isFinished={finishedTopicIndex ? finishedTopicIndex > -1 : false}\n              onPrev={onPrevTopic}\n              addNotes={true}\n              newNoteData={{\n                id: topic.id,\n                type: `${courseId}/${lesson?.id}/${topic?.id}:${program.title}:${topic?.title}`,\n              }}\n              currentNote={\n                topicNote?.length ? (topicNote[0] as NoteData) : undefined\n              }\n              addBookmarks={true}\n              bookmarkBtnText={\n                topicBookmark?.length ? \"deleteBookmark\" : \"addBookmark\"\n              }\n              onBookmarkClick={() => handleBookmark()}\n              hasPrev={\n                getNextPrevTopic(Number(topic?.id), false) ? true : false\n              }\n              hasNext={!isNextTopicButtonDisabled}\n            />\n          </Container>\n        </div>\n      </StyledCourse>\n    </React.Fragment>\n  );\n};\n\nexport default CourseProgramLessons;\n","import React, { useContext, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport Preloader from \"@/components/Preloader\";\nimport Layout from \"@/components/_App/Layout\";\n\nimport CourseProgramLessons from \"@/components/Course/CourseProgramLessons\";\nimport ErrorBox from \"@/components/Errorbox\";\nimport { t } from \"i18next\";\nimport ScormPlayer from \"@/components/Course/Players/ScormPlayer\";\n\n// TODO: 99% same as: src/pages/courses/preview/index.tsx\n\nconst CourseProgramScorm: React.FC<{ program: API.CourseProgram }> = ({\n  program,\n}) => {\n  const sco = program?.scorm_sco;\n  const uuid = sco?.uuid;\n\n  if (!sco && !uuid) {\n    return <React.Fragment />;\n  }\n\n  return (\n    <ScormPlayer\n      value={{\n        title: sco.title,\n        uuid: sco.uuid,\n      }}\n    />\n  );\n};\n\nconst CourseProgram = () => {\n  const { id } = useParams<{ id: string }>();\n  const { program, fetchProgram } = useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (id) {\n      // Probably here we only need program to show SCORM\n      fetchProgram(Number(id));\n      // fetchCourseProgress(Number(id));\n      //fetchCourseProgress(Number(id));\n      //fetchProgress();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n  if (program.loading) {\n    return <Preloader />;\n  }\n  if (program.error) {\n    return <ErrorBox error={t(\"CourseProgram.NoProgram\")} />;\n  }\n  if (program.value && program?.value?.scorm_sco_id) {\n    return (\n      <Layout metaTitle={program.value.title}>\n        <CourseProgramScorm program={program.value} />\n      </Layout>\n    );\n  }\n  if (program.value && program.value.lessons && program.value.lessons.length) {\n    return (\n      <Layout metaTitle={program.value.title}>\n        <CourseProgramLessons program={program.value} courseId={Number(id)} />\n      </Layout>\n    );\n  }\n\n  return <Preloader />;\n};\n\nexport default CourseProgram;\n","import React from \"react\";\nimport { BreadCrumbs } from \"@escolalms/components/lib/components/atoms/BreadCrumbs/BreadCrumbs\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  items: React.ReactNode[];\n};\n\nconst StyledBreadcrumbs = styled.div`\n  margin-bottom: 15px;\n  a {\n    text-decoration: none;\n    color: ${({ theme }) =>\n      theme.mode === \"dark\" ? theme.gray5 : theme.gray2}!important;\n  }\n`;\n\nconst Breadcrumbs: React.FC<Props> = ({ items }) => {\n  return (\n    <StyledBreadcrumbs>\n      <BreadCrumbs items={items} />\n    </StyledBreadcrumbs>\n  );\n};\n\nexport default Breadcrumbs;\n","import { useEffect } from \"react\";\nimport { Spin } from \"@escolalms/components/lib/components/atoms/Spin/Spin\";\nimport styled, { useTheme } from \"styled-components\";\n\nconst StyledLoader = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${({ theme }) =>\n    theme.mode === \"dark\" ? theme.dm__background : theme.background};\n`;\n\nconst Preloader = () => {\n  const theme = useTheme();\n  useEffect(() => {\n    document.body.style.overflow = \"hidden\";\n\n    return () => {\n      document.body.style.overflow = \"inherit\";\n    };\n  }, []);\n\n  return (\n    <StyledLoader>\n      <Spin color={theme.primaryColor} />\n    </StyledLoader>\n  );\n};\n\nexport default Preloader;\n","import { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useCallback, useContext, useMemo, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nexport function useLessonProgram(\n  program: API.CourseProgram,\n  courseRouteName: string = \"/course/\"\n) {\n  const { sendProgress, getNextPrevTopic, progress } =\n    useContext(EscolaLMSContext);\n  const [isNextTopicButtonDisabled, disableNextTopicButton] = useState(false);\n  const { lessonID, topicID } =\n    useParams<{ lessonID: string; topicID: string }>();\n  const { push } = useHistory();\n\n  const lessonId = lessonID ? lessonID : program.lessons[0].id;\n  const topicId = topicID\n    ? topicID\n    : (program &&\n        program.lessons &&\n        program.lessons[0] &&\n        program.lessons[0].topics &&\n        program?.lessons[0]?.topics[0]?.id) ||\n      0;\n\n  const lesson: API.Lesson | undefined = useMemo(\n    () => program.lessons.find((lesson) => lesson.id === Number(lessonId)),\n    [program, lessonId]\n  );\n\n  const topic: API.Topic | undefined = useMemo(\n    () =>\n      lesson &&\n      lesson.topics &&\n      lesson.topics.find((topic) => topic.id === Number(topicId)),\n    [lesson, topicId]\n  );\n\n  const onNextTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const nextTopic = getNextPrevTopic(Number(topicId));\n\n          nextTopic &&\n            push(\n              `${courseRouteName}${program.id}/${nextTopic.lesson_id}/${nextTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n  const onPrevTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const prevTopic = getNextPrevTopic(Number(topicId), false);\n\n          prevTopic &&\n            push(\n              `${courseRouteName}${program.id}/${prevTopic.lesson_id}/${prevTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n\n  const onNextTopicPreview = useCallback(\n    (next = true) => {\n      const nextTopic = getNextPrevTopic(Number(topicId), next);\n\n      nextTopic &&\n        push(\n          `${courseRouteName}${program.id}/${nextTopic?.lesson_id}/${nextTopic?.id}`\n        );\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [lessonId, topicId, program, program.id, push, courseRouteName]\n  );\n\n  return {\n    topic,\n    lesson,\n    onNextTopic,\n    onPrevTopic,\n    getNextPrevTopic,\n    isNextTopicButtonDisabled,\n    disableNextTopicButton,\n    onNextTopicPreview,\n    sendProgress,\n    progress,\n  } as const;\n}\n","import React, {\n  ReactElement,\n  FunctionComponent,\n  useContext,\n  useState,\n} from \"react\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport styled, { css } from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { ResizeIcon } from \"../../../icons\";\n\nconst StyledDiv = styled.div<{ fullview: boolean }>`\n  > button {\n    position: fixed;\n    right: 5px;\n    bottom: 5px;\n    z-index: 9999;\n    svg path {\n      fill: white;\n    }\n  }\n  iframe {\n    border: none;\n    display: block;\n    width: 100%;\n  }\n  ${(props) => {\n    if (props.fullview) {\n      return css`\n        iframe {\n          position: fixed;\n          top: 90px;\n          left: 0;\n          height: calc(100% - 90px - 80px);\n\n          z-index: 9999;\n        }\n      `;\n    } else {\n      return css`\n        display: flex;\n\n        min-height: 80vh;\n        max-height: 80vh;\n        height: 100vh;\n        iframe {\n          height: 100%;\n        }\n      `;\n    }\n  }}\n`;\n\ninterface ScormPlayerProps {\n  title: string;\n  uuid: string;\n}\n\nconst ScormPlayer: FunctionComponent<{\n  value: ScormPlayerProps;\n}> = ({ value }): ReactElement => {\n  const { apiUrl } = useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n  const [fullView, setFullView] = useState(false);\n\n  return (\n    <div className=\"scorm-wrapper\">\n      <StyledDiv fullview={fullView}>\n        <Button onClick={() => setFullView(!fullView)}>\n          {\" \"}\n          {t(\"Scorm.Resize\")} <ResizeIcon />\n        </Button>\n        <iframe\n          title={value.title}\n          src={`${apiUrl}/api/scorm/play/${value.uuid}`}\n        />\n      </StyledDiv>\n    </div>\n  );\n};\n\nexport default ScormPlayer;\n","import React, { useCallback, useContext, useState, useMemo } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { CourseAgenda } from \"@escolalms/components/lib/components/organisms/CourseAgenda/CourseAgenda\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useHistory } from \"react-router-dom\";\nimport { isMobile } from \"react-device-detect\";\nimport styled, { css } from \"styled-components\";\nimport { useLessonProgram } from \"../../../hooks/useLessonProgram\";\nimport { Button } from \"@escolalms/components\";\nimport { t } from \"i18next\";\nimport { Topic } from \"@escolalms/sdk/lib/types/api\";\n\nconst StyledSidebar = styled.aside`\n  padding-bottom: 100px;\n  .show-agenda-btn {\n    width: 100%;\n  }\n  .agenda-wrapper {\n    ${isMobile &&\n    css`\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      transform: translate(100%, 0);\n      transition: transform 0.25s;\n      overflow: scroll;\n      padding: 40px 0 55px;\n      z-index: 10;\n      background-color: ${({ theme }) =>\n        theme.mode === \"dark\" ? theme.dm__background : theme.background};\n      &--visible {\n        transform: translate(0, 0);\n      }\n      .hide-agenda-btn {\n        display: block;\n        margin: 0 15px 0 auto;\n      }\n    `}\n  }\n`;\n\nexport const CourseSidebar: React.FC<{\n  course: API.CourseProgram;\n  lessonId: number;\n  topicId: number;\n  onCourseFinish?: () => void;\n}> = ({ course, lessonId, topicId, onCourseFinish }) => {\n  const { disableNextTopicButton, sendProgress, progress } =\n    useLessonProgram(course);\n  const { courseProgressDetails } = useContext(EscolaLMSContext);\n\n  const history = useHistory();\n  const [agendaVisible, setAgendaVisible] = useState(false);\n  const program = (course?.lessons || []).filter(\n    (lesson) => lesson && lesson.topics && lesson?.topics?.length > 0\n  ) as API.Lesson[];\n  const { topicIsFinished } = useContext(EscolaLMSContext);\n  const allTopics = course.lessons.map((item) => item.topics);\n  //@ts-ignore\n  const arrayOfTopics = [].concat.apply([], allTopics);\n\n  const onCompleteTopic = useCallback((): void => {\n    disableNextTopicButton && disableNextTopicButton(false);\n    if (course?.id) {\n      sendProgress(course?.id, [{ topic_id: Number(topicId), status: 1 }]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [program, topicId, disableNextTopicButton, sendProgress]);\n\n  const getCourseProgress = useMemo(() => {\n    const courseId = course.id;\n    if (\n      courseProgressDetails &&\n      courseProgressDetails.byId &&\n      courseProgressDetails.byId[Number(courseId)] &&\n      courseProgressDetails.byId[Number(courseId)].value\n    ) {\n      return courseProgressDetails.byId[Number(courseId)].value;\n    }\n    return (\n      progress &&\n      progress.value &&\n      progress.value.find(\n        (courseProgress: API.CourseProgressItem) =>\n          courseProgress.course.id === Number(courseId)\n      )?.progress\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [progress, course]);\n\n  const finishedTopics = arrayOfTopics\n    .filter((item: API.Topic) => {\n      return (\n        topicIsFinished(item.id) ||\n        getCourseProgress?.some(\n          (progressItem) =>\n            progressItem.topic_id === item.id && progressItem.status === 1\n        )\n      );\n    })\n    .map((item: API.Topic) => item.id);\n\n  if (!course && !program) {\n    return <React.Fragment />;\n  }\n  return (\n    <StyledSidebar>\n      {isMobile && (\n        <Button\n          mode=\"outline\"\n          className=\"show-agenda-btn\"\n          onClick={() => setAgendaVisible(true)}\n        >\n          {t(\"CourseProgram.ShowAgenda\")}\n        </Button>\n      )}\n      <div\n        className={`${\n          agendaVisible\n            ? \"agenda-wrapper agenda-wrapper--visible\"\n            : \"agenda-wrapper\"\n        }`}\n      >\n        {isMobile && (\n          <Button\n            className=\"hide-agenda-btn\"\n            mode=\"secondary\"\n            onClick={() => setAgendaVisible(false)}\n          >\n            &#10005;\n          </Button>\n        )}\n        <CourseAgenda\n          onNextTopicClick={() => {\n            let nextTopic;\n\n            course.lessons.forEach((lesson, lIndex, lessons) => {\n              lesson.topics &&\n                lesson.topics.forEach((topic, tIndex) => {\n                  if (topic.id === topicId) {\n                    // try find next topic in current lesson\n                    if (lesson.topics && lesson.topics[tIndex + 1]) {\n                      nextTopic =\n                        lesson.topics[tIndex + 1] && lesson.topics[tIndex + 1];\n                      // try find first topic in next lesson\n                    } else if (lessons[lIndex + 1]) {\n                      nextTopic =\n                        lessons[lIndex + 1].topics &&\n                        //@ts-ignore\n                        lessons[lIndex + 1].topics[0];\n                      // otherwise this is end so going back to first lesson and topic\n                    } else {\n                      nextTopic = lessons[0].topics && lessons[0].topics[0];\n                    }\n                  }\n                });\n            });\n\n            if (nextTopic) {\n              history.push(\n                `/course/${course.id}/${(nextTopic as Topic).lesson_id}/${\n                  (nextTopic as Topic).id\n                }`\n              );\n              setAgendaVisible(false);\n            }\n          }}\n          mobile={isMobile}\n          lessons={course.lessons}\n          currentTopicId={topicId}\n          finishedTopicIds={finishedTopics}\n          onMarkFinished={() => onCompleteTopic()}\n          onTopicClick={(topic) => {\n            history.push(`/course/${course.id}/${topic.lesson_id}/${topic.id}`);\n            setAgendaVisible(false);\n          }}\n          onCourseFinished={() => onCourseFinish?.()}\n        />\n      </div>\n    </StyledSidebar>\n  );\n};\n\nexport default CourseSidebar;\n","import React, { ReactElement, FunctionComponent, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\n\nconst TextPlayerStyles = styled.div`\n  h1 {\n    font-size: 2em;\n  }\n  h2 {\n    font-size: 1.5em;\n  }\n  h3 {\n    font-size: 1.17em;\n  }\n  h4 {\n    font-size: 1em;\n  }\n  h5 {\n    font-size: 0.9em;\n  }\n`;\n\nconst TextPlayer: FunctionComponent<{\n  value?: string;\n  onLoad?: () => void;\n}> = ({ value, onLoad }): ReactElement => {\n  useEffect(() => {\n    value && onLoad && onLoad();\n  }, [value, onLoad]);\n\n  return (\n    <TextPlayerStyles>\n      {value && <MarkdownRenderer>{value}</MarkdownRenderer>}\n    </TextPlayerStyles>\n  );\n};\n\nexport default TextPlayer;\n","import React, { useContext, useEffect, useMemo, useCallback } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { XAPIEvent } from \"@escolalms/h5p-react\";\nimport TextPlayer from \"./Players/TextPlayer\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { ImagePlayer } from \"@escolalms/components/lib/components/players/ImagePlayer/ImagePlayer\";\nimport { AudioVideoPlayer } from \"@escolalms/components/lib/components/players/AudioVideoPlayer/AudioVideoPlayer\";\nimport { OEmbedPlayer } from \"@escolalms/components/lib/components/players/OEmbedPlayer/OEmbedPlayer\";\nimport { H5Player } from \"@escolalms/components/lib/components/players/H5Player/H5Player\";\nimport { PdfPlayer } from \"@escolalms/components/lib/components/players/PdfPlayer/PdfPlayer\";\nimport { ProjectPlayer } from \"@escolalms/components/lib/components/players/ProjectPlayer/ProjectPlayer\";\nimport { isMobile } from \"react-device-detect\";\nimport ScormPlayer from \"./Players/ScormPlayer\";\nimport styled from \"styled-components\";\nimport GiftQuizPlayer from \"@escolalms/components/lib/components/quizzes\";\n\nconst StyledPdfPlayer = styled(PdfPlayer)`\n  .course-pdf-player {\n    .react-pdf__Page__svg,\n    svg {\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n`;\n\nexport const CourseProgramContent: React.FC<{\n  lessonId: number;\n  isThereAnotherTopic?: boolean;\n  topicId?: number;\n  preview?: boolean;\n  customNoCompletedEventsIds?: string[];\n  disableNextTopicButton?: (b: boolean) => void;\n}> = ({\n  lessonId,\n  topicId,\n  preview = false,\n  disableNextTopicButton,\n  customNoCompletedEventsIds = [\n    \"http://h5p.org/libraries/H5P.GuessTheAnswer-1.5\",\n  ],\n  isThereAnotherTopic = true,\n}) => {\n  const { program, topicPing, topicIsFinished, sendProgress, h5pProgress } =\n    useContext(EscolaLMSContext);\n\n  const topic = useMemo(() => {\n    return program.value?.lessons\n      ?.find((lesson: API.Lesson) => lesson.id === lessonId)\n      ?.topics?.find((topic: API.Topic) => topic.id === topicId);\n  }, [program, lessonId, topicId]);\n\n  const onCompleteTopic = useCallback((): void => {\n    if (program?.value?.id) {\n      sendProgress(program?.value?.id, [\n        { topic_id: Number(topicId), status: 1 },\n      ]);\n    }\n  }, [program, topicId, sendProgress]);\n\n  const onXAPI = useCallback(\n    (event: XAPIEvent): void => {\n      isThereAnotherTopic &&\n        disableNextTopicButton &&\n        disableNextTopicButton(!Boolean(event?.statement?.verb?.id));\n\n      if (event?.statement) {\n        h5pProgress(\n          String(program?.value?.id),\n          Number(topicId),\n          event?.statement as API.IStatement\n        );\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      program,\n      topicId,\n      h5pProgress,\n      disableNextTopicButton,\n      customNoCompletedEventsIds,\n    ]\n  );\n\n  useEffect(() => {\n    const isTopicFinished = topic?.id && topicIsFinished(topic.id);\n\n    isThereAnotherTopic &&\n      disableNextTopicButton &&\n      isTopicFinished &&\n      disableNextTopicButton(!isTopicFinished && !Boolean(topic?.can_skip));\n  }, [disableNextTopicButton, topic, isThereAnotherTopic, topicIsFinished]);\n\n  useEffect(() => {\n    if (!preview) {\n      const ping = () =>\n        topicId && !topicIsFinished(topicId) && topicPing(topicId);\n      const interval = setInterval(() => {\n        ping();\n      }, 5000);\n      ping();\n      return () => clearInterval(interval);\n    }\n  }, [topicPing, preview, topicId, topicIsFinished]);\n\n  if (!topic) {\n    return <React.Fragment />;\n  }\n\n  if (!topic.topicable?.value) {\n    return (\n      <pre className=\"error\">Error: topic.topicable?.value is missing</pre>\n    );\n  }\n  if (topic.topicable_type) {\n    // TODO: specific interface for advanced topic players -> example: ImagePlayer\n    switch (topic.topicable_type) {\n      case API.TopicType.H5P:\n        return (\n          <H5Player\n            onXAPI={(e: XAPIEvent) => onXAPI(e)}\n            //@ts-ignore\n            h5pObject={topic.topicable.content as API.H5PObject}\n          />\n        );\n      case API.TopicType.OEmbed:\n        return (\n          <>\n            <OEmbedPlayer url={topic.topicable.value} key={topicId} />\n          </>\n        );\n      case API.TopicType.RichText:\n        return <TextPlayer value={topic.topicable.value} />;\n      case API.TopicType.Video:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            url={topic.topicable.url}\n            light\n            onFinish={(): void => onCompleteTopic()}\n          />\n        );\n      case API.TopicType.Image:\n        return <ImagePlayer topic={topic} onLoad={() => onCompleteTopic()} />;\n\n      case API.TopicType.Audio:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            audio\n            url={topic.topicable.url}\n            light\n            onFinish={(): void => onCompleteTopic()}\n          />\n        );\n\n      case API.TopicType.Pdf:\n        return (\n          <StyledPdfPlayer\n            url={topic.topicable.url}\n            pageConfig={{\n              renderMode: \"svg\",\n              className: \"course-pdf-player\",\n            }}\n          />\n        );\n\n      case API.TopicType.Scorm:\n        return (\n          <ScormPlayer\n            value={{\n              title: topic.title,\n              uuid: topic.topicable.uuid,\n            }}\n          />\n        );\n\n      case API.TopicType.GiftQuiz:\n        return <GiftQuizPlayer topic={topic} />;\n      case API.TopicType.Project:\n        return (\n          <ProjectPlayer\n            course_id={program.value?.id ?? 0}\n            topic={topic}\n            onSuccess={onCompleteTopic}\n          />\n        );\n      default:\n        return <pre>{(topic as API.Topic).topicable_type}</pre>;\n    }\n  }\n\n  return <pre>loading... (or error)</pre>;\n};\n\nexport default CourseProgramContent;\n"],"sourceRoot":""}