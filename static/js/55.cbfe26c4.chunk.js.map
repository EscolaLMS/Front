{"version":3,"sources":["pages/register/index.tsx"],"names":["StyledRegisterPage","styled","div","_templateObject","_taggedTemplateLiteral","StyledLink","Link","_templateObject2","_ref","theme","primaryColor","StyledContent","_templateObject3","_ref2","StyledModal","Modal","_templateObject4","RegisterPage","_settings$value","_settings$value$confi","search","useLocation","user","socialAuthorize","useContext","EscolaLMSContext","view","setView","useState","modalVisible","setModalVisible","settings","email","setEmail","history","useHistory","token","split","t","useTranslation","footerFromApi","value","config","registerWarning","fieldLabels","_jsxs","Text","size","children","_jsx","to","routeRoutes","privacyPolicy","setTimeout","push","home","loading","useEffect","EmailActivation","Container","Row","justify","Col","md","className","Title","level","MarkdownRenderer","components","a","props","LinkComponent","onClick","underline","Layout","metaTitle","onClose","visible","animation","maskAnimation","destroyOnClose","width","Button","mode","RegisterForm","return_url","mobile","isMobile","onLoginLink","login","onSuccess","_","values"],"mappings":"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","file":"static/js/55.cbfe26c4.chunk.js","sourcesContent":["import { SetStateAction, useContext, useEffect, useState } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Layout from \"@/components/_App/Layout\";\nimport { isMobile } from \"react-device-detect\";\nimport { useLocation } from \"react-router-dom\";\nimport { Title } from \"@escolalms/components/lib/components/atoms/Typography/Title\";\nimport { RegisterForm, Text } from \"@escolalms/components\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport { Modal } from \"@escolalms/components/lib/components/atoms/Modal/Modal\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { Col, Row } from \"react-grid-system\";\nimport { Link as LinkComponent } from \"@escolalms/components/lib/components/atoms/Link/Link\";\nimport Container from \"@/components/Container\";\nimport routeRoutes from \"@/components/Routes/routes\";\n\nconst StyledRegisterPage = styled.div`\n  min-height: calc(100vh - 500px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst StyledLink = styled(Link)`\n  color: ${({ theme }) => theme.primaryColor}!important;\n`;\n\nconst StyledContent = styled.div`\n  .content-container {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    flex-direction: column;\n\n    .email-title {\n      text-align: center;\n    }\n\n    .email-main-text {\n      text-align: center;\n      margin: 25px 0 85px;\n      font-weight: 700;\n      span {\n        color: ${({ theme }) => theme.primaryColor};\n      }\n    }\n\n    .email-help-text {\n      margin: 0 auto 20px 0;\n      ul {\n        padding-left: 15px;\n        margin-left: 0;\n        li {\n          font-size: 12px;\n        }\n      }\n    }\n\n    .back-text {\n      text-align: center;\n      margin-top: 20px;\n    }\n  }\n`;\n\nconst StyledModal = styled(Modal)`\n  a {\n    font-size: 1.14em;\n  }\n`;\n\nconst RegisterPage = () => {\n  const { search } = useLocation();\n  const { user, socialAuthorize } = useContext(EscolaLMSContext);\n  const [view, setView] = useState<\"\" | \"success\" | \"register\">(\"\");\n  const [modalVisible, setModalVisible] = useState(false);\n  const { settings } = useContext(EscolaLMSContext);\n\n  const [email, setEmail] = useState<string>(\"\");\n  const history = useHistory();\n  const token = search.split(\"?token=\")[1];\n  const { t } = useTranslation();\n\n  const footerFromApi: string = settings?.value?.config?.registerWarning;\n\n  const fieldLabels = {\n    \"AdditionalFields.Privacy Policy\": (\n      <Text size=\"14\">\n        {t(\"AcceptCheckbox\")}{\" \"}\n        <StyledLink to={routeRoutes.privacyPolicy}>\n          {t(\"PrivacyPolicy\")}\n        </StyledLink>\n      </Text>\n    ),\n    \"AdditionalFields.Terms of Service\": (\n      <Text size=\"14\">\n        {t(\"AcceptCheckbox\")}{\" \"}\n        <StyledLink to={routeRoutes.privacyPolicy}>\n          {t(\"TermsOfService\")}\n        </StyledLink>\n      </Text>\n    ),\n  };\n  if (token) {\n    socialAuthorize(token);\n    setTimeout(() => {\n      history.push(routeRoutes.home);\n    }, 1000);\n  }\n\n  if (!user.loading && !token && user.value) {\n    history.push(routeRoutes.home);\n  }\n\n  useEffect(() => {\n    setModalVisible(view === \"success\");\n  }, [view]);\n\n  const EmailActivation = () => {\n    return (\n      <StyledContent>\n        <Container>\n          <Row justify={\"center\"}>\n            <Col md={12}>\n              <div className=\"content-container\">\n                <Title className=\"email-title\" level={3}>\n                  {t(\"EmailActivation.Title\")}\n                </Title>\n                <MarkdownRenderer\n                  components={{\n                    a: (props) => <span>{props.children}</span>,\n                  }}\n                >\n                  {t(\"EmailActivation.Text\", { email })}\n                </MarkdownRenderer>\n                <MarkdownRenderer>\n                  {t(\"EmailActivation.HelpText\")}\n                </MarkdownRenderer>\n\n                <div className=\"back-text\">\n                  <LinkComponent onClick={() => setView(\"register\")} underline>\n                    {t(\"EmailActivation.RegisterAgain\")}\n                  </LinkComponent>\n                </div>\n              </div>\n            </Col>\n          </Row>\n        </Container>\n      </StyledContent>\n    );\n  };\n\n  return (\n    <Layout metaTitle={t(\"LoginAndRegister\")}>\n      {footerFromApi && (\n        <StyledModal\n          onClose={() => setModalVisible(false)}\n          visible={modalVisible}\n          animation=\"zoom\"\n          maskAnimation=\"fade\"\n          destroyOnClose={true}\n          width={800}\n        >\n          <Title level={4} className=\"modal-title\">\n            {t(\"Warning\")}\n          </Title>\n          <MarkdownRenderer>{footerFromApi}</MarkdownRenderer>\n          <Button mode=\"outline\" onClick={() => setModalVisible(false)}>\n            {t(\"I'm aware\")}\n          </Button>\n        </StyledModal>\n      )}\n\n      {view !== \"success\" ? (\n        <StyledRegisterPage>\n          <Container>\n            <Row justify=\"center\">\n              <Col md={12}>\n                <RegisterForm\n                  return_url={\"#/email-verify\"}\n                  fieldLabels={fieldLabels}\n                  mobile={isMobile}\n                  onLoginLink={() => history.push(routeRoutes.login)}\n                  onSuccess={(\n                    _: any,\n                    values: { email: SetStateAction<string> }\n                  ) => {\n                    setView(\"success\");\n                    setEmail(values.email);\n                  }}\n                />\n              </Col>\n            </Row>\n          </Container>\n        </StyledRegisterPage>\n      ) : (\n        <EmailActivation />\n      )}\n    </Layout>\n  );\n};\n\nexport default RegisterPage;\n"],"sourceRoot":""}