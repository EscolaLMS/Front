(this["webpackJsonpescolalms-demo"]=this["webpackJsonpescolalms-demo"]||[]).push([[10],{444:function(e,t,n){"use strict";n.r(t);var i,o,c,r=n(90),s=n(0),a=n.n(s),l=n(13),u=n(27),d=n(481),b=n(175),j=n(6),p=n(47),v=n(713),f=n(576),m=n(555),O=n(509),h=n(63),x=n(257),g=n(151),N=n(17),y=n(28),T=n(7),P=n(55),_=n(258),w=n(75),C=n(1),k=T.default.div(i||(i=Object(p.a)(["\n  margin-top: 100px;\n"]))),I=function(e){var t=e.resources,n=e.subtitle,i=Object(w.a)().t,o=t.map((function(e){return{href:e.url,fileName:e.name}}));return Object(C.jsx)(k,{children:Object(C.jsx)(_.Downloads,{subtitle:n,title:i("CourseProgram.TopicAttachment"),downloads:o})})},M=n(480),E=n(56),S=n(124),B=T.default.section(o||(o=Object(p.a)(["\n  padding-bottom: 110px;\n  .main-title {\n    margin-bottom: 20px;\n  }\n  .course-nav {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: 100;\n  }\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n"]))),z=function(e){var t,n,i=e.program,o=e.courseId,c=Object(O.a)(i),r=c.topic,u=c.lesson,d=c.onNextTopic,b=c.onPrevTopic,p=c.getNextPrevTopic,T=c.isNextTopicButtonDisabled,_=c.disableNextTopicButton,k=c.sendProgress,z=c.progress,A=Object(l.i)().topicID,F=Object(l.g)().push,R=Object(w.a)().t,D=3===Object(l.h)().pathname.split("/").length,L=Object(s.useMemo)((function(){return z&&z.value&&z.value.find((function(e){return e.course.id===Number(o)}))}),[z,o]),H=Object(s.useCallback)((function(){null!==i&&void 0!==i&&i.id&&k(null===i||void 0===i?void 0:i.id,[{topic_id:Number(A),status:1}])}),[i,A,k]),V=Object(s.useMemo)((function(){var e=L&&L.progress||[],t=e.filter((function(e){return e.status===v.API.CourseProgressItemElementStatus.IN_PROGRESS})).sort((function(e,t){return new Date(t.started_at).getTime()-new Date(e.started_at).getTime()}))[0];return t||e.filter((function(e){return e.status===v.API.CourseProgressItemElementStatus.INCOMPLETE}))[0]}),[L]),G=Object(s.useMemo)((function(){return V&&i.lessons.find((function(e){return e&&e.topics&&e.topics.some((function(e){return e.id===V.topic_id}))}))}),[i,V]);Object(s.useEffect)((function(){D&&G&&V&&F("/course/".concat(i.id,"/").concat(G.id,"/").concat(V.topic_id),null)}),[D,G,i,F,V]),Object(s.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[null===u||void 0===u?void 0:u.id,null===r||void 0===r?void 0:r.id]),Object(s.useEffect)((function(){if(null===p(Number(null===r||void 0===r?void 0:r.id)))return _(!0),void k(i.id,[{topic_id:Number(null===r||void 0===r?void 0:r.id),status:1}])}),[null===r||void 0===r?void 0:r.id,i]);var J=u&&u.summary&&r&&r.summary?6:12;return Object(C.jsx)(a.a.Fragment,{children:Object(C.jsxs)(B,{className:"course-program-wrapper",children:[Object(C.jsxs)(S.a,{children:[Object(C.jsx)(M.a,{items:[Object(C.jsx)(y.c,{to:"/",children:R("Home")}),Object(C.jsx)(y.c,{to:"/courses",children:R("Courses")}),Object(C.jsx)(N.Text,{size:"12",children:i.title}),Object(C.jsx)(N.Text,{size:"12",children:r.title})]}),Object(C.jsx)(h.Title,{className:"main-title",level:3,children:r.title}),Object(C.jsxs)(E.Row,{children:[Object(C.jsx)(E.Col,{lg:9,children:Object(C.jsxs)("div",{className:"course-program-player",children:[Object(C.jsxs)("div",{className:"course-program-player-content",children:[r&&r.introduction&&Object(C.jsx)(g.MarkdownRenderer,{children:r.introduction}),Object(C.jsx)("div",{className:"course-program-player-content__wrapper",style:Object(j.a)({},(null===r||void 0===r||null===(t=r.json)||void 0===t?void 0:t.wrapperStyle)||{}),children:Object(C.jsx)(f.a,{lessonId:Number(null===u||void 0===u?void 0:u.id),topicId:r&&Number(r.id),disableNextTopicButton:_,isThereAnotherTopic:Boolean(p(Number(null===r||void 0===r?void 0:r.id)))},r.id)})]}),Object(C.jsx)("div",{className:"course-program-content__container",children:Object(C.jsxs)(E.Row,{children:[u&&u.summary&&Object(C.jsx)(E.Col,{sm:12,md:J,lg:J,children:Object(C.jsx)("div",{className:"course-program-summary",children:Object(C.jsx)(g.MarkdownRenderer,{children:u.summary})})}),r&&r.summary&&Object(C.jsx)(E.Col,{sm:12,md:J,lg:J,children:Object(C.jsxs)("div",{className:"course-program-summary",children:[Object(C.jsx)(g.MarkdownRenderer,{children:r.summary}),r&&r.resources&&(null===(n=r.resources)||void 0===n?void 0:n.length)>0&&Object(C.jsx)(I,{resources:r.resources||[],subtitle:r.introduction||""})]})})]})})]})}),Object(C.jsx)(E.Col,{lg:3,children:Object(C.jsx)(m.a,{course:i,lessonId:Number(null===u||void 0===u?void 0:u.id),topicId:Number(null===r||void 0===r?void 0:r.id)})})]})]}),Object(C.jsx)("div",{className:"course-nav",children:Object(C.jsx)(S.a,{children:Object(C.jsx)(x.CourseTopNav,{onFinish:function(){return H()},mobile:P.isMobile,onNext:d,isFinished:!1,onPrev:b,addNotes:!1,hasPrev:!!p(Number(null===r||void 0===r?void 0:r.id),!1),hasNext:!T})})})]})})},A=n(23),F=T.default.div(c||(c=Object(p.a)(["\n  min-height: calc(100vh - 150px);\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]))),R=function(e){var t=e.error,n=Object(w.a)().t,i=Object(l.g)();return Object(C.jsx)(b.a,{children:Object(C.jsxs)(F,{children:[Object(C.jsx)(A.Text,{size:"16",children:Object(C.jsx)("strong",{children:n("CoursePage.ErrorOccurred")})}),Object(C.jsx)(A.Text,{size:"14",children:t}),Object(C.jsx)("hr",{}),Object(C.jsx)(A.Button,{mode:"secondary",onClick:function(){return i.push("/courses")},children:n("CoursePage.SeeOtherCourses")})]})})},D=n(92),L=function(e){var t=e.program,n=null===t||void 0===t?void 0:t.scorm_sco,i=null===n||void 0===n?void 0:n.uuid,o=Object(s.useRef)(null),c=Object(s.useState)(0),l=Object(r.a)(c,2),d=l[0],b=l[1],j=Object(s.useContext)(u.EscolaLMSContext).apiUrl;return Object(s.useEffect)((function(){var e,t,n,i;o.current&&b((null===(e=o.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||null===(n=t.document)||void 0===n||null===(i=n.body)||void 0===i?void 0:i.scrollHeight)||0)}),[o]),n||i?Object(C.jsx)(a.a.Fragment,{children:Object(C.jsx)("div",{className:"container-fluid course-program",children:Object(C.jsx)("div",{className:"course-program-player scorm",style:{height:"".concat(610+d,"px")},children:Object(C.jsx)("iframe",{title:"scorm-player",ref:o,src:"".concat(j,"/api/scorm/play/").concat(i),scrolling:"no"})})})}):Object(C.jsx)(a.a.Fragment,{})};t.default=function(){var e,t=Object(l.i)().id,n=Object(s.useContext)(u.EscolaLMSContext),i=n.program,o=n.fetchProgram,c=n.fetchProgress;return Object(s.useEffect)((function(){t&&o(Number(t))}),[t]),Object(s.useEffect)((function(){c()}),[]),i.loading?Object(C.jsx)(d.a,{}):i.error?Object(C.jsx)(R,{error:Object(D.t)("CourseProgram.NoProgram")}):i.value&&null!==i&&void 0!==i&&null!==(e=i.value)&&void 0!==e&&e.scorm_sco_id?Object(C.jsx)(b.a,{metaTitle:i.value.title,children:Object(C.jsx)(L,{program:i.value})}):i.value&&i.value.lessons&&i.value.lessons.length?Object(C.jsx)(b.a,{metaTitle:i.value.title,children:Object(C.jsx)(z,{program:i.value,courseId:Number(t)})}):Object(C.jsx)(d.a,{})}},480:function(e,t,n){"use strict";var i,o=n(47),c=(n(0),n(239)),r=n(7),s=n(1),a=r.default.div(i||(i=Object(o.a)(["\n  margin-bottom: 15px;\n  a {\n    text-decoration: none;\n    color: ","!important;\n  }\n"])),(function(e){var t=e.theme;return"dark"===t.mode?t.gray5:t.gray2}));t.a=function(e){var t=e.items;return Object(s.jsx)(a,{children:Object(s.jsx)(c.BreadCrumbs,{items:t})})}},481:function(e,t,n){"use strict";var i,o=n(47),c=n(0),r=n(176),s=n(7),a=n(1),l=s.default.div(i||(i=Object(o.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n"])),(function(e){var t=e.theme;return"dark"===t.mode?t.dm__background:t.background}));t.a=function(){var e=Object(s.useTheme)();return Object(c.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="inherit"}}),[]),Object(a.jsx)(l,{children:Object(a.jsx)(r.Spin,{color:e.primaryColor})})}},509:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(90),o=n(66),c=n(0),r=n(13);function s(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/course/",a=Object(c.useContext)(o.EscolaLMSContext),l=a.sendProgress,u=a.getNextPrevTopic,d=a.progress,b=Object(c.useState)(!1),j=Object(i.a)(b,2),p=j[0],v=j[1],f=Object(r.i)(),m=f.lessonID,O=f.topicID,h=Object(r.g)(),x=h.push,g=m||e.lessons[0].id,N=O||(e&&e.lessons&&e.lessons[0]&&e.lessons[0].topics&&(null===e||void 0===e||null===(t=e.lessons[0])||void 0===t||null===(n=t.topics[0])||void 0===n?void 0:n.id)||0),y=Object(c.useMemo)((function(){return e.lessons.find((function(e){return e.id===Number(g)}))}),[e,g]),T=Object(c.useMemo)((function(){return y&&y.topics&&y.topics.find((function(e){return e.id===Number(N)}))}),[y,N]),P=Object(c.useCallback)((function(){e.id&&l(e.id,[{topic_id:Number(N),status:1}]).then((function(){var t=u(Number(N));t&&x("".concat(s).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[N,e,x,u,l,s]),_=Object(c.useCallback)((function(){e.id&&l(e.id,[{topic_id:Number(N),status:1}]).then((function(){var t=u(Number(N),!1);t&&x("".concat(s).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[N,e,x,u,l,s]),w=Object(c.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=u(Number(N),t);n&&x("".concat(s).concat(e.id,"/").concat(null===n||void 0===n?void 0:n.lesson_id,"/").concat(null===n||void 0===n?void 0:n.id))}),[g,N,e,e.id,x,s]);return{topic:T,lesson:y,onNextTopic:P,onPrevTopic:_,getNextPrevTopic:u,isNextTopicButtonDisabled:p,disableNextTopicButton:v,onNextTopicPreview:w,sendProgress:l,progress:d}}},520:function(e,t){},546:function(e,t){},547:function(e,t){},548:function(e,t){},549:function(e,t){},550:function(e,t){},555:function(e,t,n){"use strict";var i,o,c=n(90),r=n(47),s=n(0),a=n.n(s),l=n(248),u=n(66),d=n(13),b=n(55),j=n(7),p=n(509),v=n(23),f=n(92),m=n(1),O=j.default.aside(i||(i=Object(r.a)(["\n  padding-bottom: 100px;\n  .show-agenda-btn {\n    width: 100%;\n  }\n  .agenda-wrapper {\n    ","\n  }\n"])),b.isMobile&&Object(j.css)(o||(o=Object(r.a)(["\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      transform: translate(100%, 0);\n      transition: transform 0.25s;\n      overflow: scroll;\n      padding: 40px 0 55px;\n      z-index: 10;\n      background-color: ",";\n\n      &--visible {\n        transform: translate(0, 0);\n      }\n\n      .hide-agenda-btn {\n        display: block;\n        margin: 0 15px 0 auto;\n      }\n    "])),(function(e){var t=e.theme;return"dark"===t.mode?t.dm__background:t.background})));t.a=function(e){var t=e.course,n=(e.lessonId,e.topicId),i=Object(p.a)(t),o=i.disableNextTopicButton,r=i.sendProgress,j=Object(d.g)(),h=Object(s.useState)(!1),x=Object(c.a)(h,2),g=x[0],N=x[1],y=((null===t||void 0===t?void 0:t.lessons)||[]).filter((function(e){var t;return e&&e.topics&&(null===e||void 0===e||null===(t=e.topics)||void 0===t?void 0:t.length)>0})),T=Object(s.useContext)(u.EscolaLMSContext).topicIsFinished,P=t.lessons.map((function(e){return e.topics})),_=[].concat.apply([],P).filter((function(e){return T(e.id)})).map((function(e){return e.id})),w=Object(s.useCallback)((function(){o&&o(!1),null!==t&&void 0!==t&&t.id&&r(null===t||void 0===t?void 0:t.id,[{topic_id:Number(n),status:1}])}),[y,n,o,r]);return t||y?Object(m.jsxs)(O,{children:[b.isMobile&&Object(m.jsx)(v.Button,{mode:"outline",className:"show-agenda-btn",onClick:function(){return N(!0)},children:Object(f.t)("CourseProgram.ShowAgenda")}),Object(m.jsxs)("div",{className:"".concat(g?"agenda-wrapper agenda-wrapper--visible":"agenda-wrapper"),children:[b.isMobile&&Object(m.jsx)(v.Button,{className:"hide-agenda-btn",mode:"secondary",onClick:function(){return N(!1)},children:"\u2715"}),Object(m.jsx)(l.CourseAgenda,{onNextTopicClick:function(){var e;t.lessons.forEach((function(t,i,o){t.topics&&t.topics.forEach((function(c,r){c.id===n&&(e=t.topics&&t.topics[r+1]?t.topics[r+1]&&t.topics[r+1]:o[i+1]?o[i+1].topics&&o[i+1].topics[0]:o[0].topics&&o[0].topics[0])}))})),e&&(j.push("/course/".concat(t.id,"/").concat(e.lesson_id,"/").concat(e.id)),N(!1))},mobile:b.isMobile,lessons:t.lessons,currentTopicId:n,finishedTopicIds:_,onMarkFinished:function(){return w()},onTopicClick:function(e){j.push("/course/".concat(t.id,"/").concat(e.lesson_id,"/").concat(e.id)),N(!1)}})]})]}):Object(m.jsx)(a.a.Fragment,{})}},576:function(e,t,n){"use strict";var i,o,c,r,s=n(47),a=n(0),l=n.n(a),u=n(27),d=n(128),b=n(6),j=n(151),p=n(111),v=n(1),f=["small","regular","bigger","big"],m=function(e){var t=e.value,n=e.onLoad,i=e.fontSize;return Object(a.useEffect)((function(){t&&n&&n()}),[t,n]),Object(v.jsx)("div",{className:"center-image-richtext typebase size-".concat(f[i]),children:t&&Object(v.jsx)(j.MarkdownRenderer,{components:{a:function(e){return Object(v.jsx)(p.Link,Object(b.a)(Object(b.a)({},e),{},{underline:!0}))}},children:t})})},O=n(551),h=n(544),x=n(542),g=n(552),N=n(545),y=n(55),T=n(90),P=n(52),_=n(66),w=n(7),C=n(75),k=n(174),I=w.default.div(i||(i=Object(s.a)(["\n  > button {\n    position: fixed;\n    right: 5px;\n    bottom: 5px;\n    z-index: 9999;\n    svg path {\n      fill: white;\n    }\n  }\n  iframe {\n    border: none;\n    display: block;\n    width: 100%;\n  }\n  ","\n"])),(function(e){return e.fullview?Object(w.css)(o||(o=Object(s.a)(["\n        iframe {\n          position: fixed;\n          top: 90px;\n          left: 0;\n          height: calc(100% - 90px - 80px);\n\n          z-index: 9999;\n        }\n      "]))):Object(w.css)(c||(c=Object(s.a)(["\n        display: flex;\n\n        min-height: 80vh;\n        max-height: 80vh;\n        height: 100vh;\n        iframe {\n          height: 100%;\n        }\n      "])))})),M=function(e){var t,n=e.value,i=Object(a.useContext)(_.EscolaLMSContext).apiUrl,o=Object(C.a)().t,c=Object(a.useState)(!1),r=Object(T.a)(c,2),s=r[0],l=r[1];return Object(v.jsx)("div",{className:"scorm-wrapper",children:Object(v.jsxs)(I,{fullview:s,children:[Object(v.jsxs)(P.Button,{onClick:function(){return l(!s)},children:[" ",o("Scorm.Resize")," ",Object(v.jsx)(k.o,{})]}),Object(v.jsx)("iframe",{title:n.title,src:"".concat(i,"/api/scorm/play/").concat(null===(t=n.topicable)||void 0===t?void 0:t.uuid)})]})})},E=Object(w.default)(N.PdfPlayer)(r||(r=Object(s.a)(["\n  .course-pdf-player {\n    .react-pdf__Page__svg,\n    svg {\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n"])));t.a=function(e){var t,n=e.lessonId,i=e.topicId,o=e.preview,c=void 0!==o&&o,r=e.disableNextTopicButton,s=e.customNoCompletedEventsIds,b=void 0===s?["http://h5p.org/libraries/H5P.GuessTheAnswer-1.5"]:s,j=e.isThereAnotherTopic,p=void 0===j||j,f=Object(a.useContext)(u.EscolaLMSContext),N=f.program,T=f.topicPing,P=f.topicIsFinished,_=f.fontSize,w=f.sendProgress,C=f.h5pProgress,k=Object(a.useMemo)((function(){var e,t,o,c;return null===(e=N.value)||void 0===e||null===(t=e.lessons)||void 0===t||null===(o=t.find((function(e){return e.id===n})))||void 0===o||null===(c=o.topics)||void 0===c?void 0:c.find((function(e){return e.id===i}))}),[N,n,i]),I=Object(a.useCallback)((function(){var e,t;null!==N&&void 0!==N&&null!==(e=N.value)&&void 0!==e&&e.id&&w(null===N||void 0===N||null===(t=N.value)||void 0===t?void 0:t.id,[{topic_id:Number(i),status:1}])}),[N,i,w]),S=Object(a.useCallback)((function(e){var t,n,o;(p&&r&&r(!Boolean(null===e||void 0===e||null===(t=e.statement)||void 0===t||null===(n=t.verb)||void 0===n?void 0:n.id)),null!==e&&void 0!==e&&e.statement)&&C(String(null===N||void 0===N||null===(o=N.value)||void 0===o?void 0:o.id),Number(i),null===e||void 0===e?void 0:e.statement)}),[N,i,C,r,b]);if(Object(a.useEffect)((function(){p&&r&&r(!Boolean(null===k||void 0===k?void 0:k.can_skip))}),[r,k,p]),Object(a.useEffect)((function(){if(!c){var e=function(){return i&&!P(i)&&T(i)},t=setInterval((function(){e()}),5e3);return e(),function(){return clearInterval(t)}}}),[T,c,i,P]),!k)return Object(v.jsx)(l.a.Fragment,{});if(null===(t=k.topicable)||void 0===t||!t.value)return Object(v.jsx)("pre",{className:"error",children:"Error: topic.topicable?.value is missing"});if(k.topicable_type)switch(k.topicable_type){case d.TopicType.H5P:return Object(v.jsx)(g.H5Player,{onXAPI:function(e){return S(e)},h5pObject:k.topicable.content});case d.TopicType.OEmbed:return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(x.OEmbedPlayer,{url:k.topicable.value},i)});case d.TopicType.RichText:return Object(v.jsx)(m,{value:k.topicable.value,fontSize:_});case d.TopicType.Video:return Object(v.jsx)(h.AudioVideoPlayer,{mobile:y.isMobile,url:k.topicable.url,light:!0,onFinish:function(){return I()}});case d.TopicType.Image:return Object(v.jsx)(O.ImagePlayer,{topic:k,onLoad:function(){return I()}});case d.TopicType.Audio:return Object(v.jsx)(h.AudioVideoPlayer,{mobile:y.isMobile,audio:!0,url:k.topicable.value,light:!0,onFinish:function(){return I()}});case d.TopicType.Pdf:return Object(v.jsx)(E,{url:k.topicable.url,pageConfig:{renderMode:"svg",className:"course-pdf-player"}});case d.TopicType.Scorm:return Object(v.jsx)(M,{value:k});default:return Object(v.jsx)("pre",{children:k.topicable_type})}return Object(v.jsx)("pre",{children:"loading... (or error)"})}},713:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.react=t.API=void 0;var r=c(n(249));t.API=r;var s=c(n(66));t.react=s}}]);
//# sourceMappingURL=10.58ce22fb.chunk.js.map