(this["webpackJsonpescolalms-demo"]=this["webpackJsonpescolalms-demo"]||[]).push([[8],{404:function(e,t,n){"use strict";n.r(t);var o,c,i=n(92),r=n(0),s=n.n(r),l=n(12),a=n(48),u=n(438),d=n(150),b=n(6),p=n(54),j=n(682),v=n(525),m=n(505),f=n(456),O=n(463),x=n(52),h=n(232),g=n(212),T=n(17),y=n(15),N=n(8),P=n(51),E=n(233),C=n(42),I=n(1),_=N.default.div(o||(o=Object(p.a)(["\n  margin-top: 100px;\n"]))),M=function(e){var t=e.resources,n=e.subtitle,o=t.map((function(e){return{href:e.url,fileName:e.name}}));return Object(I.jsx)(_,{children:Object(I.jsx)(E.Downloads,{subtitle:n,title:Object(C.t)("CourseProgram.TopicAttachment"),downloads:o})})},w=n(444),S=N.default.section(c||(c=Object(p.a)(["\n  padding-bottom: 60px;\n  .main-title {\n    margin-bottom: 20px;\n  }\n  .course-nav {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: 100;\n  }\n"]))),k=function(e){var t,n,o=e.program,c=e.courseId,i=Object(O.a)(o),a=i.topic,u=i.lesson,d=i.onNextTopic,p=i.onPrevTopic,N=i.getNextPrevTopic,E=i.isDisabledNextTopicButton,_=i.setIsDisabledNextTopicButton,k=i.sendProgress,L=i.progress,D=Object(l.i)().topicID,A=Object(l.g)().push,F=3===Object(l.h)().pathname.split("/").length,R=Object(r.useMemo)((function(){return L&&L.value&&L.value.find((function(e){return e.course.id===Number(c)}))}),[L,c]),B=Object(r.useCallback)((function(){_&&_(!1),null!==o&&void 0!==o&&o.id&&k(null===o||void 0===o?void 0:o.id,[{topic_id:Number(D),status:1}])}),[o,D,_,k]),z=Object(r.useMemo)((function(){var e=R&&R.progress||[],t=e.filter((function(e){return e.status===j.API.CourseProgressItemElementStatus.IN_PROGRESS})).sort((function(e,t){return new Date(t.started_at).getTime()-new Date(e.started_at).getTime()}))[0];return t||e.filter((function(e){return e.status===j.API.CourseProgressItemElementStatus.INCOMPLETE}))[0]}),[R]),H=Object(r.useMemo)((function(){return z&&o.lessons.find((function(e){return e&&e.topics&&e.topics.some((function(e){return e.id===z.topic_id}))}))}),[o,z]);Object(r.useEffect)((function(){F&&H&&z&&A("/course/".concat(o.id,"/").concat(H.id,"/").concat(z.topic_id),null)}),[F,H,o,A,z]),Object(r.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[null===u||void 0===u?void 0:u.id,null===a||void 0===a?void 0:a.id]),Object(r.useEffect)((function(){N(Number(null===a||void 0===a?void 0:a.id))||k(o.id,[{topic_id:Number(null===a||void 0===a?void 0:a.id),status:1}])}),[null===a||void 0===a?void 0:a.id,o]);var V=u&&u.summary&&""!==Object(f.a)("".concat(u.summary))&&a&&a.summary&&""!==Object(f.a)("".concat(a.summary))?6:12;return Object(I.jsx)(s.a.Fragment,{children:Object(I.jsxs)(S,{className:"course-program-wrapper",children:[Object(I.jsxs)("div",{className:"container",children:[Object(I.jsx)(w.a,{items:[Object(I.jsx)(y.c,{to:"/",children:Object(C.t)("Home")}),Object(I.jsx)(y.c,{to:"/courses",children:Object(C.t)("Courses")}),Object(I.jsx)(T.Text,{size:"12",children:o.title})]}),Object(I.jsx)(x.Title,{className:"main-title",level:3,children:o.title}),Object(I.jsxs)("div",{className:"row flex-lg-row flex-column-reverse",children:[Object(I.jsx)("div",{className:"col-lg-9",children:Object(I.jsxs)("div",{className:"course-program-player",children:[Object(I.jsxs)("div",{className:"course-program-player-content",children:[a&&a.introduction&&""!==Object(f.a)("".concat(a.introduction))&&Object(I.jsx)(g.MarkdownRenderer,{children:a.introduction}),Object(I.jsx)("div",{className:"course-program-player-content__wrapper",style:Object(b.a)({},(null===a||void 0===a||null===(t=a.json)||void 0===t?void 0:t.wrapperStyle)||{}),children:Object(I.jsx)(v.a,{lessonId:Number(null===u||void 0===u?void 0:u.id),topicId:a&&Number(a.id),setIsDisabledNextTopicButton:_})})]}),Object(I.jsx)("div",{className:"course-program-content__container",children:Object(I.jsxs)("div",{className:"row",children:[u&&u.summary&&""!==Object(f.a)("".concat(u.summary))&&Object(I.jsx)("div",{className:"col-lg-".concat(V," col-md-").concat(V," col-sm-12"),children:Object(I.jsx)("div",{className:"course-program-summary",children:Object(I.jsx)(g.MarkdownRenderer,{children:u.summary})})}),a&&a.summary&&""!==Object(f.a)("".concat(a.summary))&&Object(I.jsx)("div",{className:"col-lg-".concat(V," col-md-").concat(V," col-sm-12"),children:Object(I.jsxs)("div",{className:"course-program-summary",children:[Object(I.jsx)(g.MarkdownRenderer,{children:a.summary}),a&&a.resources&&(null===(n=a.resources)||void 0===n?void 0:n.length)>0&&Object(I.jsx)(M,{resources:a.resources||[],subtitle:a.introduction||""})]})})]})})]})}),Object(I.jsx)("div",{className:"col-lg-3",children:Object(I.jsx)(m.a,{course:o,lessonId:Number(null===u||void 0===u?void 0:u.id),topicId:Number(null===a||void 0===a?void 0:a.id)})})]})]}),Object(I.jsx)("div",{className:"course-nav",children:Object(I.jsx)("div",{className:"container",children:Object(I.jsx)(h.CourseTopNav,{onFinish:function(){return B()},mobile:P.isMobile,onNext:d,isFinished:!1,onPrev:p,addNotes:!1,hasPrev:!!N(Number(null===a||void 0===a?void 0:a.id),!1),hasNext:!E})})})]})})},L=n(77),D=function(e){var t=e.error,n=Object(L.a)().t;return Object(I.jsx)(d.a,{children:Object(I.jsx)("div",{className:"d-table",children:Object(I.jsx)("div",{className:"d-table-cell",children:Object(I.jsx)("div",{className:"container box-wrapper",children:Object(I.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[Object(I.jsx)("h4",{className:"alert-heading",children:n("Error")}),Object(I.jsxs)("p",{children:[" ",t]}),Object(I.jsx)("hr",{}),Object(I.jsxs)("p",{className:"mb-0",children:[n("CoursePage.Preview.SeeOther")," ",Object(I.jsx)(y.c,{to:"/courses",children:n("Courses")}),"."]})]})})})})})},A=function(e){var t=e.program,n=null===t||void 0===t?void 0:t.scorm_sco,o=null===n||void 0===n?void 0:n.uuid,c=Object(r.useRef)(null),l=Object(r.useState)(0),u=Object(i.a)(l,2),d=u[0],b=u[1],p=Object(r.useContext)(a.EscolaLMSContext).apiUrl;return Object(r.useEffect)((function(){var e,t,n,o;c.current&&b((null===(e=c.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||null===(n=t.document)||void 0===n||null===(o=n.body)||void 0===o?void 0:o.scrollHeight)||0)}),[c]),n||o?Object(I.jsx)(s.a.Fragment,{children:Object(I.jsx)("div",{className:"container-fluid course-program",children:Object(I.jsx)("div",{className:"course-program-player scorm",style:{height:"".concat(610+d,"px")},children:Object(I.jsx)("iframe",{title:"scorm-player",ref:c,src:"".concat(p,"/api/scorm/play/").concat(o),scrolling:"no"})})})}):Object(I.jsx)(s.a.Fragment,{})};t.default=function(){var e,t=Object(l.i)().id,n=Object(r.useContext)(a.EscolaLMSContext),o=n.program,c=n.fetchProgram,i=n.fetchProgress;return Object(r.useEffect)((function(){t&&c(Number(t))}),[t]),Object(r.useEffect)((function(){i()}),[]),o.loading?Object(I.jsx)(u.a,{}):o.error?Object(I.jsx)(D,{error:o.error.message||o.error.error}):o.value&&null!==o&&void 0!==o&&null!==(e=o.value)&&void 0!==e&&e.scorm_sco_id?Object(I.jsx)(d.a,{metaTitle:o.value.title,children:Object(I.jsx)(A,{program:o.value})}):o.value&&o.value.lessons&&o.value.lessons.length?Object(I.jsx)(d.a,{metaTitle:o.value.title,children:Object(I.jsx)(k,{program:o.value,courseId:Number(t)})}):Object(I.jsx)(u.a,{})}},438:function(e,t,n){"use strict";var o,c=n(54),i=n(0),r=n(152),s=n(8),l=n(1),a=s.default.div(o||(o=Object(c.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n"])),(function(e){var t=e.theme;return"dark"===t.mode?t.backgroundDark:t.backgroundLight}));t.a=function(){var e=Object(s.useTheme)();return Object(i.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="inherit"}}),[]),Object(l.jsx)(a,{children:Object(l.jsx)(r.Spin,{color:e.primaryColor})})}},444:function(e,t,n){"use strict";var o,c=n(54),i=(n(0),n(211)),r=n(8),s=n(1),l=r.default.div(o||(o=Object(c.a)(["\n  margin-bottom: 15px;\n  a {\n    text-decoration: none;\n    color: ","!important;\n  }\n"])),(function(e){var t=e.theme;return"dark"===t.mode?t.gray5:t.gray2}));t.a=function(e){var t=e.items;return Object(s.jsx)(l,{children:Object(s.jsx)(i.BreadCrumbs,{items:t})})}},456:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(216),c=n.n(o),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replaceAll(/(\\\r\n|\\r\n|\\\n|\\n)/g,"\n").split("\n").map((function(e){if(!e.trim().length)return e;var t=e.replace(/\\+/g,"");return t.trim().length?e:t})).join("\n")},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("style=\u201d")?e.split("style=\u201d").map((function(e){return e.replace("\u201d",'"')})).join('style="'):e},s=function(e,t,n){return new RegExp("".concat(e,"(?<=(((\\n|\\s){1,}").concat(e,")|(^(").concat(e,"))))(.+?)(?=((").concat(t,"(\\n|\\s){1,})|(").concat(t,"$)))").concat(t),n)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(s("_{2}","_{2}","g"),"<ins>$6</ins>")},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(s(":{3}info",":{3}","gs"),'<div className="notice-block notice-block--info">$6</div>').replace(s(":{3}warning",":{3}","gs"),'<div className="notice-block notice-block--warning">$6</div>').replace(s(":{3}tip",":{3}","gs"),'<div className="notice-block notice-block--tip">$6</div>')},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return null===e||"null"===e?"":c()([i,r,l,a])(e)}},463:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(92),c=n(73),i=n(0),r=n(12);function s(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/course/",l=Object(i.useContext)(c.EscolaLMSContext),a=l.sendProgress,u=l.getNextPrevTopic,d=l.progress,b=Object(i.useState)(!1),p=Object(o.a)(b,2),j=p[0],v=p[1],m=Object(r.i)(),f=m.lessonID,O=m.topicID,x=Object(r.g)(),h=x.push,g=f||e.lessons[0].id,T=O||(e&&e.lessons&&e.lessons[0]&&e.lessons[0].topics&&(null===e||void 0===e||null===(t=e.lessons[0])||void 0===t||null===(n=t.topics[0])||void 0===n?void 0:n.id)||0),y=Object(i.useMemo)((function(){return e.lessons.find((function(e){return e.id===Number(g)}))}),[e,g]),N=Object(i.useMemo)((function(){return y&&y.topics&&y.topics.find((function(e){return e.id===Number(T)}))}),[y,T]),P=Object(i.useCallback)((function(){e.id&&a(e.id,[{topic_id:Number(T),status:1}]).then((function(){var t=u(Number(T));t&&h("".concat(s).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[T,e,h,u,a,s]),E=Object(i.useCallback)((function(){e.id&&a(e.id,[{topic_id:Number(T),status:1}]).then((function(){var t=u(Number(T),!1);t&&h("".concat(s).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[T,e,h,u,a,s]),C=Object(i.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=u(Number(T),t);n&&h("".concat(s).concat(e.id,"/").concat(null===n||void 0===n?void 0:n.lesson_id,"/").concat(null===n||void 0===n?void 0:n.id))}),[g,T,e,e.id,h,s]);return{topic:N,lesson:y,onNextTopic:P,onPrevTopic:E,getNextPrevTopic:u,isDisabledNextTopicButton:j,setIsDisabledNextTopicButton:v,onNextTopicPreview:C,sendProgress:a,progress:d}}},473:function(e,t){},498:function(e,t){},499:function(e,t){},500:function(e,t){},501:function(e,t){},502:function(e,t){},505:function(e,t,n){"use strict";var o,c=n(54),i=n(0),r=n.n(i),s=n(223),l=n(73),a=n(12),u=n(51),d=n(8),b=n(463),p=n(1),j=d.default.aside(o||(o=Object(c.a)(["\n  padding-bottom: 100px;\n"])));t.a=function(e){var t=e.course,n=(e.lessonId,e.topicId),o=Object(b.a)(t),c=o.setIsDisabledNextTopicButton,d=o.sendProgress,v=Object(a.g)(),m=((null===t||void 0===t?void 0:t.lessons)||[]).filter((function(e){var t;return e&&e.topics&&(null===e||void 0===e||null===(t=e.topics)||void 0===t?void 0:t.length)>0})),f=Object(i.useContext)(l.EscolaLMSContext).topicIsFinished,O=t.lessons.map((function(e){return e.topics})),x=[].concat.apply([],O).filter((function(e){return f(e.id)})).map((function(e){return e.id})),h=Object(i.useCallback)((function(){c&&c(!1),null!==t&&void 0!==t&&t.id&&d(null===t||void 0===t?void 0:t.id,[{topic_id:Number(n),status:1}])}),[m,n,c,d]);return t||m?Object(p.jsx)(j,{children:Object(p.jsx)(s.CourseAgenda,{mobile:u.isMobile,lessons:t.lessons,currentTopicId:n,finishedTopicIds:x,onMarkFinished:function(){return h()},onTopicClick:function(e){return v.push("/course/".concat(t.id,"/").concat(e.lesson_id,"/").concat(e.id))}})}):Object(p.jsx)(r.a.Fragment,{})}},525:function(e,t,n){"use strict";var o=n(0),c=n.n(o),i=n(48),r=n(155),s=n(212),l=n(1),a=["small","regular","bigger","big"],u=function(e){var t=e.value,n=e.onLoad,c=e.fontSize;return Object(o.useEffect)((function(){t&&n&&n()}),[t,n]),Object(l.jsx)("div",{className:"container-xl center-image-richtext typebase size-".concat(a[c]),children:t&&Object(l.jsx)(s.MarkdownRenderer,{children:t})})},d=n(503),b=n(496),p=n(494),j=n(504),v=n(497),m=n(51);t.a=function(e){var t,n,s,a=e.lessonId,f=e.topicId,O=e.preview,x=void 0!==O&&O,h=e.setIsDisabledNextTopicButton,g=e.customNoCompletedEventsIds,T=void 0===g?[]:g,y=Object(o.useContext)(i.EscolaLMSContext),N=y.program,P=y.topicPing,E=y.topicIsFinished,C=y.fontSize,I=y.sendProgress,_=y.h5pProgress,M=y.apiUrl,w=Object(o.useMemo)((function(){var e,t,n,o;return null===(e=N.value)||void 0===e||null===(t=e.lessons)||void 0===t||null===(n=t.find((function(e){return e.id===a})))||void 0===n||null===(o=n.topics)||void 0===o?void 0:o.find((function(e){return e.id===f}))}),[N,a,f]);Object(o.useEffect)((function(){h&&h(!1),(null===w||void 0===w?void 0:w.topicable_type)!==r.TopicType.Video&&(null===w||void 0===w?void 0:w.topicable_type)!==r.TopicType.Audio||h&&h(!0)}),[f,a,N,null===w||void 0===w?void 0:w.topicable_type,h]);var S=Object(o.useCallback)((function(){var e,t;(h&&h(!1),null!==N&&void 0!==N&&null!==(e=N.value)&&void 0!==e&&e.id)&&I(null===N||void 0===N||null===(t=N.value)||void 0===t?void 0:t.id,[{topic_id:Number(f),status:1}])}),[N,f,h,I]),k=Object(o.useCallback)((function(e){h&&h(!0),null!==e&&void 0!==e&&e.statement}),[N,f,_,h,T]);if(Object(o.useEffect)((function(){if(!x){var e=function(){return f&&!E(f)&&P(f)},t=setInterval((function(){e()}),5e3);return e(),function(){return clearInterval(t)}}}),[P,x,f,E]),!w)return Object(l.jsx)(c.a.Fragment,{});if(null===(t=w.topicable)||void 0===t||!t.value)return Object(l.jsx)("pre",{className:"error",children:"Error: topic.topicable?.value is missing"});if(w.topicable_type)switch(w.topicable_type){case r.TopicType.H5P:return Object(l.jsx)(j.H5P,{onXAPI:function(e){return k(e)},id:null===w||void 0===w||null===(n=w.topicable)||void 0===n?void 0:n.value});case r.TopicType.OEmbed:return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(p.OEmbedPlayer,{url:w.topicable.value,FallbackElement:Object(l.jsx)(j.H5P,{onXAPI:function(e){return k(e)},id:null===w||void 0===w||null===(s=w.topicable)||void 0===s?void 0:s.value})},f)});case r.TopicType.RichText:return Object(l.jsx)(u,{value:w.topicable.value,fontSize:C});case r.TopicType.Video:return Object(l.jsx)(b.AudioVideoPlayer,{mobile:m.isMobile,url:w.topicable.url,light:!0,onFinish:function(){return S()}});case r.TopicType.Image:return Object(l.jsx)(d.ImagePlayer,{topic:w,onLoad:function(){return S()}});case r.TopicType.Audio:return Object(l.jsx)(b.AudioVideoPlayer,{mobile:m.isMobile,audio:!0,url:w.topicable.value,light:!0,onFinish:function(){return S()}});case r.TopicType.Pdf:return Object(l.jsx)(v.PdfPlayer,{url:w.topicable.url});case r.TopicType.Scorm:return Object(l.jsx)("div",{className:"scorm-wrapper",children:Object(l.jsx)("iframe",{title:w.topicable.value,src:"".concat(M,"/api/scorm/play/").concat(w.topicable.uuid)})});default:return Object(l.jsx)("pre",{children:w.topicable_type})}return Object(l.jsx)("pre",{children:"loading... (or error)"})}},682:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var c=Object.getOwnPropertyDescriptor(t,n);c&&!("get"in c?!t.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,c)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return c(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.react=t.API=void 0;var r=i(n(683));t.API=r;var s=i(n(73));t.react=s},683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTypes=t.CourseProgressItemElementStatus=t.PaymentStatusType=t.TopicType=void 0,function(e){e.Unselected="",e.RichText="EscolaLms\\TopicTypes\\Models\\TopicContent\\RichText",e.OEmbed="EscolaLms\\TopicTypes\\Models\\TopicContent\\OEmbed",e.Audio="EscolaLms\\TopicTypes\\Models\\TopicContent\\Audio",e.Video="EscolaLms\\TopicTypes\\Models\\TopicContent\\Video",e.H5P="EscolaLms\\TopicTypes\\Models\\TopicContent\\H5P",e.Image="EscolaLms\\TopicTypes\\Models\\TopicContent\\Image",e.Pdf="EscolaLms\\TopicTypes\\Models\\TopicContent\\PDF",e.Scorm="EscolaLms\\TopicTypes\\Models\\TopicContent\\ScormSco"}(t.TopicType||(t.TopicType={})),function(e){e.NEW="new",e.PAID="paid",e.CANCELLED="cancelled"}(t.PaymentStatusType||(t.PaymentStatusType={})),function(e){e[e.INCOMPLETE=0]="INCOMPLETE",e[e.COMPLETE=1]="COMPLETE",e[e.IN_PROGRESS=2]="IN_PROGRESS"}(t.CourseProgressItemElementStatus||(t.CourseProgressItemElementStatus={})),function(e){e.OrderPaid="EscolaLms\\Cart\\Events\\OrderPaid",e.UserLogged="EscolaLms\\Auth\\Events\\UserLogged"}(t.EventTypes||(t.EventTypes={}))}}]);
//# sourceMappingURL=8.ce23ec51.chunk.js.map