{"version":3,"sources":["components/Course/CourseProgramLessonsPreview.tsx","pages/courses/preview/index.tsx"],"names":["CourseProgramLessonsPreview","_ref","_topic$json","program","topic","lesson","onNextTopicPreview","getNextPrevTopic","useLessonProgram","t","useTranslation","useEffect","window","scrollTo","top","behavior","id","_jsx","React","Fragment","children","className","_jsxs","title","introduction","Col","sm","md","lg","MarkdownRenderer","style","json","wrapperStyle","CourseProgramContent","preview","isThereAnotherTopic","Number","Row","summary","onClick","CourseSidebar","course","topicId","CourseProgramScorm","_program$scorm","_program$scorm$scos","sco","scorm","scos","find","undefined","entry_url","uuid","iframeRef","useRef","height","setHeight","useState","apiUrl","useContext","EscolaLMSContext","_iframeRef$current","_iframeRef$current$co","_iframeRef$current$co2","_iframeRef$current$co3","current","contentWindow","document","body","scrollHeight","concat","ref","src","scrolling","CourseProgram","_program$value","_program$value$scorm","useParams","fetchProgram","loading","Preloader","error","Container","role","message","Link","to","routeRoutes","courses","value","Layout","lessons","length"],"mappings":"0PAoGeA,MAzFVC,IAAkB,IAADC,EAAA,IAAhB,QAAEC,GAASF,EACf,MAAM,MAAEG,EAAK,OAAEC,EAAM,mBAAEC,EAAkB,iBAAEC,GACzCC,YAAiBL,EAAQ,sBAErB,EAAEM,GAAMC,cAMd,OAJAC,qBAAU,KACRC,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,UAAW,GAC9C,CAAM,OAALX,QAAK,IAALA,OAAK,EAALA,EAAOY,GAAU,OAANX,QAAM,IAANA,OAAM,EAANA,EAAQW,KAGrBC,cAACC,IAAMC,SAAQ,CAAAC,SACbH,cAAA,OAAKI,UAAU,qCAAoCD,SACjDH,cAAA,OAAKI,UAAU,2BAA0BD,SACvCE,eAAA,OAAKD,UAAU,wDAAuDD,SAAA,CACpEE,eAAA,OAAKD,UAAU,wBAAuBD,SAAA,CACpCE,eAAA,OAAKD,UAAU,gCAA+BD,SAAA,CAC5CH,cAAA,MAAAG,SAAU,OAALhB,QAAK,IAALA,OAAK,EAALA,EAAOmB,QACXnB,GAASA,EAAMoB,cACdP,cAACQ,MAAG,CAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAGR,SAC1BH,cAAA,OAAKI,UAAU,eAAcD,SAC3BH,cAACY,mBAAgB,CAAAT,SAAEhB,EAAMoB,mBAI/BP,cAAA,OACEI,UAAU,yCACVS,MAAO,KACK,OAAL1B,QAAK,IAALA,GAAW,QAANF,EAALE,EAAO2B,YAAI,IAAA7B,OAAN,EAALA,EAAa8B,eAA2B,CAAC,GAC9CZ,SAEFH,cAACgB,IAAoB,CACnBC,SAAS,EACT9B,MAAOA,EACP+B,sBAAuB5B,EAAiB6B,OAAY,OAALhC,QAAK,IAALA,OAAK,EAALA,EAAOY,YAK5DM,eAACe,MAAG,CAAAjB,SAAA,CACDf,GAAUA,EAAOiC,SAChBrB,cAACQ,MAAG,CAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAGR,SAC1BH,cAAA,OAAKI,UAAU,yBAAwBD,SACrCH,cAACY,mBAAgB,CAAAT,SAAEf,EAAOiC,cAI/BlC,GAASA,EAAMkC,SACdrB,cAACQ,MAAG,CAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAGR,SAC1BH,cAAA,OAAKI,UAAU,yBAAwBD,SACrCH,cAACY,mBAAgB,CAAAT,SAAEhB,EAAMkC,iBAmBjCrB,cAAA,OAAKI,UAAU,6BAA4BD,SACzCE,eAAA,UACED,UAAS,gCACTkB,QAASA,IAAMjC,IAAqBc,SAAA,CAEpCE,eAAA,OAAKD,UAAU,6CAA4CD,SAAA,CACxDX,EAAE,cAAc,QAEnBQ,cAAA,mBAINA,cAACuB,IAAa,CAACC,OAAQtC,EAASuC,QAASN,OAAY,OAALhC,QAAK,IAALA,OAAK,EAALA,EAAOY,cAI9C,E,iBClFrB,MAAM2B,EAA+D1C,IAE9D,IAAD2C,EAAAC,EAAA,IAFgE,QACpE1C,GACDF,EACC,MAAM6C,EAAa,OAAP3C,QAAO,IAAPA,GAAc,QAAPyC,EAAPzC,EAAS4C,aAAK,IAAAH,GAAM,QAANC,EAAdD,EAAgBI,YAAI,IAAAH,OAAb,EAAPA,EAAsBI,MAAMH,QAA0BI,IAAlBJ,EAAIK,YAC9CC,EAAU,OAAHN,QAAG,IAAHA,OAAG,EAAHA,EAAKM,KACZC,EAAYC,iBAA0B,OACrCC,EAAQC,GAAaC,mBAAS,IAE/B,OAAEC,GAAWC,qBAAWC,oBAU9B,OARAjD,qBAAU,KACgB,IAADkD,EAAAC,EAAAC,EAAAC,EAAnBX,EAAUY,SACZT,GACmB,QAAjBK,EAAAR,EAAUY,eAAO,IAAAJ,GAAe,QAAfC,EAAjBD,EAAmBK,qBAAa,IAAAJ,GAAU,QAAVC,EAAhCD,EAAkCK,gBAAQ,IAAAJ,GAAM,QAANC,EAA1CD,EAA4CK,YAAI,IAAAJ,OAA/B,EAAjBA,EAAkDK,eAAgB,EAEtE,GACC,CAAChB,IAECP,GAAQM,EAKXnC,cAACC,IAAMC,SAAQ,CAAAC,SACbH,cAAA,OAAKI,UAAU,iCAAgCD,SAC7CH,cAAA,OACEI,UAAU,8BACVS,MAAO,CACLyB,OAAO,GAADe,OArBc,IAqBef,EAAM,OACzCnC,SAEFH,cAAA,UACEM,MAAO,eACPgD,IAAKlB,EACLmB,IAAG,GAAAF,OAAKZ,EAAM,oBAAAY,OAAmBlB,GACjCqB,UAAU,aAhBXxD,cAACC,IAAMC,SAAQ,GAoBL,EAsDNuD,UAlDOA,KAAO,IAADC,EAAAC,EAC1B,MAAM,EAAEnE,GAAMC,eAER,GAAEM,GAAO6D,eACT,QAAE1E,EAAO,aAAE2E,GAAiBnB,qBAAWC,oBAQ7C,OANAjD,qBAAU,KACJK,GACF8D,EAAa1C,OAAOpB,GACtB,GACC,CAACA,EAAI8D,IAEJ3E,EAAQ4E,QACH9D,cAAC+D,IAAS,IAGf7E,EAAQ8E,MAERhE,cAACiE,IAAS,CAAA9D,SACRE,eAAA,OAAKD,UAAU,qBAAqB8D,KAAK,QAAO/D,SAAA,CAC9CH,cAAA,MAAII,UAAU,gBAAeD,SAAEX,EAAE,WACjCa,eAAA,KAAAF,SAAA,CAAG,IAAEjB,EAAQ8E,MAAMG,SAAWjF,EAAQ8E,MAAMA,SAC5ChE,cAAA,SACAK,eAAA,KAAGD,UAAU,OAAMD,SAAA,CAChBX,EAAE,+BACHQ,cAACoE,IAAI,CAACC,GAAIC,IAAYC,QAAQpE,SAAEX,EAAE,aAAkB,YAO1DN,EAAQsF,OAAgB,OAAPtF,QAAO,IAAPA,GAAc,QAAPwE,EAAPxE,EAASsF,aAAK,IAAAd,GAAO,QAAPC,EAAdD,EAAgB5B,aAAK,IAAA6B,GAArBA,EAAuB5D,GAExCC,cAACyE,IAAM,CAAAtE,SACLH,cAAC0B,EAAkB,CAACxC,QAASA,EAAQsF,UAIvCtF,EAAQsF,OAAStF,EAAQsF,MAAME,SAAWxF,EAAQsF,MAAME,QAAQC,OAEhEtE,eAACoE,IAAM,CAAAtE,SAAA,CACLH,cAACjB,EAA2B,CAACG,QAASA,EAAQsF,QAAS,OAKtDxE,cAAC+D,IAAS,GAAG,C","file":"static/js/53.fe910eac.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport CourseProgramContent from \"@/components/Course/CourseProgramContent\";\nimport CourseSidebar from \"@/components/Course/CourseSidebar\";\nimport { useLessonProgram } from \"@/hooks/useLessonProgram\";\nimport { useTranslation } from \"react-i18next\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport { Col, Row } from \"react-grid-system\";\n\nexport const CourseProgramLessonsPreview: React.FC<{\n  program: API.CourseProgram;\n}> = ({ program }) => {\n  const { topic, lesson, onNextTopicPreview, getNextPrevTopic } =\n    useLessonProgram(program, `/courses/preview/`);\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [topic?.id, lesson?.id]);\n\n  return (\n    <React.Fragment>\n      <div className=\"course-program course-program-page\">\n        <div className=\"course-program-container\">\n          <div className=\"course-program-wrapper course-program-wrapper-preview\">\n            <div className=\"course-program-player\">\n              <div className=\"course-program-player-content\">\n                <h2>{topic?.title}</h2>\n                {topic && topic.introduction && (\n                  <Col sm={12} md={12} lg={12}>\n                    <div className=\"container-md\">\n                      <MarkdownRenderer>{topic.introduction}</MarkdownRenderer>\n                    </div>\n                  </Col>\n                )}\n                <div\n                  className=\"course-program-player-content__wrapper\"\n                  style={{\n                    ...((topic?.json?.wrapperStyle as object) || {}),\n                  }}\n                >\n                  <CourseProgramContent\n                    preview={true}\n                    topic={topic}\n                    isThereAnotherTopic={!!getNextPrevTopic(Number(topic?.id))}\n                  />\n                </div>\n              </div>\n\n              <Row>\n                {lesson && lesson.summary && (\n                  <Col sm={12} md={12} lg={12}>\n                    <div className=\"course-program-summary\">\n                      <MarkdownRenderer>{lesson.summary}</MarkdownRenderer>\n                    </div>\n                  </Col>\n                )}\n                {topic && topic.summary && (\n                  <Col sm={12} md={12} lg={12}>\n                    <div className=\"course-program-summary\">\n                      <MarkdownRenderer>{topic.summary}</MarkdownRenderer>\n                      {/* Leave it in case the business changes its mind. */}\n                      {/* {topic && topic.resources && topic.resources?.length > 0 && (\n                        <React.Fragment>\n                          <h3>{t('CourseProgram.TopicAttachment')}</h3>\n                          <div className=\"file-list\">\n                            {topic.resources.map((resource) => (\n                              <a target=\"_blank\" href={resource.url} rel=\"noreferrer\">\n                                {resource.name}\n                              </a>\n                            ))}\n                          </div>\n                        </React.Fragment>\n                      )} */}\n                    </div>\n                  </Col>\n                )}\n              </Row>\n\n              <div className=\"course-program-player-next\">\n                <button\n                  className={`default-btn default-btn-equal`}\n                  onClick={() => onNextTopicPreview()}\n                >\n                  <div className=\"course-program-player-next-button__wrapper\">\n                    {t(\"Next Topic\")} &gt;\n                  </div>\n                  <span></span>\n                </button>\n              </div>\n            </div>\n            <CourseSidebar course={program} topicId={Number(topic?.id)} />\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default CourseProgramLessonsPreview;\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { useTranslation } from \"react-i18next\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport Preloader from \"@/components/Preloader\";\nimport Layout from \"@/components/_App/Layout\";\n\nimport CourseProgramLessonsPreview from \"@/components/Course/CourseProgramLessonsPreview\";\nimport Container from \"@/components/Container\";\nimport routeRoutes from \"@/components/Routes/routes\";\n\n// TODO: 99% same as: src/pages/course/index.tsx\n\nconst CourseProgramScorm: React.FC<{ program: API.CourseProgram }> = ({\n  program,\n}) => {\n  const sco = program?.scorm?.scos?.find((sco) => sco.entry_url !== undefined);\n  const uuid = sco?.uuid;\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const [height, setHeight] = useState(0);\n  const headerAndFooterHeight = 610;\n  const { apiUrl } = useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (iframeRef.current) {\n      setHeight(\n        iframeRef.current?.contentWindow?.document?.body?.scrollHeight || 0\n      );\n    }\n  }, [iframeRef]);\n\n  if (!sco && !uuid) {\n    return <React.Fragment />;\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"container-fluid course-program\">\n        <div\n          className=\"course-program-player scorm\"\n          style={{\n            height: `${headerAndFooterHeight + height}px`,\n          }}\n        >\n          <iframe\n            title={\"scorm-player\"}\n            ref={iframeRef}\n            src={`${apiUrl}/api/scorm/play/${uuid}`}\n            scrolling=\"no\"\n          />\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nconst CourseProgram = () => {\n  const { t } = useTranslation();\n\n  const { id } = useParams<{ id: string }>();\n  const { program, fetchProgram } = useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (id) {\n      fetchProgram(Number(id));\n    }\n  }, [id, fetchProgram]);\n\n  if (program.loading) {\n    return <Preloader />;\n  }\n\n  if (program.error) {\n    return (\n      <Container>\n        <div className=\"alert alert-danger\" role=\"alert\">\n          <h4 className=\"alert-heading\">{t(\"Error\")}</h4>\n          <p> {program.error.message || program.error.error}</p>\n          <hr />\n          <p className=\"mb-0\">\n            {t(\"CoursePage.Preview.SeeOther\")}\n            <Link to={routeRoutes.courses}>{t(\"Courses\")}</Link>.\n          </p>\n        </div>\n      </Container>\n    );\n  }\n\n  if (program.value && program?.value?.scorm?.id) {\n    return (\n      <Layout>\n        <CourseProgramScorm program={program.value} />\n      </Layout>\n    );\n  }\n  if (program.value && program.value.lessons && program.value.lessons.length) {\n    return (\n      <Layout>\n        <CourseProgramLessonsPreview program={program.value} />;\n      </Layout>\n    );\n  }\n\n  return <Preloader />;\n};\n\nexport default CourseProgram;\n"],"sourceRoot":""}