{"version":3,"sources":["components/Course/CourseProgramLessonsPreview.tsx","pages/courses/preview/index.tsx","components/Preloader/index.tsx","hooks/useLessonProgram.ts","components/Course/Players/ScormPlayer.tsx","components/Course/CourseSidebar/index.tsx","components/Course/Players/TextPlayer.tsx","components/Course/CourseProgramContent.tsx"],"names":["CourseProgramLessonsPreview","_ref","_topic$json","program","_useLessonProgram","useLessonProgram","topic","lesson","onNextTopicPreview","getNextPrevTopic","t","useTranslation","useEffect","window","scrollTo","top","behavior","id","_jsx","React","Fragment","children","className","_jsxs","title","introduction","Col","sm","md","lg","MarkdownRenderer","style","_objectSpread","json","wrapperStyle","CourseProgramContent","preview","lessonId","Number","topicId","isThereAnotherTopic","Row","summary","onClick","CourseSidebar","course","CourseProgramScorm","_program$scorm","_program$scorm$scos","sco","scorm","scos","find","undefined","entry_url","uuid","iframeRef","useRef","_useState","useState","_useState2","_slicedToArray","height","setHeight","apiUrl","useContext","EscolaLMSContext","_iframeRef$current","_iframeRef$current$co","_iframeRef$current$co2","_iframeRef$current$co3","current","contentWindow","document","body","scrollHeight","concat","ref","src","scrolling","CourseProgram","_program$value","_program$value$scorm","useParams","_useContext2","fetchProgram","loading","Preloader","error","Container","role","message","Link","to","value","Layout","lessons","length","StyledLoader","styled","div","_templateObject","_taggedTemplateLiteral","theme","mode","dm__background","background","useTheme","overflow","Spin","color","primaryColor","_program$lessons$","_program$lessons$$top","courseRouteName","arguments","_useContext","sendProgress","progress","isNextTopicButtonDisabled","disableNextTopicButton","_useParams","lessonID","topicID","push","useHistory","topics","useMemo","onNextTopic","useCallback","topic_id","status","then","nextTopic","lesson_id","onPrevTopic","prevTopic","next","StyledDiv","props","fullview","css","_templateObject2","_templateObject3","ScormPlayer","fullView","setFullView","Button","ResizeIcon","StyledSidebar","aside","isMobile","_ref2","onCourseFinish","courseProgressDetails","history","agendaVisible","setAgendaVisible","filter","_lesson$topics","topicIsFinished","allTopics","map","item","arrayOfTopics","apply","onCompleteTopic","getCourseProgress","_progress$value$find","courseId","byId","courseProgress","finishedTopics","some","progressItem","CourseAgenda","onNextTopicClick","forEach","lIndex","tIndex","mobile","currentTopicId","finishedTopicIds","onMarkFinished","onTopicClick","onCourseFinished","fontSizes","TextPlayer","onLoad","fontSize","components","a","underline","StyledPdfPlayer","PdfPlayer","_topic$topicable","_ref$preview","_ref$customNoComplete","customNoCompletedEventsIds","_ref$isThereAnotherTo","topicPing","h5pProgress","_program$value$lesson","_program$value$lesson2","_program$value$lesson3","_program$value2","_program$value3","onXAPI","event","_event$statement","_event$statement$verb","_program$value4","Boolean","statement","verb","String","isTopicFinished","can_skip","ping","interval","setInterval","clearInterval","topicable","topicable_type","TopicType","H5P","H5Player","e","h5pObject","content","OEmbed","_Fragment","OEmbedPlayer","url","RichText","Video","AudioVideoPlayer","light","onFinish","Image","ImagePlayer","Audio","audio","Pdf","pageConfig","renderMode","Scorm","API","GiftQuiz","GiftQuizPlayer"],"mappings":"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","file":"static/js/13.eba4e69d.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport CourseProgramContent from \"@/components/Course/CourseProgramContent\";\nimport CourseSidebar from \"@/components/Course/CourseSidebar\";\nimport { useLessonProgram } from \"../../hooks/useLessonProgram\";\nimport { useTranslation } from \"react-i18next\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport { Col, Row } from \"react-grid-system\";\n\nexport const CourseProgramLessonsPreview: React.FC<{\n  program: API.CourseProgram;\n}> = ({ program }) => {\n  const { topic, lesson, onNextTopicPreview, getNextPrevTopic } =\n    useLessonProgram(program, `/courses/preview/`);\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [topic?.id, lesson?.id]);\n\n  return (\n    <React.Fragment>\n      <div className=\"course-program course-program-page\">\n        <div className=\"course-program-container\">\n          <div className=\"course-program-wrapper course-program-wrapper-preview\">\n            <div className=\"course-program-player\">\n              <div className=\"course-program-player-content\">\n                <h2>{topic?.title}</h2>\n                {topic && topic.introduction && (\n                  <Col sm={12} md={12} lg={12}>\n                    <div className=\"container-md\">\n                      <MarkdownRenderer>{topic.introduction}</MarkdownRenderer>\n                    </div>\n                  </Col>\n                )}\n                <div\n                  className=\"course-program-player-content__wrapper\"\n                  style={{\n                    ...((topic?.json?.wrapperStyle as object) || {}),\n                  }}\n                >\n                  <CourseProgramContent\n                    preview={true}\n                    lessonId={Number(lesson?.id)}\n                    topicId={Number(topic?.id)}\n                    isThereAnotherTopic={!!getNextPrevTopic(Number(topic?.id))}\n                  />\n                </div>\n              </div>\n\n              <Row>\n                {lesson && lesson.summary && (\n                  <Col sm={12} md={12} lg={12}>\n                    <div className=\"course-program-summary\">\n                      <MarkdownRenderer>{lesson.summary}</MarkdownRenderer>\n                    </div>\n                  </Col>\n                )}\n                {topic && topic.summary && (\n                  <Col sm={12} md={12} lg={12}>\n                    <div className=\"course-program-summary\">\n                      <MarkdownRenderer>{topic.summary}</MarkdownRenderer>\n                      {/* Leave it in case the business changes its mind. */}\n                      {/* {topic && topic.resources && topic.resources?.length > 0 && (\n                        <React.Fragment>\n                          <h3>{t('CourseProgram.TopicAttachment')}</h3>\n                          <div className=\"file-list\">\n                            {topic.resources.map((resource) => (\n                              <a target=\"_blank\" href={resource.url} rel=\"noreferrer\">\n                                {resource.name}\n                              </a>\n                            ))}\n                          </div>\n                        </React.Fragment>\n                      )} */}\n                    </div>\n                  </Col>\n                )}\n              </Row>\n\n              <div className=\"course-program-player-next\">\n                <button\n                  className={`default-btn default-btn-equal`}\n                  onClick={() => onNextTopicPreview()}\n                >\n                  <div className=\"course-program-player-next-button__wrapper\">\n                    {t(\"Next Topic\")} &gt;\n                  </div>\n                  <span></span>\n                </button>\n              </div>\n            </div>\n            <CourseSidebar\n              course={program}\n              lessonId={Number(lesson?.id)}\n              topicId={Number(topic?.id)}\n            />\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default CourseProgramLessonsPreview;\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { useTranslation } from \"react-i18next\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport Preloader from \"@/components/Preloader\";\nimport Layout from \"@/components/_App/Layout\";\n\nimport CourseProgramLessonsPreview from \"@/components/Course/CourseProgramLessonsPreview\";\nimport Container from \"@/components/Container\";\n\n// TODO: 99% same as: src/pages/course/index.tsx\n\nconst CourseProgramScorm: React.FC<{ program: API.CourseProgram }> = ({\n  program,\n}) => {\n  const sco = program?.scorm?.scos?.find((sco) => sco.entry_url !== undefined);\n  const uuid = sco?.uuid;\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const [height, setHeight] = useState(0);\n  const headerAndFooterHeight = 610;\n  const { apiUrl } = useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (iframeRef.current) {\n      setHeight(\n        iframeRef.current?.contentWindow?.document?.body?.scrollHeight || 0\n      );\n    }\n  }, [iframeRef]);\n\n  if (!sco && !uuid) {\n    return <React.Fragment />;\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"container-fluid course-program\">\n        <div\n          className=\"course-program-player scorm\"\n          style={{\n            height: `${headerAndFooterHeight + height}px`,\n          }}\n        >\n          <iframe\n            title={\"scorm-player\"}\n            ref={iframeRef}\n            src={`${apiUrl}/api/scorm/play/${uuid}`}\n            scrolling=\"no\"\n          />\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nconst CourseProgram = () => {\n  const { t } = useTranslation();\n\n  const { id } = useParams<{ id: string }>();\n  const { program, fetchProgram } = useContext(EscolaLMSContext);\n\n  useEffect(() => {\n    if (id) {\n      fetchProgram(Number(id));\n    }\n  }, [id, fetchProgram]);\n\n  if (program.loading) {\n    return <Preloader />;\n  }\n\n  if (program.error) {\n    return (\n      <Container>\n        <div className=\"alert alert-danger\" role=\"alert\">\n          <h4 className=\"alert-heading\">{t(\"Error\")}</h4>\n          <p> {program.error.message || program.error.error}</p>\n          <hr />\n          <p className=\"mb-0\">\n            {t(\"CoursePage.Preview.SeeOther\")}\n            <Link to=\"/courses\">{t(\"Courses\")}</Link>.\n          </p>\n        </div>\n      </Container>\n    );\n  }\n\n  if (program.value && program?.value?.scorm?.id) {\n    return (\n      <Layout>\n        <CourseProgramScorm program={program.value} />\n      </Layout>\n    );\n  }\n  if (program.value && program.value.lessons && program.value.lessons.length) {\n    return (\n      <Layout>\n        <CourseProgramLessonsPreview program={program.value} />;\n      </Layout>\n    );\n  }\n\n  return <Preloader />;\n};\n\nexport default CourseProgram;\n","import { useEffect } from \"react\";\nimport { Spin } from \"@escolalms/components/lib/components/atoms/Spin/Spin\";\nimport styled, { useTheme } from \"styled-components\";\n\nconst StyledLoader = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${({ theme }) =>\n    theme.mode === \"dark\" ? theme.dm__background : theme.background};\n`;\n\nconst Preloader = () => {\n  const theme = useTheme();\n  useEffect(() => {\n    document.body.style.overflow = \"hidden\";\n\n    return () => {\n      document.body.style.overflow = \"inherit\";\n    };\n  }, []);\n\n  return (\n    <StyledLoader>\n      <Spin color={theme.primaryColor} />\n    </StyledLoader>\n  );\n};\n\nexport default Preloader;\n","import { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useCallback, useContext, useMemo, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nexport function useLessonProgram(\n  program: API.CourseProgram,\n  courseRouteName: string = \"/course/\"\n) {\n  const { sendProgress, getNextPrevTopic, progress } =\n    useContext(EscolaLMSContext);\n  const [isNextTopicButtonDisabled, disableNextTopicButton] = useState(false);\n  const { lessonID, topicID } =\n    useParams<{ lessonID: string; topicID: string }>();\n  const { push } = useHistory();\n\n  const lessonId = lessonID ? lessonID : program.lessons[0].id;\n  const topicId = topicID\n    ? topicID\n    : (program &&\n        program.lessons &&\n        program.lessons[0] &&\n        program.lessons[0].topics &&\n        program?.lessons[0]?.topics[0]?.id) ||\n      0;\n\n  const lesson: API.Lesson | undefined = useMemo(\n    () => program.lessons.find((lesson) => lesson.id === Number(lessonId)),\n    [program, lessonId]\n  );\n\n  const topic: API.Topic | undefined = useMemo(\n    () =>\n      lesson &&\n      lesson.topics &&\n      lesson.topics.find((topic) => topic.id === Number(topicId)),\n    [lesson, topicId]\n  );\n\n  const onNextTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const nextTopic = getNextPrevTopic(Number(topicId));\n\n          nextTopic &&\n            push(\n              `${courseRouteName}${program.id}/${nextTopic.lesson_id}/${nextTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n  const onPrevTopic = useCallback(() => {\n    program.id &&\n      sendProgress(program.id, [{ topic_id: Number(topicId), status: 1 }]).then(\n        () => {\n          const prevTopic = getNextPrevTopic(Number(topicId), false);\n\n          prevTopic &&\n            push(\n              `${courseRouteName}${program.id}/${prevTopic.lesson_id}/${prevTopic.id}`,\n              null\n            );\n        }\n      );\n  }, [topicId, program, push, getNextPrevTopic, sendProgress, courseRouteName]);\n\n  const onNextTopicPreview = useCallback(\n    (next = true) => {\n      const nextTopic = getNextPrevTopic(Number(topicId), next);\n\n      nextTopic &&\n        push(\n          `${courseRouteName}${program.id}/${nextTopic?.lesson_id}/${nextTopic?.id}`\n        );\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [lessonId, topicId, program, program.id, push, courseRouteName]\n  );\n\n  return {\n    topic,\n    lesson,\n    onNextTopic,\n    onPrevTopic,\n    getNextPrevTopic,\n    isNextTopicButtonDisabled,\n    disableNextTopicButton,\n    onNextTopicPreview,\n    sendProgress,\n    progress,\n  } as const;\n}\n","import React, {\n  ReactElement,\n  FunctionComponent,\n  useContext,\n  useState,\n} from \"react\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport styled, { css } from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { ResizeIcon } from \"../../../icons\";\n\nconst StyledDiv = styled.div<{ fullview: boolean }>`\n  > button {\n    position: fixed;\n    right: 5px;\n    bottom: 5px;\n    z-index: 9999;\n    svg path {\n      fill: white;\n    }\n  }\n  iframe {\n    border: none;\n    display: block;\n    width: 100%;\n  }\n  ${(props) => {\n    if (props.fullview) {\n      return css`\n        iframe {\n          position: fixed;\n          top: 90px;\n          left: 0;\n          height: calc(100% - 90px - 80px);\n\n          z-index: 9999;\n        }\n      `;\n    } else {\n      return css`\n        display: flex;\n\n        min-height: 80vh;\n        max-height: 80vh;\n        height: 100vh;\n        iframe {\n          height: 100%;\n        }\n      `;\n    }\n  }}\n`;\n\ninterface ScormPlayerProps {\n  title: string;\n  uuid: string;\n}\n\nconst ScormPlayer: FunctionComponent<{\n  value: ScormPlayerProps;\n}> = ({ value }): ReactElement => {\n  const { apiUrl } = useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n  const [fullView, setFullView] = useState(false);\n\n  return (\n    <div className=\"scorm-wrapper\">\n      <StyledDiv fullview={fullView}>\n        <Button onClick={() => setFullView(!fullView)}>\n          {\" \"}\n          {t(\"Scorm.Resize\")} <ResizeIcon />\n        </Button>\n        <iframe\n          title={value.title}\n          src={`${apiUrl}/api/scorm/play/${value.uuid}`}\n        />\n      </StyledDiv>\n    </div>\n  );\n};\n\nexport default ScormPlayer;\n","import React, { useCallback, useContext, useState, useMemo } from \"react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { CourseAgenda } from \"@escolalms/components/lib/components/organisms/CourseAgenda/CourseAgenda\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useHistory } from \"react-router-dom\";\nimport { isMobile } from \"react-device-detect\";\nimport styled, { css } from \"styled-components\";\nimport { useLessonProgram } from \"../../../hooks/useLessonProgram\";\nimport { Button } from \"@escolalms/components\";\nimport { t } from \"i18next\";\nimport { Topic } from \"@escolalms/sdk/lib/types/api\";\n\nconst StyledSidebar = styled.aside`\n  padding-bottom: 100px;\n  .show-agenda-btn {\n    width: 100%;\n  }\n  .agenda-wrapper {\n    ${isMobile &&\n    css`\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      transform: translate(100%, 0);\n      transition: transform 0.25s;\n      overflow: scroll;\n      padding: 40px 0 55px;\n      z-index: 10;\n      background-color: ${({ theme }) =>\n        theme.mode === \"dark\" ? theme.dm__background : theme.background};\n\n      &--visible {\n        transform: translate(0, 0);\n      }\n\n      .hide-agenda-btn {\n        display: block;\n        margin: 0 15px 0 auto;\n      }\n    `}\n  }\n`;\n\nexport const CourseSidebar: React.FC<{\n  course: API.CourseProgram;\n  lessonId: number;\n  topicId: number;\n  onCourseFinish?: () => void;\n}> = ({ course, lessonId, topicId, onCourseFinish }) => {\n  const { disableNextTopicButton, sendProgress, progress } =\n    useLessonProgram(course);\n  const { courseProgressDetails } = useContext(EscolaLMSContext);\n\n  const history = useHistory();\n  const [agendaVisible, setAgendaVisible] = useState(false);\n  const program = (course?.lessons || []).filter(\n    (lesson) => lesson && lesson.topics && lesson?.topics?.length > 0\n  ) as API.Lesson[];\n  const { topicIsFinished } = useContext(EscolaLMSContext);\n  const allTopics = course.lessons.map((item) => item.topics);\n  //@ts-ignore\n  const arrayOfTopics = [].concat.apply([], allTopics);\n\n  const onCompleteTopic = useCallback((): void => {\n    disableNextTopicButton && disableNextTopicButton(false);\n    if (course?.id) {\n      sendProgress(course?.id, [{ topic_id: Number(topicId), status: 1 }]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [program, topicId, disableNextTopicButton, sendProgress]);\n\n  const getCourseProgress = useMemo(() => {\n    const courseId = course.id;\n    if (\n      courseProgressDetails &&\n      courseProgressDetails.byId &&\n      courseProgressDetails.byId[Number(courseId)] &&\n      courseProgressDetails.byId[Number(courseId)].value\n    ) {\n      return courseProgressDetails.byId[Number(courseId)].value;\n    }\n    return (\n      progress &&\n      progress.value &&\n      progress.value.find(\n        (courseProgress: API.CourseProgressItem) =>\n          courseProgress.course.id === Number(courseId)\n      )?.progress\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [progress, course]);\n\n  const finishedTopics = arrayOfTopics\n    .filter((item: API.Topic) => {\n      return (\n        topicIsFinished(item.id) ||\n        getCourseProgress?.some(\n          (progressItem) =>\n            progressItem.topic_id === item.id && progressItem.status === 1\n        )\n      );\n    })\n    .map((item: API.Topic) => item.id);\n\n  if (!course && !program) {\n    return <React.Fragment />;\n  }\n  return (\n    <StyledSidebar>\n      {isMobile && (\n        <Button\n          mode=\"outline\"\n          className=\"show-agenda-btn\"\n          onClick={() => setAgendaVisible(true)}\n        >\n          {t(\"CourseProgram.ShowAgenda\")}\n        </Button>\n      )}\n      <div\n        className={`${\n          agendaVisible\n            ? \"agenda-wrapper agenda-wrapper--visible\"\n            : \"agenda-wrapper\"\n        }`}\n      >\n        {isMobile && (\n          <Button\n            className=\"hide-agenda-btn\"\n            mode=\"secondary\"\n            onClick={() => setAgendaVisible(false)}\n          >\n            &#10005;\n          </Button>\n        )}\n        <CourseAgenda\n          onNextTopicClick={() => {\n            let nextTopic;\n\n            course.lessons.forEach((lesson, lIndex, lessons) => {\n              lesson.topics &&\n                lesson.topics.forEach((topic, tIndex) => {\n                  if (topic.id === topicId) {\n                    // try find next topic in current lesson\n                    if (lesson.topics && lesson.topics[tIndex + 1]) {\n                      nextTopic =\n                        lesson.topics[tIndex + 1] && lesson.topics[tIndex + 1];\n                      // try find first topic in next lesson\n                    } else if (lessons[lIndex + 1]) {\n                      nextTopic =\n                        lessons[lIndex + 1].topics &&\n                        //@ts-ignore\n                        lessons[lIndex + 1].topics[0];\n                      // otherwise this is end so going back to first lesson and topic\n                    } else {\n                      nextTopic = lessons[0].topics && lessons[0].topics[0];\n                    }\n                  }\n                });\n            });\n\n            if (nextTopic) {\n              history.push(\n                `/course/${course.id}/${(nextTopic as Topic).lesson_id}/${\n                  (nextTopic as Topic).id\n                }`\n              );\n              setAgendaVisible(false);\n            }\n          }}\n          mobile={isMobile}\n          lessons={course.lessons}\n          currentTopicId={topicId}\n          finishedTopicIds={finishedTopics}\n          onMarkFinished={() => onCompleteTopic()}\n          onTopicClick={(topic) => {\n            history.push(`/course/${course.id}/${topic.lesson_id}/${topic.id}`);\n            setAgendaVisible(false);\n          }}\n          onCourseFinished={() => onCourseFinish?.()}\n        />\n      </div>\n    </StyledSidebar>\n  );\n};\n\nexport default CourseSidebar;\n","import { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport React, { ReactElement, FunctionComponent, useEffect } from \"react\";\nimport { Link } from \"@escolalms/components/lib/components/atoms/Link/Link\";\n\nconst fontSizes = [\"small\", \"regular\", \"bigger\", \"big\"];\n\nconst TextPlayer: FunctionComponent<{\n  value?: string;\n  onLoad?: () => void;\n  fontSize: number;\n}> = ({ value, onLoad, fontSize }): ReactElement => {\n  useEffect(() => {\n    value && onLoad && onLoad();\n  }, [value, onLoad]);\n\n  return (\n    <div\n      className={`center-image-richtext typebase size-${fontSizes[fontSize]}`}\n    >\n      {value && (\n        <MarkdownRenderer\n          components={{\n            a: (props) => <Link {...props} underline />,\n          }}\n        >\n          {value}\n        </MarkdownRenderer>\n      )}\n    </div>\n  );\n};\n\nexport default TextPlayer;\n","import React, { useContext, useEffect, useMemo, useCallback } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { TopicType } from \"@escolalms/sdk/lib/services/courses\";\nimport { XAPIEvent } from \"@escolalms/h5p-react\";\nimport TextPlayer from \"./Players/TextPlayer\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { ImagePlayer } from \"@escolalms/components/lib/components/players/ImagePlayer/ImagePlayer\";\nimport { AudioVideoPlayer } from \"@escolalms/components/lib/components/players/AudioVideoPlayer/AudioVideoPlayer\";\nimport { OEmbedPlayer } from \"@escolalms/components/lib/components/players/OEmbedPlayer/OEmbedPlayer\";\nimport { H5Player } from \"@escolalms/components/lib/components/players/H5Player/H5Player\";\nimport { PdfPlayer } from \"@escolalms/components/lib/components/players/PdfPlayer/PdfPlayer\";\nimport { isMobile } from \"react-device-detect\";\nimport ScormPlayer from \"./Players/ScormPlayer\";\nimport styled from \"styled-components\";\nimport GiftQuizPlayer from \"@escolalms/components/lib/components/quizzes\";\n\nconst StyledPdfPlayer = styled(PdfPlayer)`\n  .course-pdf-player {\n    .react-pdf__Page__svg,\n    svg {\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n`;\n\nexport const CourseProgramContent: React.FC<{\n  lessonId: number;\n  isThereAnotherTopic?: boolean;\n  topicId?: number;\n  preview?: boolean;\n  customNoCompletedEventsIds?: string[];\n  disableNextTopicButton?: (b: boolean) => void;\n}> = ({\n  lessonId,\n  topicId,\n  preview = false,\n  disableNextTopicButton,\n  customNoCompletedEventsIds = [\n    \"http://h5p.org/libraries/H5P.GuessTheAnswer-1.5\",\n  ],\n  isThereAnotherTopic = true,\n}) => {\n  const {\n    program,\n    topicPing,\n    topicIsFinished,\n    fontSize,\n    sendProgress,\n    h5pProgress,\n  } = useContext(EscolaLMSContext);\n\n  const topic = useMemo(() => {\n    return program.value?.lessons\n      ?.find((lesson: API.Lesson) => lesson.id === lessonId)\n      ?.topics?.find((topic: API.Topic) => topic.id === topicId);\n  }, [program, lessonId, topicId]);\n\n  const onCompleteTopic = useCallback((): void => {\n    if (program?.value?.id) {\n      sendProgress(program?.value?.id, [\n        { topic_id: Number(topicId), status: 1 },\n      ]);\n    }\n  }, [program, topicId, sendProgress]);\n\n  const onXAPI = useCallback(\n    (event: XAPIEvent): void => {\n      isThereAnotherTopic &&\n        disableNextTopicButton &&\n        disableNextTopicButton(!Boolean(event?.statement?.verb?.id));\n\n      if (event?.statement) {\n        h5pProgress(\n          String(program?.value?.id),\n          Number(topicId),\n          event?.statement as API.IStatement\n        );\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      program,\n      topicId,\n      h5pProgress,\n      disableNextTopicButton,\n      customNoCompletedEventsIds,\n    ]\n  );\n\n  useEffect(() => {\n    const isTopicFinished = topic?.id && topicIsFinished(topic.id);\n\n    isThereAnotherTopic &&\n      disableNextTopicButton &&\n      isTopicFinished &&\n      disableNextTopicButton(!isTopicFinished && !Boolean(topic?.can_skip));\n  }, [disableNextTopicButton, topic, isThereAnotherTopic, topicIsFinished]);\n\n  useEffect(() => {\n    if (!preview) {\n      const ping = () =>\n        topicId && !topicIsFinished(topicId) && topicPing(topicId);\n      const interval = setInterval(() => {\n        ping();\n      }, 5000);\n      ping();\n      return () => clearInterval(interval);\n    }\n  }, [topicPing, preview, topicId, topicIsFinished]);\n\n  if (!topic) {\n    return <React.Fragment />;\n  }\n\n  if (!topic.topicable?.value) {\n    return (\n      <pre className=\"error\">Error: topic.topicable?.value is missing</pre>\n    );\n  }\n  if (topic.topicable_type) {\n    // TODO: specific interface for advanced topic players -> example: ImagePlayer\n    switch (topic.topicable_type) {\n      case TopicType.H5P:\n        return (\n          <H5Player\n            onXAPI={(e: XAPIEvent) => onXAPI(e)}\n            //@ts-ignore\n            h5pObject={topic.topicable.content as API.H5PObject}\n          />\n        );\n      case TopicType.OEmbed:\n        return (\n          <>\n            <OEmbedPlayer url={topic.topicable.value} key={topicId} />\n          </>\n        );\n      case TopicType.RichText:\n        return <TextPlayer value={topic.topicable.value} fontSize={fontSize} />;\n      case TopicType.Video:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            url={topic.topicable.url}\n            light\n            onFinish={(): void => onCompleteTopic()}\n          />\n        );\n      case TopicType.Image:\n        return <ImagePlayer topic={topic} onLoad={() => onCompleteTopic()} />;\n\n      case TopicType.Audio:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            audio\n            url={topic.topicable.url}\n            light\n            onFinish={(): void => onCompleteTopic()}\n          />\n        );\n\n      case TopicType.Pdf:\n        return (\n          <StyledPdfPlayer\n            url={topic.topicable.url}\n            pageConfig={{\n              renderMode: \"svg\",\n              className: \"course-pdf-player\",\n            }}\n          />\n        );\n\n      case TopicType.Scorm:\n        return (\n          <ScormPlayer\n            value={{\n              title: topic.title,\n              uuid: topic.topicable.uuid,\n            }}\n          />\n        );\n\n      case API.TopicType.GiftQuiz:\n        return <GiftQuizPlayer topic={topic} />;\n      default:\n        return <pre>{topic.topicable_type}</pre>;\n    }\n  }\n\n  return <pre>loading... (or error)</pre>;\n};\n\nexport default CourseProgramContent;\n"],"sourceRoot":""}