(this["webpackJsonpescolalms-demo"]=this["webpackJsonpescolalms-demo"]||[]).push([[11],{614:function(e,t,n){"use strict";n.r(t);var o,i,r,c=n(1),s=n.n(c),a=n(34),u=n(35),l=n(680),d=n(278),b=n(669),j=n(670),p=n(12),v=n(276),f=n(84),m=n(46),O=n(74),h=n(731),x=n(698),g=n(92),C=n(389),T=n(33),k=n(676),N=n(192),y=n(72),P=n(30),w=n(20),I=n(3),_=w.default.div(o||(o=Object(y.a)(["\n  min-height: calc(100vh - 150px);\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n\n  .buttons-block {\n    display: grid;\n    gap: 8px;\n  }\n"]))),S=function(e){var t=e.error,n=e.goTo,o=void 0===n?"/courses":n,i=e.goToText,r=e.alternativeButton,c=Object(v.a)().t,s=Object(a.g)(),u=null!==i&&void 0!==i?i:c("CoursePage.SeeOtherCourses");return Object(I.jsx)(d.a,{children:Object(I.jsxs)(_,{children:[Object(I.jsx)(P.Text,{size:"16",children:Object(I.jsx)("strong",{children:c("CoursePage.ErrorOccurred")})}),Object(I.jsx)(P.Text,{size:"14",children:t}),Object(I.jsx)("hr",{}),Object(I.jsxs)("div",{className:"buttons-block",children:[Object(I.jsx)(P.Button,{mode:"secondary",onClick:function(){return s.push(o)},children:u}),r&&Object(I.jsx)(P.Button,{mode:"outline",onClick:function(){return s.push(r.goTo)},children:r.goToText})]})]})})},E=w.default.section(i||(i=Object(y.a)(['\n  padding-bottom: 110px;\n  .main-title {\n    margin-bottom: 20px;\n  }\n  .course-nav {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: 100;\n  }\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n\n  .course-program-finish-modal {\n    font-family: "Mulish", sans-serif;\n    background: #f8f8f8;\n    inset: 0;\n    border: 1px solid #157493;\n    padding: 16px;\n    display: grid;\n    place-content: center;\n    gap: 16px;\n    height: 100%;\n    max-height: 500px;\n\n    p {\n      text-align: center;\n      margin: 0;\n    }\n\n    &__title {\n      font-size: 24px;\n      font-weight: 500;\n    }\n\n    &__paragraph {\n      font-size: 18px;\n    }\n\n    &__buttons {\n      display: grid;\n      grid-auto-flow: column;\n      gap: 8px;\n      justify-content: center;\n      margin-top: 8px;\n    }\n  }\n']))),M=n(282),B=n(6),A=n(75),R=n(52),z=n(737),F=n(690),L=function(e){var t=e.courseId,n=Object(v.a)().t,o=Object(a.g)().push,i=Object(c.useState)({show:!1,step:0,loading:!1}),r=Object(p.a)(i,2),s=r[0],u=r[1],l=Object(c.useState)([]),d=Object(p.a)(l,2),f=d[0],m=d[1],O=Object(c.useContext)(R.EscolaLMSContext),h=O.fetchQuestionnaires,x=O.fetchQuestionnaire,g=Object(c.useCallback)((function(){if(u((function(e){return Object(B.a)(Object(B.a)({},e),{},{show:!1})})),s.step<f.length-1){u((function(e){return Object(B.a)(Object(B.a)({},e),{},{step:e.step+1})}));var e=setTimeout((function(){u((function(e){return Object(B.a)(Object(B.a)({},e),{},{show:!0})}))}),500);return function(){return clearTimeout(e)}}}),[f,s.step]),C=Object(c.useCallback)(function(){var e=Object(j.a)(Object(b.a)().mark((function e(o){var i;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=t,!e.t0){e.next=6;break}return e.next=5,x(F.b.COURSE,t,o);case 5:e.t0=e.sent;case 6:if(!(i=e.t0)||!i.success){e.next=9;break}return e.abrupt("return",i.data.questions);case 9:e.next=15;break;case 11:e.prev=11,e.t1=e.catch(0),M.b.error(n("UnexpectedError")),console.log(e.t1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),[t,x]),T=Object(c.useCallback)(Object(j.a)(Object(b.a)().mark((function e(){var o,i;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=t,!e.t0){e.next=6;break}return e.next=5,h(F.b.COURSE,t);case 5:e.t0=e.sent;case 6:if(!(o=e.t0)||!o.success){e.next=13;break}return e.next=10,Promise.all(o.data.map(function(){var e=Object(j.a)(Object(b.a)().mark((function e(t){var n,o;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t.id);case 2:return n=e.sent,o=t.questions.reduce((function(e,t){var o=null===n||void 0===n?void 0:n.find((function(e){return e.id===t.id})),i=Object(B.a)(Object(B.a)({},t),{},{rate:null===o||void 0===o?void 0:o.rate,note:null===o||void 0===o?void 0:o.note});return!1===i.public_answers&&null===i.rate&&null===i.note&&e.push(i),e}),[]),e.abrupt("return",Object(B.a)(Object(B.a)({},t),{},{questions:o}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:i=e.sent,m(i.filter((function(e){return!!e.questions.length}))),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{loading:!1})}));case 13:e.next=19;break;case 15:e.prev=15,e.t1=e.catch(0),M.b.error(n("UnexpectedError")),console.log(e.t1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),[t,h]);return Object(c.useEffect)((function(){u((function(e){return Object(B.a)(Object(B.a)({},e),{},{loading:!0})})),T()}),[t]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"course-program-finish-modal",children:s.loading?Object(I.jsx)(P.Spin,{}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("p",{className:"course-program-finish-modal__title",children:n("CourseProgram.FinishTitle")}),Object(I.jsx)("p",{className:"course-program-finish-modal__paragraph",children:null!==f&&void 0!==f&&f.length?n("CourseProgram.FinishSubtitle"):n("CourseProgram.FinishSubtitleNoRating")}),Object(I.jsxs)("div",{className:"course-program-finish-modal__buttons",children:[!(null===f||void 0===f||!f.length)&&Object(I.jsx)(A.Button,{mode:"primary",onClick:function(){return u((function(e){return Object(B.a)(Object(B.a)({},e),{},{show:!0})}))},children:n("MyProfilePage.RateCourse")}),Object(I.jsx)(A.Button,{mode:"primary",onClick:function(){return o("/user/my-profile")},children:n("Menu.Profile")}),Object(I.jsx)(A.Button,{mode:"primary",onClick:function(){return o("/courses")},children:n("Menu.Courses")})]})]})}),s.show&&t&&!!f.length&&Object(I.jsx)(z.a,{course:F.b.COURSE,courseId:t,visible:s.show,onClose:function(){return g()},questionnaire:f[s.step]})]})},q=n(736),D=n(245),X=n(390),U=w.default.div(r||(r=Object(y.a)(["\n  margin-top: 100px;\n"]))),V=function(e){var t=e.resources,n=e.subtitle,o=Object(v.a)().t,i=t.map((function(e){return{href:e.url,fileName:e.name}}));return Object(I.jsx)(U,{children:Object(I.jsx)(X.Downloads,{subtitle:n,title:o("CourseProgram.TopicAttachment"),downloads:i})})},H=function(e){var t,n,o=e.lesson,i=e.topic,r=e.disableNextTopicButton,c=e.getNextPrevTopic,s=e.onXAPI,a=o&&o.summary&&i&&i.summary?6:12;return Object(I.jsxs)("div",{className:"course-program-player",children:[Object(I.jsxs)("div",{className:"course-program-player-content",children:[i&&i.introduction&&Object(I.jsx)(D.MarkdownRenderer,{children:i.introduction}),Object(I.jsx)("div",{className:"course-program-player-content__wrapper",style:Object(B.a)({},(null===i||void 0===i||null===(t=i.json)||void 0===t?void 0:t.wrapperStyle)||{}),children:Object(I.jsx)(q.a,{lessonId:Number(null===o||void 0===o?void 0:o.id),topicId:i&&Number(i.id),disableNextTopicButton:r,isThereAnotherTopic:Boolean(c(Number(null===i||void 0===i?void 0:i.id))),onXAPI:function(e){return null===s||void 0===s?void 0:s(e)}},null===i||void 0===i?void 0:i.id)})]}),Object(I.jsx)("div",{className:"course-program-content__container",children:Object(I.jsxs)(f.Row,{children:[o&&o.summary&&Object(I.jsx)(f.Col,{sm:12,md:a,lg:a,children:Object(I.jsx)("div",{className:"course-program-summary",children:Object(I.jsx)(D.MarkdownRenderer,{children:o.summary})})}),i&&i.summary&&Object(I.jsx)(f.Col,{sm:12,md:a,lg:a,children:Object(I.jsxs)("div",{className:"course-program-summary",children:[Object(I.jsx)(D.MarkdownRenderer,{children:i.summary}),i&&i.resources&&(null===(n=i.resources)||void 0===n?void 0:n.length)>0&&Object(I.jsx)(V,{resources:i.resources||[],subtitle:i.introduction||""})]})})]})})]})},Q=n(696),W=function(e){var t=e.program,n=e.courseId,o=Object(x.a)(t),i=o.topic,r=o.lesson,l=o.onNextTopic,d=o.onPrevTopic,y=o.getNextPrevTopic,P=o.isNextTopicButtonDisabled,w=o.disableNextTopicButton,_=o.sendProgress,B=Object(c.useState)(!1),A=Object(p.a)(B,2),R=A[0],z=A[1],F=function(e){var t=e.program,n=e.disableNextTopicButton,o=e.isThereAnotherTopic,i=void 0===o||o,r=Object(a.i)().topicID,s=Object(c.useContext)(u.EscolaLMSContext),l=s.sendProgress,d=s.h5pProgress,b=Object(c.useState)(null),j=Object(p.a)(b,2),v=j[0],f=j[1],m=Object(c.useCallback)((function(e){var n,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null!==t&&void 0!==t&&t.id&&(null===(n=d(String(null===t||void 0===t?void 0:t.id),Number(r),null===e||void 0===e?void 0:e.statement))||void 0===n||n.then((function(){o&&f(null)})))}),[null===t||void 0===t?void 0:t.id,r,d]);return{onCompleteTopic:Object(c.useCallback)((function(){console.log("onCompleteTopic: ",v),n&&n(!1),null!==t&&void 0!==t&&t.id&&!v?l(null===t||void 0===t?void 0:t.id,[{topic_id:Number(r),status:1}]):v&&m(v)}),[v,n,null===t||void 0===t?void 0:t.id,l,r,m]),onXAPI:Object(c.useCallback)((function(e){var t,o,r,c;i&&n&&n(!Boolean(null===e||void 0===e||null===(t=e.statement)||void 0===t||null===(o=t.verb)||void 0===o?void 0:o.id)),f(e),null!==e&&void 0!==e&&e.statement&&"http://adlnet.gov/expapi/verbs/completed"!==(null===e||void 0===e||null===(r=e.statement)||void 0===r||null===(c=r.verb)||void 0===c?void 0:c.id)&&m(e,!1)}),[i,n,m]),onCompleteH5pTopic:m}}({program:t}),q=F.onCompleteTopic,D=F.onXAPI,X=function(e){var t,n,o=e.topic,i=e.courseId,r=e.program,s=e.lesson,a=Object(c.useContext)(u.EscolaLMSContext),l=a.bookmarkNotes,d=a.fetchBookmarkNotes,b=a.createBookmarkNote,j=a.deleteBookmarkNote,p=Object(v.a)().t,f=Object(c.useMemo)((function(){var e;return null===(e=l.list)||void 0===e?void 0:e.data.filter((function(e){return e.bookmarkable_id===Number(null===o||void 0===o?void 0:o.id)&&null===e.value}))}),[null===(t=l.list)||void 0===t?void 0:t.data,null===o||void 0===o?void 0:o.id]),m=Object(c.useMemo)((function(){var e;return null===(e=l.list)||void 0===e?void 0:e.data.filter((function(e){return e.bookmarkable_id===Number(null===o||void 0===o?void 0:o.id)&&null!==e.value}))}),[null===(n=l.list)||void 0===n?void 0:n.data,null===o||void 0===o?void 0:o.id]);return{handleBookmark:function(){return null!==f&&void 0!==f&&f.length?j(f[0].id).then((function(){d(),M.b.success(p("Notifications.DeleteBookmark"))})):b({bookmarkable_id:Number(null===o||void 0===o?void 0:o.id),bookmarkable_type:"".concat(i,"/").concat(null===s||void 0===s?void 0:s.id,"/").concat(null===o||void 0===o?void 0:o.id,":").concat(r.title,":").concat(null===o||void 0===o?void 0:o.title)}).then((function(){d(),M.b.success(p("Notifications.CreateBookmark"))}))},topicBookmark:f,topicNote:m}}({topic:i,lesson:r,program:t,courseId:n}),U=X.topicBookmark,V=X.handleBookmark,W=X.topicNote,Y=function(e){var t=e.courseId,n=e.program,o=e.topic,i=Object(c.useContext)(u.EscolaLMSContext),r=i.courseProgressDetails,s=i.progress,l=Object(a.h)(),d=Object(a.g)().push,b=3===l.pathname.split("/").length,j=Object(c.useMemo)((function(){var e,n;return null!==(e=r.byId)&&void 0!==e&&e[Number(t)]&&r.byId[Number(t)].value?r.byId[Number(t)].value:s&&s.value&&(null===(n=s.value.find((function(e){return e.course.id===Number(t)})))||void 0===n?void 0:n.progress)}),[s,t]),p=Object(c.useMemo)((function(){var e=j||[],t=e.filter((function(e){return e.status===Q.API.CourseProgressItemElementStatus.IN_PROGRESS})).sort((function(e,t){return new Date(t.started_at).getTime()-new Date(e.started_at).getTime()}))[0];return t||e.filter((function(e){return e.status===Q.API.CourseProgressItemElementStatus.INCOMPLETE}))[0]}),[j]),v=Object(c.useMemo)((function(){return p&&n.lessons.find((function(e){return e&&e.topics&&e.topics.some((function(e){return e.id===p.topic_id}))}))}),[n,p]);Object(c.useEffect)((function(){b&&v&&p&&d("/course/".concat(n.id,"/").concat(v.id,"/").concat(p.topic_id),null)}),[b,v,n,d,p]);var f=null===j||void 0===j?void 0:j.findIndex((function(e){return e.topic_id===(null===o||void 0===o?void 0:o.id)&&e.status===Q.API.CourseProgressItemElementStatus.COMPLETE}));return{getCourseProgress:j,finishedTopicIndex:f}}({courseId:n,program:t,topic:i}),G=Y.finishedTopicIndex,J=Object(v.a)().t;return Object(c.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[null===r||void 0===r?void 0:r.id,null===i||void 0===i?void 0:i.id]),Object(c.useEffect)((function(){t&&i&&(null!==y(Number(null===i||void 0===i?void 0:i.id))||w(!0))}),[null===i||void 0===i?void 0:i.id,t]),window.resetProgress=function(){return Object(j.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t.id,t.lessons.flatMap((function(e){return e.topics})).map((function(e){return{topic_id:Number(null===e||void 0===e?void 0:e.id),status:0}})));case 2:case"end":return e.stop()}}),e)})))()},t?i?Object(I.jsx)(s.a.Fragment,{children:Object(I.jsxs)(E,{className:"course-program-wrapper",children:[Object(I.jsxs)(N.a,{children:[Object(I.jsx)(k.a,{items:[Object(I.jsx)(m.c,{to:"/",children:J("Home")}),Object(I.jsx)(m.c,{to:"/courses",children:J("Courses")}),Object(I.jsx)(T.Text,{size:"12",children:t.title}),Object(I.jsx)(T.Text,{size:"12",children:i.title})]}),Object(I.jsx)(g.Title,{className:"main-title",level:3,children:i.title}),Object(I.jsxs)(f.Row,{children:[Object(I.jsxs)(f.Col,{lg:9,children:[!!R&&Object(I.jsx)(L,{courseId:n}),!R&&Object(I.jsx)(H,{lesson:r,topic:i,onXAPI:D,disableNextTopicButton:w,getNextPrevTopic:y})]}),Object(I.jsx)(f.Col,{lg:3,children:Object(I.jsx)(h.a,{course:t,topicId:Number(null===i||void 0===i?void 0:i.id),onCourseFinish:function(){return z(!0)},onCompleteTopic:q})})]})]}),Object(I.jsx)("div",{className:"course-nav",children:Object(I.jsx)(N.a,{children:Object(I.jsx)(C.CourseTopNav,{onFinish:function(){return q()},mobile:O.isMobile,onNext:l,isFinished:!!G&&G>-1,onPrev:d,addNotes:!0,newNoteData:{id:i.id,type:"".concat(n,"/").concat(null===r||void 0===r?void 0:r.id,"/").concat(null===i||void 0===i?void 0:i.id,":").concat(t.title,":").concat(null===i||void 0===i?void 0:i.title)},currentNote:null!==W&&void 0!==W&&W.length?W[0]:void 0,addBookmarks:!0,bookmarkBtnText:null!==U&&void 0!==U&&U.length?"deleteBookmark":"addBookmark",onBookmarkClick:function(){return V()},hasPrev:!!y(Number(null===i||void 0===i?void 0:i.id),!1),hasNext:!P})})})]})}):Object(I.jsx)(S,{error:J("CourseProgram.NoTopic"),goTo:"/course/".concat(t.id),goToText:J("CoursePage.BackToCourse"),alternativeButton:{goTo:"/courses",goToText:J("CoursePage.SeeOtherCourses")}}):Object(I.jsx)(S,{error:J("CourseProgram.NoProgram")})},Y=n(113),G=n(707),J=function(e){var t=e.program,n=null===t||void 0===t?void 0:t.scorm_sco,o=null===n||void 0===n?void 0:n.uuid;return n||o?Object(I.jsx)(G.a,{value:{title:n.title,uuid:n.uuid}}):Object(I.jsx)(s.a.Fragment,{})};t.default=function(){var e,t=Object(a.i)().id,n=Object(c.useContext)(u.EscolaLMSContext),o=n.program,i=n.fetchProgram,r=n.fetchCourseProgress;return Object(c.useEffect)((function(){t&&(i(Number(t)),r(Number(t)))}),[t]),o.loading?Object(I.jsx)(l.a,{}):o.error?Object(I.jsx)(S,{error:Object(Y.t)("CourseProgram.NoProgram")}):o.value&&null!==o&&void 0!==o&&null!==(e=o.value)&&void 0!==e&&e.scorm_sco_id?Object(I.jsx)(d.a,{metaTitle:o.value.title,children:Object(I.jsx)(J,{program:o.value})}):o.value&&o.value.lessons&&o.value.lessons.length?Object(I.jsx)(d.a,{metaTitle:o.value.title,children:Object(I.jsx)(W,{program:o.value,courseId:Number(t)})}):Object(I.jsx)(l.a,{})}},676:function(e,t,n){"use strict";var o,i=n(72),r=(n(1),n(365)),c=n(20),s=n(3),a=c.default.div(o||(o=Object(i.a)(["\n  margin-bottom: 15px;\n  a {\n    text-decoration: none;\n    color: ","!important;\n  }\n"])),(function(e){var t=e.theme;return"dark"===t.mode?t.gray5:t.gray2}));t.a=function(e){var t=e.items;return Object(s.jsx)(a,{children:Object(s.jsx)(r.BreadCrumbs,{items:t})})}},680:function(e,t,n){"use strict";var o,i=n(72),r=n(1),c=n(280),s=n(20),a=n(3),u=s.default.div(o||(o=Object(i.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n"])),(function(e){var t=e.theme;return"dark"===t.mode?t.dm__background:t.background}));t.a=function(){var e=Object(s.useTheme)();return Object(r.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="inherit"}}),[]),Object(a.jsx)(u,{children:Object(a.jsx)(c.Spin,{color:e.primaryColor})})}},690:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var o=function(e){return e.COURSE="course",e.WEBINAR="webinar",e}({}),i=function(e){return e.RATE="rate",e.TEXT="text",e.REVIEW="review",e}({})},698:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(12),i=n(52),r=n(1),c=n(34);function s(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/course/",a=Object(r.useContext)(i.EscolaLMSContext),u=a.sendProgress,l=a.getNextPrevTopic,d=a.progress,b=Object(r.useState)(!1),j=Object(o.a)(b,2),p=j[0],v=j[1],f=Object(c.i)(),m=f.lessonID,O=f.topicID,h=Object(c.g)().push,x=m||e.lessons[0].id,g=O||(e&&e.lessons&&e.lessons[0]&&e.lessons[0].topics&&(null===e||void 0===e||null===(t=e.lessons[0])||void 0===t||null===(n=t.topics[0])||void 0===n?void 0:n.id)||0),C=Object(r.useMemo)((function(){return e.lessons.find((function(e){return e.id===Number(x)}))}),[e,x]),T=Object(r.useMemo)((function(){return C&&C.topics&&C.topics.find((function(e){return e.id===Number(g)}))}),[C,g]),k=Object(r.useCallback)((function(){e.id&&u(e.id,[{topic_id:Number(g),status:1}]).then((function(){var t=l(Number(g));t&&h("".concat(s).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[g,e,h,l,u,s]),N=Object(r.useCallback)((function(){e.id&&u(e.id,[{topic_id:Number(g),status:1}]).then((function(){var t=l(Number(g),!1);t&&h("".concat(s).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[g,e,h,l,u,s]),y=Object(r.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=l(Number(g),t);n&&h("".concat(s).concat(e.id,"/").concat(null===n||void 0===n?void 0:n.lesson_id,"/").concat(null===n||void 0===n?void 0:n.id))}),[x,g,e,e.id,h,s]);return{topic:T,lesson:C,onNextTopic:k,onPrevTopic:N,getNextPrevTopic:l,isNextTopicButtonDisabled:p,disableNextTopicButton:v,onNextTopicPreview:y,sendProgress:u,progress:d}}},704:function(e,t){},707:function(e,t,n){"use strict";var o,i,r,c=n(12),s=n(72),a=n(1),u=n(75),l=n(52),d=n(20),b=n(276),j=n(277),p=n(3),v=d.default.div(o||(o=Object(s.a)(["\n  > button {\n    position: fixed;\n    right: 5px;\n    bottom: 5px;\n    z-index: 9999;\n    svg path {\n      fill: white;\n    }\n  }\n  iframe {\n    border: none;\n    display: block;\n    width: 100%;\n  }\n  ","\n"])),(function(e){return e.fullview?Object(d.css)(i||(i=Object(s.a)(["\n        iframe {\n          position: fixed;\n          top: 90px;\n          left: 0;\n          height: calc(100% - 90px - 80px);\n\n          z-index: 9999;\n        }\n      "]))):Object(d.css)(r||(r=Object(s.a)(["\n        display: flex;\n\n        min-height: 80vh;\n        max-height: 80vh;\n        height: 100vh;\n        iframe {\n          height: 100%;\n        }\n      "])))}));t.a=function(e){var t=e.value,n=Object(a.useContext)(l.EscolaLMSContext).apiUrl,o=Object(b.a)().t,i=Object(a.useState)(!1),r=Object(c.a)(i,2),s=r[0],d=r[1];return Object(p.jsx)("div",{className:"scorm-wrapper",children:Object(p.jsxs)(v,{fullview:s,children:[Object(p.jsxs)(u.Button,{onClick:function(){return d(!s)},children:[" ",o("Scorm.Resize")," ",Object(p.jsx)(j.z,{})]}),Object(p.jsx)("iframe",{title:t.title,src:"".concat(n,"/api/scorm/play/").concat(t.uuid)})]})})}},719:function(e,t){},720:function(e,t){},721:function(e,t){},722:function(e,t){},723:function(e,t){},731:function(e,t,n){"use strict";var o,i,r=n(12),c=n(72),s=n(1),a=n.n(s),u=n(247),l=n(52),d=n(34),b=n(74),j=n(20),p=n(698),v=n(30),f=n(113),m=n(3),O=j.default.aside(o||(o=Object(c.a)(["\n  padding-bottom: 100px;\n  .show-agenda-btn {\n    width: 100%;\n  }\n  .agenda-wrapper {\n    ","\n  }\n"])),b.isMobile&&Object(j.css)(i||(i=Object(c.a)(["\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      transform: translate(100%, 0);\n      transition: transform 0.25s;\n      overflow: scroll;\n      padding: 40px 0 55px;\n      z-index: 10;\n      background-color: ",";\n      &--visible {\n        transform: translate(0, 0);\n      }\n      .hide-agenda-btn {\n        display: block;\n        margin: 0 15px 0 auto;\n      }\n    "])),(function(e){var t=e.theme;return"dark"===t.mode?t.dm__background:t.background})));t.a=function(e){var t=e.course,n=e.topicId,o=e.onCompleteTopic,i=e.onCourseFinish,c=Object(p.a)(t).progress,j=Object(s.useContext)(l.EscolaLMSContext).courseProgressDetails,h=Object(d.g)(),x=Object(s.useState)(!1),g=Object(r.a)(x,2),C=g[0],T=g[1],k=((null===t||void 0===t?void 0:t.lessons)||[]).filter((function(e){var t;return e&&e.topics&&(null===e||void 0===e||null===(t=e.topics)||void 0===t?void 0:t.length)>0})),N=Object(s.useContext)(l.EscolaLMSContext).topicIsFinished,y=t.lessons.map((function(e){return e.topics})),P=[].concat.apply([],y),w=Object(s.useMemo)((function(){var e,n=t.id;return j&&j.byId&&j.byId[Number(n)]&&j.byId[Number(n)].value?j.byId[Number(n)].value:c&&c.value&&(null===(e=c.value.find((function(e){return e.course.id===Number(n)})))||void 0===e?void 0:e.progress)}),[c,t]),I=P.filter((function(e){return N(e.id)||(null===w||void 0===w?void 0:w.some((function(t){return t.topic_id===e.id&&1===t.status})))})).map((function(e){return e.id}));return t||k?Object(m.jsxs)(O,{children:[b.isMobile&&Object(m.jsx)(v.Button,{mode:"outline",className:"show-agenda-btn",onClick:function(){return T(!0)},children:Object(f.t)("CourseProgram.ShowAgenda")}),Object(m.jsxs)("div",{className:"".concat(C?"agenda-wrapper agenda-wrapper--visible":"agenda-wrapper"),children:[b.isMobile&&Object(m.jsx)(v.Button,{className:"hide-agenda-btn",mode:"secondary",onClick:function(){return T(!1)},children:"\u2715"}),Object(m.jsx)(u.CourseAgenda,{onNextTopicClick:function(){var e;t.lessons.forEach((function(t,o,i){t.topics&&t.topics.forEach((function(r,c){r.id===n&&(e=t.topics&&t.topics[c+1]?t.topics[c+1]&&t.topics[c+1]:i[o+1]?i[o+1].topics&&i[o+1].topics[0]:i[0].topics&&i[0].topics[0])}))})),e&&(h.push("/course/".concat(t.id,"/").concat(e.lesson_id,"/").concat(e.id)),T(!1))},mobile:b.isMobile,lessons:t.lessons,currentTopicId:n,finishedTopicIds:I,onMarkFinished:function(){return null===o||void 0===o?void 0:o()},onTopicClick:function(e){h.push("/course/".concat(t.id,"/").concat(e.lesson_id,"/").concat(e.id)),T(!1)},onCourseFinished:function(){return null===i||void 0===i?void 0:i()}})]})]}):Object(m.jsx)(a.a.Fragment,{})}},736:function(e,t,n){"use strict";var o,i,r=n(72),c=n(1),s=n.n(c),a=n(35),u=n(20),l=n(245),d=n(3),b=u.default.div(o||(o=Object(r.a)(["\n  h1 {\n    font-size: 2em;\n  }\n  h2 {\n    font-size: 1.5em;\n  }\n  h3 {\n    font-size: 1.17em;\n  }\n  h4 {\n    font-size: 1em;\n  }\n  h5 {\n    font-size: 0.9em;\n  }\n"]))),j=function(e){var t=e.value,n=e.onLoad;return Object(c.useEffect)((function(){t&&n&&n()}),[t,n]),Object(d.jsx)(b,{children:t&&Object(d.jsx)(l.MarkdownRenderer,{children:t})})},p=n(696),v=n(724),f=n(717),m=n(715),O=n(725),h=n(718),x=n(729),g=n(74),C=n(707),T=n(728),k=n.n(T),N=Object(u.default)(h.PdfPlayer)(i||(i=Object(r.a)(["\n  .course-pdf-player {\n    .react-pdf__Page__svg,\n    svg {\n      width: 100% !important;\n      height: auto !important;\n    }\n  }\n"])));t.a=function(e){var t,n,o,i=e.lessonId,r=e.topicId,u=e.preview,l=void 0!==u&&u,b=e.disableNextTopicButton,h=e.isThereAnotherTopic,T=void 0===h||h,y=e.onXAPI,P=Object(c.useContext)(a.EscolaLMSContext),w=P.program,I=P.topicPing,_=P.topicIsFinished,S=Object(c.useMemo)((function(){var e,t,n,o;return null===(e=w.value)||void 0===e||null===(t=e.lessons)||void 0===t||null===(n=t.find((function(e){return e.id===i})))||void 0===n||null===(o=n.topics)||void 0===o?void 0:o.find((function(e){return e.id===r}))}),[w,i,r]);if(Object(c.useEffect)((function(){var e=(null===S||void 0===S?void 0:S.id)&&_(S.id);T&&b&&e&&b(!e&&!Boolean(null===S||void 0===S?void 0:S.can_skip))}),[b,S,T,_]),Object(c.useEffect)((function(){if(!l){var e=function(){return r&&!_(r)&&I(r)},t=setInterval((function(){e()}),5e3);return e(),function(){return clearInterval(t)}}}),[I,l,r,_]),!S)return Object(d.jsx)(s.a.Fragment,{});if(null===(t=S.topicable)||void 0===t||!t.value)return Object(d.jsx)("pre",{className:"error",children:"Error: topic.topicable?.value is missing"});if(S.topicable_type)switch(S.topicable_type){case p.API.TopicType.H5P:return Object(d.jsx)(O.H5Player,{onXAPI:function(e){return null===y||void 0===y?void 0:y(e)},h5pObject:S.topicable.content});case p.API.TopicType.OEmbed:return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(m.OEmbedPlayer,{url:S.topicable.value},r)});case p.API.TopicType.RichText:return Object(d.jsx)(j,{value:S.topicable.value});case p.API.TopicType.Video:return Object(d.jsx)(f.AudioVideoPlayer,{mobile:g.isMobile,url:S.topicable.url,light:!0});case p.API.TopicType.Image:return Object(d.jsx)(v.ImagePlayer,{topic:S,onLoad:function(){}});case p.API.TopicType.Audio:return Object(d.jsx)(f.AudioVideoPlayer,{mobile:g.isMobile,audio:!0,url:S.topicable.url,light:!0});case p.API.TopicType.Pdf:return Object(d.jsx)(N,{url:S.topicable.url,pageConfig:{renderMode:"svg",className:"course-pdf-player"}});case p.API.TopicType.Scorm:return Object(d.jsx)(C.a,{value:{title:S.title,uuid:S.topicable.uuid}});case p.API.TopicType.GiftQuiz:return Object(d.jsx)(k.a,{topic:S});case p.API.TopicType.Project:return Object(d.jsx)(x.ProjectPlayer,{course_id:null!==(n=null===(o=w.value)||void 0===o?void 0:o.id)&&void 0!==n?n:0,topic:S});default:return Object(d.jsx)("pre",{children:S.topicable_type})}return Object(d.jsx)("pre",{children:"loading... (or error)"})}},737:function(e,t,n){"use strict";var o=n(669),i=n(6),r=n(670),c=n(12),s=n(1),a=n.n(s),u=n(369),l=n(52),d=n(282),b=n(92),j=n(33),p=n(276),v=n(30),f=n(3),m=function(e){var t=e.data,n=e.textareaPlaceholder,o=e.withStarsRating,r=e.handleSubmit,a=Object(p.a)().t,u=t.title,l=t.description,d=Object(s.useState)({rate:0,note:""}),b=Object(c.a)(d,2),j=b[0],m=b[1];return Object(f.jsx)("form",{onSubmit:function(){r(j.rate,j.note),m({rate:0,note:""})},children:o?Object(f.jsx)(v.Rate,{onSubmit:function(e){return m((function(t){return Object(i.a)(Object(i.a)({},t),{},{rate:e})}))},header:t.title,children:Object(f.jsx)(v.TextArea,{placeholder:n,style:{marginTop:"30px"},value:j.note,onChange:function(e){var t=e.target.value;return m((function(e){return Object(i.a)(Object(i.a)({},e),{},{note:t})}))}})}):Object(f.jsxs)(v.Stack,{$gap:30,children:[Object(f.jsx)(v.Title,{children:u}),Object(f.jsx)(v.Text,{children:l}),Object(f.jsx)(v.TextArea,{placeholder:n,value:j.note,onChange:function(e){var t=e.target.value;return m((function(e){return Object(i.a)(Object(i.a)({},e),{},{note:t})}))}}),Object(f.jsx)(v.Button,{type:"submit",mode:"primary",style:{width:"fit-content",alignSelf:"center"},children:j.note.length?a("RateCourse.SendAnswer"):a("RateCourse.NoAnswer")})]})})},O=n(690);t.a=function(e){var t,n=e.course,v=e.courseId,h=e.visible,x=e.questionnaire,g=e.onClose,C=Object(s.useContext)(l.EscolaLMSContext).sendQuestionnaireAnswer,T=Object(p.a)().t,k=Object(s.useState)({loading:!1,step:0,showLastScreen:!1}),N=Object(c.a)(k,2),y=N[0],P=N[1],w=Object(s.useCallback)(function(){var e=Object(r.a)(Object(o.a)().mark((function e(t,r){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.questions){e.next=16;break}return P((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!0})})),e.prev=2,e.next=5,C(n,v,x.id,{question_id:x.questions[y.step].id,rate:t,note:r});case 5:e.sent.success&&d.b.success(T("RateCourse.ThankYouMessage")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),d.b.error("Error"),console.error(e.t0);case 13:return e.prev=13,P((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!1,step:e.step+1,note:"",rating:null})})),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[n,v,x.id,y]),I=Object(s.useCallback)((function(e,t){w(e,t),x.questions&&y.step===x.questions.length-1&&P((function(e){return Object(i.a)(Object(i.a)({},e),{},{showLastScreen:!0})}))}),[x,y.step,w]);return Object(f.jsx)(u.Modal,{onClose:g,visible:h,animation:"zoom",maskAnimation:"fade",destroyOnClose:!0,width:468,children:y.showLastScreen?Object(f.jsxs)(a.a.Fragment,{children:[Object(f.jsx)(b.Title,{level:4,className:"modal-title",style:{paddingTop:"50px"},children:T("RateCourse.ThankYou")}),Object(f.jsx)(j.Text,{style:{paddingBottom:"50px",textAlign:"center"},children:T("RateCourse.ThankYouMessage")})]}):x.questions&&Object(f.jsx)(m,{textareaPlaceholder:T("RateCourse.OptionalComment"),data:x.questions[y.step],handleSubmit:function(e,t){return I(e,t)},withStarsRating:(null===(t=x.questions[y.step])||void 0===t?void 0:t.type)===O.a.REVIEW})})}}}]);
//# sourceMappingURL=11.a22d131f.chunk.js.map