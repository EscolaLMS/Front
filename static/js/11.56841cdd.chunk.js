(this["webpackJsonpescolalms-demo"]=this["webpackJsonpescolalms-demo"]||[]).push([[11],{397:function(e,t,n){"use strict";n.r(t);var c=n(89),o=n(0),i=n.n(o),r=n(12),s=n(14),l=n(74),a=n(46),u=n(419),d=n(148),b=n(6),j=n(513),v=n(493),p=n(460),m=n(432),f=n(448),O=n(1),x=function(e){var t,n=e.program,c=Object(f.a)(n,"/courses/preview/"),r=c.topic,s=c.lesson,a=c.onNextTopicPreview,u=Object(l.a)().t;return Object(o.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[null===r||void 0===r?void 0:r.id,null===s||void 0===s?void 0:s.id]),Object(O.jsx)(i.a.Fragment,{children:Object(O.jsx)("div",{className:"container-fluid course-program course-program-page",children:Object(O.jsx)("div",{className:"course-program-container",children:Object(O.jsxs)("div",{className:"course-program-wrapper course-program-wrapper-preview",children:[Object(O.jsxs)("div",{className:"course-program-player",children:[Object(O.jsxs)("div",{className:"course-program-player-content",children:[Object(O.jsx)("h2",{children:null===r||void 0===r?void 0:r.title}),r&&r.introduction&&""!==Object(m.a)("".concat(r.introduction))&&Object(O.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12",children:Object(O.jsx)("div",{className:"container-md",children:Object(O.jsx)(p.a,{children:r.introduction})})}),Object(O.jsx)("div",{className:"course-program-player-content__wrapper",style:Object(b.a)({},(null===r||void 0===r||null===(t=r.json)||void 0===t?void 0:t.wrapperStyle)||{}),children:Object(O.jsx)(j.a,{preview:!0,lessonId:Number(null===s||void 0===s?void 0:s.id),topicId:Number(null===r||void 0===r?void 0:r.id)})})]}),Object(O.jsxs)("div",{className:"row",children:[s&&s.summary&&""!==Object(m.a)("".concat(s.summary))&&Object(O.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12",children:Object(O.jsx)("div",{className:"course-program-summary",children:Object(O.jsx)(p.a,{children:s.summary})})}),r&&r.summary&&""!==Object(m.a)("".concat(r.summary))&&Object(O.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12",children:Object(O.jsx)("div",{className:"course-program-summary",children:Object(O.jsx)(p.a,{children:r.summary})})})]}),Object(O.jsx)("div",{className:"course-program-player-next",children:Object(O.jsxs)("button",{className:"default-btn default-btn-equal",onClick:function(){return a()},children:[Object(O.jsxs)("div",{className:"course-program-player-next-button__wrapper",children:[u("Next Topic")," >"]}),Object(O.jsx)("span",{})]})})]}),Object(O.jsx)(v.a,{course:n,lessonId:Number(null===s||void 0===s?void 0:s.id),topicId:Number(null===r||void 0===r?void 0:r.id)})]})})})})},h=function(e){var t,n,r=e.program,s=null===r||void 0===r||null===(t=r.scorm)||void 0===t||null===(n=t.scos)||void 0===n?void 0:n.find((function(e){return void 0!==e.entry_url})),l=null===s||void 0===s?void 0:s.uuid,u=Object(o.useRef)(null),d=Object(o.useState)(0),b=Object(c.a)(d,2),j=b[0],v=b[1],p=Object(o.useContext)(a.EscolaLMSContext).apiUrl;return Object(o.useEffect)((function(){var e,t,n,c;u.current&&v((null===(e=u.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||null===(n=t.document)||void 0===n||null===(c=n.body)||void 0===c?void 0:c.scrollHeight)||0)}),[u]),s||l?Object(O.jsx)(i.a.Fragment,{children:Object(O.jsx)("div",{className:"container-fluid course-program",children:Object(O.jsx)("div",{className:"course-program-player scorm",style:{height:"".concat(610+j,"px")},children:Object(O.jsx)("iframe",{title:"scorm-player",ref:u,src:"".concat(p,"/api/scorm/play/").concat(l),scrolling:"no"})})})}):Object(O.jsx)(i.a.Fragment,{})};t.default=function(){var e,t,n=Object(l.a)().t,c=Object(r.i)().id,i=Object(o.useContext)(a.EscolaLMSContext),b=i.program,j=i.fetchProgram;return Object(o.useEffect)((function(){c&&j(Number(c))}),[c,j]),b.loading?Object(O.jsx)(u.a,{}):b.error?Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[Object(O.jsx)("h4",{className:"alert-heading",children:n("Error")}),Object(O.jsxs)("p",{children:[" ",b.error.message||b.error.error]}),Object(O.jsx)("hr",{}),Object(O.jsxs)("p",{className:"mb-0",children:[n("CoursePage.Preview.SeeOther"),Object(O.jsx)(s.c,{to:"/courses",children:n("Courses")}),"."]})]})}):b.value&&null!==b&&void 0!==b&&null!==(e=b.value)&&void 0!==e&&null!==(t=e.scorm)&&void 0!==t&&t.id?Object(O.jsx)(d.a,{children:Object(O.jsx)(h,{program:b.value})}):b.value&&b.value.lessons&&b.value.lessons.length?Object(O.jsxs)(d.a,{children:[Object(O.jsx)(x,{program:b.value}),";"]}):Object(O.jsx)(u.a,{})}},419:function(e,t,n){"use strict";var c,o=n(53),i=n(0),r=n(150),s=n(7),l=n(1),a=s.default.div(c||(c=Object(o.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n"])),(function(e){var t=e.theme;return"dark"===t.mode?t.backgroundDark:t.backgroundLight}));t.a=function(){var e=Object(s.useTheme)();return Object(i.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="inherit"}}),[]),Object(l.jsx)(a,{children:Object(l.jsx)(r.Spin,{color:e.primaryColor})})}},432:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c=n(213),o=n.n(c),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replaceAll(/(\\\r\n|\\r\n|\\\n|\\n)/g,"\n").split("\n").map((function(e){if(!e.trim().length)return e;var t=e.replace(/\\+/g,"");return t.trim().length?e:t})).join("\n")},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("style=\u201d")?e.split("style=\u201d").map((function(e){return e.replace("\u201d",'"')})).join('style="'):e},s=function(e,t,n){return new RegExp("".concat(e,"(?<=(((\\n|\\s){1,}").concat(e,")|(^(").concat(e,"))))(.+?)(?=((").concat(t,"(\\n|\\s){1,})|(").concat(t,"$)))").concat(t),n)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(s("_{2}","_{2}","g"),"<ins>$6</ins>")},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(s(":{3}info",":{3}","gs"),'<div className="notice-block notice-block--info">$6</div>').replace(s(":{3}warning",":{3}","gs"),'<div className="notice-block notice-block--warning">$6</div>').replace(s(":{3}tip",":{3}","gs"),'<div className="notice-block notice-block--tip">$6</div>')},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return null===e||"null"===e?"":o()([i,r,l,a])(e)}},434:function(e,t,n){"use strict";var c=n(89),o=n(0),i=n(447),r=n(1);t.a=function(e){var t=Object(o.useState)(!1),n=Object(c.a)(t,2),s=n[0],l=n[1];return Object(r.jsxs)("div",{onClick:function(){return l(!0)},onKeyDown:function(){return l(!0)},role:"button",tabIndex:-1,children:[Object(r.jsx)("img",{src:e.src,alt:e.alt,style:{cursor:"pointer"}}),s&&e.src&&Object(r.jsx)(i.default,{mainSrc:e.src,onCloseRequest:function(){return l(!1)}})]})}},435:function(e,t,n){"use strict";var c=n(6),o=(n(0),n(1));t.a=function(e){return Object(o.jsx)("div",{className:"table-responsive",children:Object(o.jsx)("table",Object(c.a)(Object(c.a)({className:"table table-bordered table-hover ".concat(e.className||"")},e),{},{children:e.children}))})}},448:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(89),o=n(71),i=n(0),r=n(12);function s(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/course/",l=Object(i.useContext)(o.EscolaLMSContext),a=l.sendProgress,u=l.getNextPrevTopic,d=l.progress,b=Object(i.useState)(!1),j=Object(c.a)(b,2),v=j[0],p=j[1],m=Object(r.i)(),f=m.lessonID,O=m.topicID,x=Object(r.g)(),h=x.push,g=f||e.lessons[0].id,y=O||(e&&e.lessons&&e.lessons[0]&&e.lessons[0].topics&&(null===e||void 0===e||null===(t=e.lessons[0])||void 0===t||null===(n=t.topics[0])||void 0===n?void 0:n.id)||0),N=Object(i.useMemo)((function(){return e.lessons.find((function(e){return e.id===Number(g)}))}),[e,g]),T=Object(i.useMemo)((function(){return N&&N.topics&&N.topics.find((function(e){return e.id===Number(y)}))}),[N,y]),P=Object(i.useCallback)((function(){e.id&&a(e.id,[{topic_id:Number(y),status:1}]).then((function(){var t=u(Number(y));t&&h("".concat(s).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[y,e,h,u,a,s]),k=Object(i.useCallback)((function(){e.id&&a(e.id,[{topic_id:Number(y),status:1}]).then((function(){var t=u(Number(y),!1);t&&h("".concat(s).concat(e.id,"/").concat(t.lesson_id,"/").concat(t.id),null)}))}),[y,e,h,u,a,s]),w=Object(i.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=u(Number(y),t);n&&h("".concat(s).concat(e.id,"/").concat(null===n||void 0===n?void 0:n.lesson_id,"/").concat(null===n||void 0===n?void 0:n.id))}),[g,y,e,e.id,h,s]);return{topic:T,lesson:N,onNextTopic:P,onPrevTopic:k,getNextPrevTopic:u,isDisabledNextTopicButton:v,setIsDisabledNextTopicButton:p,onNextTopicPreview:w,sendProgress:a,progress:d}}},459:function(e,t){},460:function(e,t,n){"use strict";var c=n(18),o=n(6),i=n(36),r=(n(0),n(176)),s=n(457),l=n(212),a=n(432),u=n(434),d=n(435),b=n(1),j=["node"],v=["node"];t.a=function(e){var t=e.children,n=void 0===t?"":t,p=e.remarkPlugins,m=void 0===p?[]:p,f=e.rehypePlugins,O=void 0===f?[]:f;return Object(b.jsx)(r.a,{components:{img:function(e){e.node;var t=Object(i.a)(e,j);return Object(b.jsx)(u.a,Object(o.a)({},t))},table:function(e){e.node;var t=Object(i.a)(e,v);return Object(b.jsx)(d.a,Object(o.a)({},t))}},remarkPlugins:[s.a].concat(Object(c.a)(m)),rehypePlugins:[l.default].concat(Object(c.a)(O)),linkTarget:"_blank",children:Object(a.a)(n)})}},486:function(e,t){},487:function(e,t){},488:function(e,t){},489:function(e,t){},490:function(e,t){},493:function(e,t,n){"use strict";var c,o=n(53),i=n(0),r=n.n(i),s=n(221),l=n(71),a=n(12),u=n(49),d=n(7),b=n(448),j=n(1),v=d.default.aside(c||(c=Object(o.a)(["\n  padding-bottom: 100px;\n"])));t.a=function(e){var t=e.course,n=(e.lessonId,e.topicId),c=Object(b.a)(t),o=c.setIsDisabledNextTopicButton,d=c.sendProgress,p=Object(a.g)(),m=((null===t||void 0===t?void 0:t.lessons)||[]).filter((function(e){var t;return e&&e.topics&&(null===e||void 0===e||null===(t=e.topics)||void 0===t?void 0:t.length)>0})),f=Object(i.useContext)(l.EscolaLMSContext).topicIsFinished,O=t.lessons.map((function(e){return e.topics})),x=[].concat.apply([],O).filter((function(e){return f(e.id)})).map((function(e){return e.id})),h=Object(i.useCallback)((function(){o&&o(!1),null!==t&&void 0!==t&&t.id&&d(null===t||void 0===t?void 0:t.id,[{topic_id:Number(n),status:1}])}),[m,n,o,d]);return t||m?Object(j.jsx)(v,{children:Object(j.jsx)(s.CourseAgenda,{mobile:u.isMobile,lessons:t.lessons,currentTopicId:n,finishedTopicIds:x,onMarkFinished:function(){return h()},onTopicClick:function(e){return p.push("/course/".concat(t.id,"/").concat(e.lesson_id,"/").concat(e.id))}})}):Object(j.jsx)(r.a.Fragment,{})}},513:function(e,t,n){"use strict";var c=n(0),o=n.n(c),i=n(46),r=n(153),s=n(460),l=n(1),a=["small","regular","bigger","big"],u=function(e){var t=e.value,n=e.onLoad,o=e.fontSize;return Object(c.useEffect)((function(){t&&n&&n()}),[t,n]),Object(l.jsx)("div",{className:"container-xl center-image-richtext typebase size-".concat(a[o]),children:t&&Object(l.jsx)(s.a,{children:t})})},d=n(491),b=n(484),j=n(482),v=n(492),p=n(485),m=n(49);t.a=function(e){var t,n,s,a=e.lessonId,f=e.topicId,O=e.preview,x=void 0!==O&&O,h=e.setIsDisabledNextTopicButton,g=e.customNoCompletedEventsIds,y=void 0===g?[]:g,N=Object(c.useContext)(i.EscolaLMSContext),T=N.program,P=N.topicPing,k=N.topicIsFinished,w=N.fontSize,C=N.sendProgress,I=N.h5pProgress,_=N.apiUrl,E=Object(c.useMemo)((function(){var e,t,n,c;return null===(e=T.value)||void 0===e||null===(t=e.lessons)||void 0===t||null===(n=t.find((function(e){return e.id===a})))||void 0===n||null===(c=n.topics)||void 0===c?void 0:c.find((function(e){return e.id===f}))}),[T,a,f]);Object(c.useEffect)((function(){h&&h(!1),(null===E||void 0===E?void 0:E.topicable_type)!==r.TopicType.Video&&(null===E||void 0===E?void 0:E.topicable_type)!==r.TopicType.Audio||h&&h(!0)}),[f,a,T,null===E||void 0===E?void 0:E.topicable_type,h]);var S=Object(c.useCallback)((function(){var e,t;(h&&h(!1),null!==T&&void 0!==T&&null!==(e=T.value)&&void 0!==e&&e.id)&&C(null===T||void 0===T||null===(t=T.value)||void 0===t?void 0:t.id,[{topic_id:Number(f),status:1}])}),[T,f,h,C]),F=Object(c.useCallback)((function(e){h&&h(!0),null!==e&&void 0!==e&&e.statement}),[T,f,I,h,y]);if(Object(c.useEffect)((function(){if(!x){var e=function(){return f&&!k(f)&&P(f)},t=setInterval((function(){e()}),5e3);return e(),function(){return clearInterval(t)}}}),[P,x,f,k]),!E)return Object(l.jsx)(o.a.Fragment,{});if(null===(t=E.topicable)||void 0===t||!t.value)return Object(l.jsx)("pre",{className:"error",children:"Error: topic.topicable?.value is missing"});if(E.topicable_type)switch(E.topicable_type){case r.TopicType.H5P:return Object(l.jsx)(v.H5P,{onXAPI:function(e){return F(e)},id:null===E||void 0===E||null===(n=E.topicable)||void 0===n?void 0:n.value});case r.TopicType.OEmbed:return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(j.OEmbedPlayer,{url:E.topicable.value,FallbackElement:Object(l.jsx)(v.H5P,{onXAPI:function(e){return F(e)},id:null===E||void 0===E||null===(s=E.topicable)||void 0===s?void 0:s.value})},f)});case r.TopicType.RichText:return Object(l.jsx)(u,{value:E.topicable.value,fontSize:w});case r.TopicType.Video:return Object(l.jsx)(b.AudioVideoPlayer,{mobile:m.isMobile,url:E.topicable.url,light:!0,onFinish:function(){return S()}});case r.TopicType.Image:return Object(l.jsx)(d.ImagePlayer,{topic:E,onLoad:function(){return S()}});case r.TopicType.Audio:return Object(l.jsx)(b.AudioVideoPlayer,{mobile:m.isMobile,audio:!0,url:E.topicable.value,light:!0,onFinish:function(){return S()}});case r.TopicType.Pdf:return Object(l.jsx)(p.PdfPlayer,{url:E.topicable.url});case r.TopicType.Scorm:return Object(l.jsx)("div",{className:"scorm-wrapper",children:Object(l.jsx)("iframe",{title:E.topicable.value,src:"".concat(_,"/api/scorm/play/").concat(E.topicable.uuid)})});default:return Object(l.jsx)("pre",{children:E.topicable_type})}return Object(l.jsx)("pre",{children:"loading... (or error)"})}}}]);
//# sourceMappingURL=11.56841cdd.chunk.js.map