(this["webpackJsonpescolalms-demo"]=this["webpackJsonpescolalms-demo"]||[]).push([[2],{662:function(e,t,n){"use strict";var a,o=n(74),r=n(20),c=n(663),i=n(3),u=r.default.div(a||(a=Object(o.a)(["\n  width: 100%;\n  height: 100%;\n  border: 1px solid\n    ",";\n"])),(function(e){var t=e.theme;return"light"===t.mode?t.gray4:t.gray2}));t.a=function(){return Object(i.jsx)(u,{children:Object(i.jsx)("img",{src:c.a,alt:""})})}},663:function(e,t,n){"use strict";t.a=n.p+"static/media/image.ece42557.svg"},670:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={defaultDateFormat:"dd/MM/yyyy",defaultDateTimeFormat:"dd/MM/yyyy, HH:mm"}},673:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return b}));var a=n(173),o=n(282),r=n(134),c=n(670),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a.defaultDateFormat;return e?Object(a.default)(new Date(e),t):""},u=function(e,t,n){return!(!e||!t)&&i(e,n)===i(t,n)},s=function(e){var t=[];return e.forEach((function(e){var n=Object(a.default)(new Date(e),"MM/dd/yyyy"),o=t.find((function(e){return Object(a.default)(new Date(e.date),"MM/dd/yyyy")===n}));o?o.times.push(new Date(e)):t.push({date:n,times:[new Date(e)]})})),t},d=function(e){return e.filter((function(e){return Object(o.default)(e,new Date)}))},l=function(e){return e.sort((function(e,t){return e.getTime()-t.getTime()}))},m=function(e){var t=Array.from(e.matchAll(/(\d+)\s+(day|hour|minute|second|week|year)s?/g)),n={},a=!1;if(t.forEach((function(e){a=!0;var t=parseInt(e[1]),o=e[2];n[o]?n[o]+=t:n[o]=t})),!a){Array.from(e.matchAll(/\d+/g)).forEach((function(e){var t=parseInt(e[0]);n.hour=t}))}return n},b=function(e,t){return Object(r.a)(new Date(e),{years:t.year||0,months:t.month||0,weeks:t.week||0,days:t.day||0,hours:t.hour||0,minutes:t.minute||0,seconds:t.second||0})}},679:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s}));var a=n(367),o=n(670),r=n(673),c=function(e){var t;return e?null===(t=e.items)||void 0===t?void 0:t.map((function(e){return e.name})).join(", "):""},i=function(e){var t,n,i,u,s,d,l,m,b,v,j,p,f,y,h,O,T,g,x,_,k,C,E,w,D,P,S,A,F,B,I,M,R,L,z,H,J,U,W,N,q,G,K,Q,V,X="".concat("Notifications.").concat(e.event);switch(e.event){case a.EventTypes.StationaryEventAuthorAssigned:return{translation:X,object:{name:(null===(t=e.data.stationaryEvent)||void 0===t?void 0:t.name)||""}};case a.EventTypes.StationaryEventAuthorUnassigned:return{translation:X,object:{name:(null===(n=e.data.stationaryEvent)||void 0===n?void 0:n.name)||""}};case a.EventTypes.StationaryEventAssigned:return{translation:X,object:{name:(null===(i=e.data.stationaryEvent)||void 0===i?void 0:i.name)||""}};case a.EventTypes.StationaryEventUnassigned:return{translation:X,object:{name:(null===(u=e.data.stationaryEvent)||void 0===u?void 0:u.name)||""}};case a.EventTypes.AbandonedCartEvent:case a.EventTypes.OrderCancelled:case a.EventTypes.OrderCreated:return{translation:X};case a.EventTypes.OrderPaid:return{translation:X,object:{name:c(e.data.order)||""}};case a.EventTypes.ProductableAttached:return{translation:X,object:{name:(null===(s=e.data.productable)||void 0===s?void 0:s.name)||""}};case a.EventTypes.ProductableDetached:return{translation:X,object:{name:(null===(d=e.data.productable)||void 0===d?void 0:d.name)||""}};case a.EventTypes.ProductAddedToCart:return{translation:X,object:{name:(null===(l=e.data.product)||void 0===l?void 0:l.name)||""}};case a.EventTypes.ProductAttached:return{translation:X,object:{name:(null===(m=e.data.product)||void 0===m?void 0:m.name)||""}};case a.EventTypes.ProductBought:return{translation:X,object:{name:(null===(b=e.data.product)||void 0===b?void 0:b.name)||""}};case a.EventTypes.ProductDetached:return{translation:X,object:{name:(null===(v=e.data.product)||void 0===v?void 0:v.name)||""}};case a.EventTypes.ProductRemovedFromCart:return{translation:X,object:{name:(null===(j=e.data.product)||void 0===j?void 0:j.name)||""}};case a.EventTypes.PaymentCancelled:return{translation:X,object:{amount:(null===(p=e.data.payment)||void 0===p?void 0:p.amount)||0,name:c(null===(f=e.data.payment)||void 0===f?void 0:f.payable)}};case a.EventTypes.PaymentFailed:return{translation:X,object:{amount:(null===(y=e.data.payment)||void 0===y?void 0:y.amount)||0,name:c(null===(h=e.data.payment)||void 0===h?void 0:h.payable)}};case a.EventTypes.PaymentRegistered:return{translation:X,object:{amount:(null===(O=e.data.payment)||void 0===O?void 0:O.amount)||0}};case a.EventTypes.PaymentSuccess:return{translation:X,object:{amount:(null===(T=e.data.payment)||void 0===T?void 0:T.amount)||0,name:c(null===(g=e.data.payment)||void 0===g?void 0:g.payable)}};case a.EventTypes.CourseAccessFinished:return{translation:X,object:{name:(null===(x=e.data.course)||void 0===x?void 0:x.title)||""}};case a.EventTypes.CourseAccessStarted:return{translation:X,object:{name:(null===(_=e.data.course)||void 0===_?void 0:_.title)||""}};case a.EventTypes.CourseAssigned:return{translation:X,object:{name:(null===(k=e.data.course)||void 0===k?void 0:k.title)||""}};case a.EventTypes.CourseDeadlineSoon:return{translation:X,object:{name:(null===(C=e.data.course)||void 0===C?void 0:C.title)||"",date:Object(r.d)(null===(E=e.data.course)||void 0===E?void 0:E.active_to,o.a.defaultDateTimeFormat)}};case a.EventTypes.CoursedPublished:return{translation:X,object:{name:(null===(w=e.data.course)||void 0===w?void 0:w.title)||""}};case a.EventTypes.CourseFinished:return{translation:X,object:{name:(null===(D=e.data.course)||void 0===D?void 0:D.title)||""}};case a.EventTypes.CourseStarted:return{translation:X,object:{name:(null===(P=e.data.course)||void 0===P?void 0:P.title)||""}};case a.EventTypes.CourseStatusChanged:return{translation:X,object:{name:(null===(S=e.data.course)||void 0===S?void 0:S.title)||""}};case a.EventTypes.CourseTutorAssigned:return{translation:X,object:{name:(null===(A=e.data.course)||void 0===A?void 0:A.title)||""}};case a.EventTypes.CourseTutorUnassigned:return{translation:X,object:{name:(null===(F=e.data.course)||void 0===F?void 0:F.title)||""}};case a.EventTypes.CourseUnassigned:return{translation:X,object:{name:(null===(B=e.data.course)||void 0===B?void 0:B.title)||""}};case a.EventTypes.TopicFinished:return{translation:X,object:{name:(null===(I=e.data.course)||void 0===I?void 0:I.title)||""}};case a.EventTypes.TopicTypeChanged:return{translation:X,object:{name:(null===(M=e.data.topicContent)||void 0===M?void 0:M.value)||""}};case a.EventTypes.ReportTerm:return{translation:X,object:{name:(null===(R=e.data.consultationTerm)||void 0===R?void 0:R.consultation.name)||"",date:Object(r.d)(null===(L=e.data.consultationTerm)||void 0===L?void 0:L.executed_at,o.a.defaultDateTimeFormat),user:"".concat(null===(z=e.data.consultationTerm)||void 0===z||null===(H=z.user)||void 0===H?void 0:H.first_name," ").concat(null===(J=e.data.consultationTerm)||void 0===J||null===(U=J.user)||void 0===U?void 0:U.last_name)}};case a.EventTypes.ApprovedTerm:return{translation:X,object:{date:Object(r.d)(null===(W=e.data.consultationTerm)||void 0===W?void 0:W.executed_at)||""}};case a.EventTypes.ApprovedTermWithTrainer:return{translation:X,object:{date:Object(r.d)(null===(N=e.data.consultationTerm)||void 0===N?void 0:N.executed_at)||""}};case a.EventTypes.ChangeTerm:return{translation:X,object:{date:Object(r.d)(null===(q=e.data.consultationTerm)||void 0===q?void 0:q.executed_at)||""}};case a.EventTypes.RejectTerm:return{translation:X,object:{date:Object(r.d)(null===(G=e.data.consultationTerm)||void 0===G?void 0:G.executed_at)||""}};case a.EventTypes.RejectTermWithTrainer:return{translation:X,object:{date:Object(r.d)(null===(K=e.data.consultationTerm)||void 0===K?void 0:K.executed_at)||""}};case a.EventTypes.ReminderAboutTerm:return{translation:X,object:{date:Object(r.d)(null===(Q=e.data.consultationTerm)||void 0===Q?void 0:Q.executed_at)||""}};case a.EventTypes.ReminderTrainerAboutTerm:return{translation:X,object:{date:Object(r.d)(null===(V=e.data.consultationTerm)||void 0===V?void 0:V.executed_at)||""}};default:return{translation:X}}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2?arguments[2]:void 0;if(!e||"number"!==typeof e)return 0;var a=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return n?a/n:a},s=function(e,t){return e?(t?u(e,2,100)*(1+t/100):u(e,2,100)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):0}},728:function(e,t,n){"use strict";var a,o=n(12),r=n(1),c=n(364),i=n(369),u=n.n(i),s=n(666),d=n(667),l=n(267),m=n(273),b=n(863),v=n.n(b),j=n(74),p=n(20),f=p.default.div(a||(a=Object(j.a)(["\n  .react-datepicker {\n    font-family: ",";\n    color: ",";\n    border-color: ",";\n    border-radius: ","px;\n    width: 100%;\n    margin-top: 0.5rem;\n  }\n\n  .react-datepicker__day--selected {\n    background-color: ",";\n  }\n\n  .react-datepicker__day--selected:hover {\n    background-color: ",";\n    opacity: 0.3;\n  }\n\n  .react-datepicker__month-container {\n    width: 100%;\n  }\n\n  .react-datepicker__current-month,\n  .react-datepicker-time__header,\n  .react-datepicker-year-header {\n    font-size: 14px;\n  }\n\n  .react-datepicker__day-name,\n  .react-datepicker__day,\n  .react-datepicker__time-name {\n    width: 4em;\n    line-height: 4em;\n  }\n\n  .react-datepicker__day--keyboard-selected:hover,\n  .react-datepicker__month-text--keyboard-selected:hover,\n  .react-datepicker__quarter-text--keyboard-selected:hover,\n  .react-datepicker__year-text--keyboard-selected:hover {\n    background-color: ",";\n    opacity: 0.3;\n    color: #ffffff;\n  }\n\n  .react-datepicker__header {\n    background-color: transparent;\n    border-color: ",";\n    border-top-right-radius: ","px;\n    border-top-left-radius: ","px;\n  }\n\n  .react-datepicker__input-time-container {\n    text-align: center;\n    margin: 15px 0;\n  }\n\n  .react-datepicker__input-time-container .react-datepicker-time__caption {\n    font-size: 14px;\n  }\n\n  .react-datepicker__input-time-container\n    .react-datepicker-time__input-container\n    .react-datepicker-time__input\n    input {\n    font-size: 14px;\n    padding: 1em;\n    border-radius: ","px;\n    border-color: ",";\n    border-width: 1px;\n    border-style: solid;\n  }\n\n  .react-datepicker__input-time-container\n    .react-datepicker-time__input-container\n    .react-datepicker-time__input\n    input:focus {\n    outline: none;\n  }\n"])),(function(e){return e.theme.font}),(function(e){return e.theme.textColor}),(function(e){var t=e.theme;return"dark"===t.mode?t.gray1:t.gray3}),(function(e){return e.theme.buttonRadius||2}),(function(e){return e.theme.primaryColor}),(function(e){return e.theme.primaryColor}),(function(e){return e.theme.primaryColor}),(function(e){var t=e.theme;return"dark"===t.mode?t.gray1:t.gray3}),(function(e){return e.theme.buttonRadius||2}),(function(e){return e.theme.buttonRadius||2}),(function(e){return e.theme.buttonRadius||2}),(function(e){var t=e.theme;return"dark"===t.mode?t.gray1:t.gray3})),y=(n(862),n(880)),h=n(877),O=n(3);Object(b.registerLocale)("pl",h.a),Object(b.registerLocale)("en",y.a);var T,g=function(e){var t=e.selectedDate,n=e.onChange,a=e.includeDates,o=e.includeTimes,r=e.minDate,c=e.showTimeInput,i=e.timeInputLabel,u=Object(l.a)().i18n;return Object(O.jsx)(f,{children:Object(O.jsx)(v.a,{selected:t,onChange:n,includeDates:a,includeTimes:o,inline:!0,locale:u.language,minDate:r,showTimeInput:c,timeInputLabel:i})})},x=n(30),_=n(55),k=n(673),C=n(382),E=p.default.div(T||(T=Object(j.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.54rem;\n  margin: 0.5rem 0 2rem 0;\n\n  @keyframes fadeIn {\n    0% {\n      opacity: 0;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n\n  button {\n    animation: fadeIn 0.4s;\n  }\n"]))),w=function(e){var t,n,a=e.consultation,c=e.onClose,i=Object(r.useState)(null),u=Object(o.a)(i,2),b=u[0],v=u[1],j=Object(r.useState)(null),p=Object(o.a)(j,2),f=p[0],y=p[1],h=Object(r.useState)(!1),T=Object(o.a)(h,2),w=T[0],D=T[1],P=Object(l.a)().t,S=Object(r.useContext)(_.EscolaLMSContext).bookConsultationTerm,A=Object(k.g)(Object(k.f)((null===a||void 0===a||null===(t=a.proposed_terms)||void 0===t?void 0:t.map((function(e){return new Date(e)})))||[])),F=Object(k.b)(A),B=b&&(null===(n=F.find((function(e){return Object(k.e)(e.date,b)})))||void 0===n?void 0:n.times)||[],I=a.in_coming,M="approved"===a.executed_status,R=!(null===A||void 0===A||!A.length);Object(r.useEffect)((function(){A[0]&&v(A[0])}),[]);var L=Object(r.useCallback)((function(){c(),v(null),y(null)}),[c]),z=Object(r.useCallback)(Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.consultation_term_id||!f){e.next=7;break}return D(!0),e.next=4,S(a.consultation_term_id,f.toISOString());case 4:e.sent.success&&(L(),m.b.success(P("ConsultationPage.ReportTermSuccess"))),D(!1);case 7:case"end":return e.stop()}}),e)}))),[a.consultation_term_id,f,S,L,P]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{onChange:function(e){v(e),y(null)},selectedDate:b,includeDates:A,includeTimes:B}),Object(O.jsx)(E,{children:B.map((function(e){return Object(O.jsx)(x.Button,{mode:Object(k.e)(e,f,"HH:mm")?"secondary":"outline",onClick:function(){return y(e)},children:Object(k.d)(e,"HH:mm")})}))}),!R&&Object(O.jsx)(C.Tag,{children:P("ConsultationPage.NoTermsAvailable")}),R&&Object(O.jsx)(x.Button,{mode:"secondary",onClick:z,block:!0,disabled:!b||!f,loading:w,children:P(I&&M?"ConsultationPage.ChangeTerm":"ConsultationPage.Book")})]})},D=n(73),P=n.n(D),S=n(35),A=function(e){var t=e.consultation,n=e.onClose,a=Object(r.useState)(null),c=Object(o.a)(a,2),i=c[0],u=c[1],b=Object(r.useContext)(S.EscolaLMSContext).bookConsultationTerm,v=Object(r.useState)(!1),j=Object(o.a)(v,2),p=j[0],f=j[1],y=Object(l.a)().t,h=t.in_coming,T="approved"===t.executed_status,x=Object(r.useCallback)((function(){n(),u(null)}),[n]),_=Object(r.useCallback)(Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.consultation_term_id||!i){e.next=7;break}return f(!0),e.next=4,b(t.consultation_term_id,i.toISOString());case 4:e.sent.success&&(x(),m.b.success(y("ConsultationPage.ReportTermSuccess"))),f(!1);case 7:case"end":return e.stop()}}),e)}))),[t.consultation_term_id,i,b,x,y]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{onChange:function(e){u(e)},selectedDate:i,minDate:new Date,showTimeInput:!0,timeInputLabel:"".concat(y("Time"),": ")}),Object(O.jsx)(P.a,{mode:"secondary",onClick:_,block:!0,disabled:!i,loading:p,children:y(h&&T?"ConsultationPage.ChangeTerm":"ConsultationPage.Book")})]})},F=function(e){var t,n=e.onClose,a=e.visible,o=e.consultation,r="single"===(null===(t=o.product)||void 0===t?void 0:t.type);return Object(O.jsx)(u.a,{onClose:n,visible:a,animation:"zoom",maskAnimation:"fade",destroyOnClose:!0,width:468,children:r?Object(O.jsx)(A,{consultation:o,onClose:n}):Object(O.jsx)(w,{consultation:o,onClose:n})})},B=n(34),I=function(e){var t=e.consultationTermId,n=Object(l.a)().t,a=Object(r.useContext)(S.EscolaLMSContext).generateConsultationJitsy,o=Object(r.useCallback)(Object(d.a)(Object(s.a)().mark((function e(){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:(n=e.sent).success&&window.open(n.data.url,"_blank","noreferrer");case 4:case"end":return e.stop()}}),e)}))),[t,a]);return Object(O.jsx)(D.Button,{mode:"secondary",onClick:o,block:!0,children:n("ConsultationPage.Join")})},M=function(e){var t=e.showBookTerm,n=Object(l.a)().t,a=Object(r.useCallback)((function(){t(!0)}),[t]);return Object(O.jsx)(D.Button,{mode:"secondary",onClick:a,block:!0,children:n("ConsultationPage.Book")})},R=function(e){var t=e.showBookTerm,n=Object(l.a)().t,a=Object(r.useCallback)((function(){t(!0)}),[t]);return Object(O.jsx)(D.Button,{mode:"secondary",onClick:a,block:!0,children:n("ConsultationPage.ChangeTerm")})},L=function(e){var t,n=e.consultation,a=e.showBookTerm,o=Object(B.g)(),r=Object(l.a)().t,c=n.is_started,i=n.in_coming,u="reported"===n.executed_status,s="not_reported"===n.executed_status;return u?null:null!==(t=n.product)&&void 0!==t&&t.owned&&s?Object(O.jsx)(M,{showBookTerm:function(e){return a(e)}}):c&&n.consultation_term_id?Object(O.jsx)(I,{consultationTermId:n.consultation_term_id}):i?Object(O.jsx)(R,{showBookTerm:function(e){return a(e)}}):Object(O.jsx)(D.Button,{mode:"secondary",onClick:function(){return o.push("/consultations/".concat(n.id))},block:!0,children:r("ConsultationPage.Show")})},z=n(110),H=n(670),J=n(679),U=n(268),W=function(e){var t=e.consultation,n=t.is_ended,a="reported"===t.executed_status,o="approved"===t.executed_status,r=Object(k.d)(t.executed_at,H.a.defaultDateTimeFormat);return Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)(x.IconText,{icon:Object(O.jsx)(U.o,{}),text:n&&t.executed_at?Object(O.jsx)(O.Fragment,{children:"".concat(Object(z.t)("ConsultationPage.Finished"),": ").concat(Object(k.d)(Object(k.a)(t.executed_at,Object(k.c)("".concat(t.duration))),H.a.defaultDateTimeFormat))}):Object(O.jsxs)(O.Fragment,{children:[t.duration,t.product&&" - ".concat(Object(J.a)(t.product.price,t.product.tax_rate)," z\u0142")]})}),a&&!n&&Object(O.jsx)(x.Tag,{children:Object(z.t)("ConsultationPage.WaitForTutorDecision",{date:r})}),o&&!n&&Object(O.jsx)(x.Tag,{children:Object(z.t)("ConsultationPage.TutorAcceptedTerm",{date:r})})]})},N=n(48),q=n(661),G=n.n(q),K=n(662),Q=function(e){var t=e.consultation;return Object(O.jsx)(N.c,{to:"/consultations/".concat(t.id),children:t.image_path?Object(O.jsx)(G.a,{path:t.image_path,alt:t.name,srcSizes:[300,600,900]}):Object(O.jsx)(K.a,{})})};t.a=function(e){var t=e.consultation,n=Object(r.useState)(!1),a=Object(o.a)(n,2),i=a[0],u=a[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(c.CourseCard,{id:t.id,image:Object(O.jsx)(Q,{consultation:t}),title:"".concat(t.name),footer:Object(O.jsx)(W,{consultation:t}),actions:Object(O.jsx)(L,{consultation:t,showBookTerm:function(e){return u(e)}})}),Object(O.jsx)(F,{visible:i,onClose:function(){return u(!1)},consultation:t})]})}}}]);
//# sourceMappingURL=2.d2c178b4.chunk.js.map