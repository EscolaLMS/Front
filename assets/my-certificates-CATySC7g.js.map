{"version":3,"file":"my-certificates-CATySC7g.js","sources":["../../src/components/Profile/ProfileCertificates/index.tsx","../../src/pages/user/my-certificates.tsx"],"sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport { Title } from \"@escolalms/components/lib/components/atoms/Typography/Title\";\nimport styled from \"styled-components\";\nimport { PdfIcon } from \"../../../icons\";\nimport { useCertificateDownload } from \"@/hooks/useDownloadCertificate\";\nimport { CertificateCard } from \"@escolalms/components/lib/index\";\nimport { Col, Row } from \"react-grid-system\";\nimport ContentLoader from \"@/components/_App/ContentLoader\";\n\ntype CertType = API.Certificate;\n\nconst CertificatesList = styled.section`\n  .empty-certificates-message {\n    background: ${({ theme }) =>\n      theme.mode === \"dark\" ? theme.gray1 : theme.gray5};\n  }\n  .buttons-container {\n    margin-top: 20px;\n    display: flex;\n\n    align-items: center;\n    justify-content: flex-start;\n\n    .download-btn {\n      all: unset;\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      cursor: pointer;\n      color: ${({ theme }) => theme.primaryColor};\n      p {\n        color: ${({ theme }) => theme.primaryColor};\n      }\n    }\n  }\n  .certificate-card {\n    margin-bottom: 24px;\n  }\n`;\n\nconst ProfileCertificates: React.FC = () => {\n  const { certificates, fetchCertificates } = useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n\n  const { downloadCertificate, loadingId } = useCertificateDownload();\n\n  useEffect(() => {\n    fetchCertificates();\n  }, [fetchCertificates]);\n\n  return (\n    <>\n      <CertificatesList>\n        {certificates.list?.data.length === 0 && (\n          <Text className=\"empty-certificates-message\">\n            <strong>{t(\"MyProfilePage.EmptyCertificates\")}</strong>\n          </Text>\n        )}\n        <Row>\n          {certificates &&\n            certificates?.list?.data &&\n            certificates.list?.data.length > 0 &&\n            certificates?.list?.data\n              ?.filter((cert: CertType) => cert.title)\n              .map((cert: CertType) => (\n                <Col lg={4}>\n                  <CertificateCard\n                    uptitle={\n                      <Text size=\"13\">{t(\"CoursePage.CourseTitle\")}</Text>\n                    }\n                    title={\n                      <Title level={4} as=\"h3\">\n                        {cert.title}\n                      </Title>\n                    }\n                    dateUptitle={\n                      <Text size=\"13\">{t(\"CoursePage.CertificateDate\")}</Text>\n                    }\n                    date={\n                      <Text noMargin size={\"16\"} bold>\n                        {new Date(cert.created_at).toLocaleDateString(\"pl-PL\")}\n                      </Text>\n                    }\n                    actions={\n                      <div className=\"buttons-container\">\n                        {loadingId === cert.id ? (\n                          <ContentLoader width=\"15px\" height=\"15px\" />\n                        ) : (\n                          <button\n                            className=\"download-btn\"\n                            onClick={() =>\n                              downloadCertificate(cert.id, cert.title)\n                            }\n                          >\n                            <PdfIcon />{\" \"}\n                            <Text bold size=\"13\">\n                              {t(\"CoursePage.DownloadCertificate\")}\n                            </Text>\n                          </button>\n                        )}\n                      </div>\n                    }\n                  />\n                </Col>\n              ))}\n        </Row>\n      </CertificatesList>\n    </>\n  );\n};\n\nexport default ProfileCertificates;\n","import ProfileLayout from \"@/components/Profile/ProfileLayout\";\nimport styled from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport ProfileCertificates from \"@/components/Profile/ProfileCertificates\";\n\nconst StyledWrapper = styled.div`\n  margin-top: 20px;\n`;\n\nconst MyCertificates = () => {\n  const { t } = useTranslation();\n  return (\n    <ProfileLayout title={t(\"MyProfilePage.MyCertificates\")}>\n      <StyledWrapper>\n        <ProfileCertificates />\n      </StyledWrapper>\n    </ProfileLayout>\n  );\n};\n\nexport default MyCertificates;\n"],"names":["CertificatesList","styled","theme","ProfileCertificates","certificates","fetchCertificates","useContext","EscolaLMSContext","t","useTranslation","downloadCertificate","loadingId","useCertificateDownload","useEffect","jsx","Fragment","_a","Text","Row","_b","_c","_e","_d","cert","Col","CertificateCard","Title","ContentLoader","jsxs","PdfIcon","StyledWrapper","MyCertificates","ProfileLayout"],"mappings":"kUAeA,MAAMA,EAAmBC,EAAO;AAAA;AAAA,kBAEd,CAAC,CAAE,MAAAC,CAAA,IACfA,EAAM,OAAS,OAASA,EAAM,MAAQA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAexC,CAAC,CAAE,MAAAA,KAAYA,EAAM,YAAY;AAAA;AAAA,iBAE/B,CAAC,CAAE,MAAAA,KAAYA,EAAM,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAS5CC,EAAgC,IAAM,eAC1C,KAAM,CAAE,aAAAC,EAAc,kBAAAC,GAAsBC,EAAAA,WAAWC,EAAAA,gBAAgB,EACjE,CAAE,EAAAC,CAAA,EAAMC,EAAA,EAER,CAAE,oBAAAC,EAAqB,UAAAC,CAAA,EAAcC,EAAA,EAE3CC,OAAAA,EAAAA,UAAU,IAAM,CACdR,EAAA,CAAkB,EACjB,CAACA,CAAiB,CAAC,EAGpBS,EAAAA,IAAAC,EAAAA,SAAA,CACE,gBAACf,EAAA,CACE,SAAA,GAAAgB,EAAAZ,EAAa,OAAb,YAAAY,EAAmB,KAAK,UAAW,GAClCF,EAAAA,IAACG,EAAAA,KAAA,CAAK,UAAU,6BACd,SAAAH,EAAAA,IAAC,SAAA,CAAQ,SAAAN,EAAE,iCAAiC,EAAE,EAChD,EAEFM,EAAAA,IAACI,EAAAA,IAAA,CACE,SAAAd,KACCe,EAAAf,GAAA,YAAAA,EAAc,OAAd,YAAAe,EAAoB,SACpBC,EAAAhB,EAAa,OAAb,YAAAgB,EAAmB,KAAK,QAAS,KACjCC,GAAAC,EAAAlB,GAAA,YAAAA,EAAc,OAAd,YAAAkB,EAAoB,OAApB,YAAAD,EACI,OAAQE,GAAmBA,EAAK,OACjC,IAAKA,GACJT,EAAAA,IAACU,EAAAA,IAAA,CAAI,GAAI,EACP,SAAAV,EAAAA,IAACW,EAAAA,gBAAA,CACC,QACEX,EAAAA,IAACG,EAAAA,KAAA,CAAK,KAAK,KAAM,SAAAT,EAAE,wBAAwB,EAAE,EAE/C,YACGkB,QAAA,CAAM,MAAO,EAAG,GAAG,KACjB,WAAK,KAAA,CACR,EAEF,YACEZ,EAAAA,IAACG,EAAAA,KAAA,CAAK,KAAK,KAAM,SAAAT,EAAE,4BAA4B,EAAE,EAEnD,KACEM,EAAAA,IAACG,OAAA,CAAK,SAAQ,GAAC,KAAM,KAAM,KAAI,GAC5B,SAAA,IAAI,KAAKM,EAAK,UAAU,EAAE,mBAAmB,OAAO,EACvD,EAEF,QACET,EAAAA,IAAC,MAAA,CAAI,UAAU,oBACZ,SAAAH,IAAcY,EAAK,GAClBT,EAAAA,IAACa,EAAA,CAAc,MAAM,OAAO,OAAO,OAAO,EAE1CC,EAAAA,KAAC,SAAA,CACC,UAAU,eACV,QAAS,IACPlB,EAAoBa,EAAK,GAAIA,EAAK,KAAK,EAGzC,SAAA,CAAAT,EAAAA,IAACe,EAAA,EAAQ,EAAG,IACZf,MAACG,EAAAA,MAAK,KAAI,GAAC,KAAK,KACb,SAAAT,EAAE,gCAAgC,CAAA,CACrC,CAAA,CAAA,CAAA,CACF,CAEJ,CAAA,CAAA,CAEJ,CACF,GACD,CACP,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,EC5GMsB,EAAgB7B,EAAO;AAAA;AAAA,EAIvB8B,EAAiB,IAAM,CAC3B,KAAM,CAAE,EAAAvB,CAAA,EAAMC,EAAA,EACd,OACEK,EAAAA,IAACkB,EAAA,CAAc,MAAOxB,EAAE,8BAA8B,EACpD,SAAAM,EAAAA,IAACgB,EAAA,CACC,SAAAhB,EAAAA,IAACX,EAAA,CAAA,CAAoB,CAAA,CACvB,EACF,CAEJ"}