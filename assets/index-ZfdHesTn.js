import{j as e,J as d,at as j,D as y,e as w,b as P,a as S,k as b}from"./index-DHorRSia.js";import{R as D,r as p}from"./sentry-DZqhWugq.js";import{C as E}from"./index-BwC7q4kx.js";import{C as _}from"./index-CQH0_yYz.js";import{P as v}from"./index-DcaIG2pc.js";import{c as F,M as h,u as M,d as R,S as L,e as N,C as T,f as q,E as O}from"./index-VF-j7V9X.js";import{q as x}from"./base-Bd27snqx.js";import"./katex-D1m830yy.js";import"./lodash-Bu-jC-fW.js";import"./swiper-CphuuvCl.js";import"./CourseCard-yQmPKytJ.js";import"./index-B7vnVY_d.js";import"./index-DgDBwUqe.js";const k=({consultation:t})=>e.jsx(_,{consultation:t,showPrice:!0}),A=({consultations:t,loading:n,handlePageChange:i})=>{var o;const a=t==null?void 0:t.meta;return n?e.jsx(F,{}):e.jsxs(e.Fragment,{children:[e.jsx(d.Row,{style:{gap:"30px 0",marginBottom:"30px"},children:!n&&((o=t==null?void 0:t.data)==null?void 0:o.map(s=>e.jsx(d.Col,{md:6,lg:4,xl:3,children:e.jsx(k,{consultation:s})},s.id)))}),a&&(Number(a==null?void 0:a.total)||0)>(Number(a==null?void 0:a.per_page)||0)&&e.jsx(v,{total:a.total,perPage:Number(a.per_page),currentPage:a.current_page,onPage:s=>i(s)}),e.jsx("br",{})]})},I=()=>{var C;const[t,n]=D.useState({showDrawer:!1,type:h.categories}),{entities:i,loading:a,prevCategories:o,handleSortChange:s,handlePageChange:m,handleRemoveCategory:c,handleCategoryChange:u,onClearCategories:r,params:g,categoryTree:l}=M("consultations");return e.jsxs(e.Fragment,{children:[e.jsx(R,{prevCategories:o,onClearCategories:r,handleCategoryChange:u,categories:l.list||[],handleSortChange:s,params:g,setMobileDrawerState:n,parentState:t}),o.length>0&&e.jsx(L,{onClearCategories:r,prevCategories:o,handleRemoveCategory:c}),e.jsx(A,{consultations:i||[],loading:a,handlePageChange:m}),l&&e.jsx(e.Fragment,{children:e.jsx(E,{categories:((C=l.list)==null?void 0:C.filter(f=>!!f.icon))||[],entity:"consultations"})}),e.jsx(j,{isOpen:t.showDrawer,onClose:()=>n({showDrawer:!1,type:h.categories}),height:t.type===h.categories?"40vh":"12vh",children:e.jsx(N,{showDrawer:t.showDrawer,type:t.type,prevCategories:o,onClearCategories:r,handleCategoryChange:u,categories:l.list||[],handleSortChange:s,setMobileDrawerState:n})})]})},$=(t,n)=>{const[i,a]=p.useState(),[o,s]=p.useState(!0),{fetchConsultations:m}=p.useContext(y.EscolaLMSContext),c=async u=>{s(!0);try{const r=await m(u);r&&a(r)}catch(r){console.error(r),a(void 0)}finally{s(!1)}};return p.useEffect(()=>{},[m]),{consultations:i,loading:o,fetchConsultationsData:c}},B=(t={})=>x.stringify(t),G=t=>{const{children:n}=t,[i,a]=p.useState({page:1,per_page:T,order_by:"created_at"}),{consultations:o,loading:s,fetchConsultationsData:m}=$(),c=w(),{push:u}=P(),r=x.parse(c.search),g=p.useMemo(()=>r&&{...r,order_by:"created_at"},[r]),l=g||i;return p.useEffect(()=>{u(`${c.pathname}?${B(l)}`),m(l)},[c.search]),e.jsx(q.Provider,{value:{params:i,setParams:a,consultations:o,loading:s},children:n})},ae=()=>{const{t}=S();return e.jsx(b,{metaTitle:t("ConsultationsPageMeta"),children:e.jsx(G,{children:e.jsx(O,{title:t("ConsultationsPageMeta"),children:e.jsx(I,{})})})})};export{ae as default};
//# sourceMappingURL=index-ZfdHesTn.js.map
