{"version":3,"file":"index-DqPefzAZ.js","sources":["../../src/components/Courses/CoursesProvider.tsx","../../src/pages/courses/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport qs from \"query-string\";\nimport { CoursesContext } from \"./CoursesContext\";\nimport { COURSES_ON_PAGE } from \"@/config/courses\";\nimport useFetchCourses from \"@/hooks/courses/useFetchCourses\";\n\nconst parseParams = (params: API.CourseParams = {}) => {\n  return qs.stringify(params);\n};\n\nconst CoursesProvider: React.FC<{\n  onlyFree?: boolean;\n  children: React.ReactNode;\n}> = ({ onlyFree = true, children }) => {\n  const [params, setParams] = useState<API.CourseParams>({\n    page: 1,\n    per_page: COURSES_ON_PAGE,\n    order_by: \"created_at\",\n  });\n  const { courses, loading, fetchCoursesData } = useFetchCourses(params, true);\n  const location = useLocation();\n  const { push } = useHistory();\n\n  useEffect(() => {\n    const searchParams = qs.parse(location.search);\n    const parsedParams = searchParams && {\n      ...searchParams,\n      order_by: \"created_at\",\n    };\n    const newParams = parsedParams ? parsedParams : params;\n    setParams(newParams);\n\n    push(`${location.pathname}?${parseParams(newParams)}`);\n    fetchCoursesData(newParams);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location.search]);\n\n  return (\n    <CoursesContext.Provider\n      value={{ params, setParams, courses, onlyFree, loading }}\n    >\n      {children}\n    </CoursesContext.Provider>\n  );\n};\n\nexport default CoursesProvider;\n","import Layout from \"@/components/_App/Layout\";\nimport CoursesCollection from \"@/components/Courses/CoursesCollection\";\nimport CoursesProvider from \"@/components/Courses/CoursesProvider\";\nimport { useTranslation } from \"react-i18next\";\nimport EntityPageWrapper from \"@/components/Layouts\";\n\nconst CoursesPage = () => {\n  const { t } = useTranslation();\n  return (\n    <Layout metaTitle={t(\"CoursesPage.Courses\")}>\n      <CoursesProvider onlyFree={false}>\n        <EntityPageWrapper title={t(\"CoursesPage.Courses\")}>\n          <CoursesCollection />\n        </EntityPageWrapper>\n      </CoursesProvider>\n    </Layout>\n  );\n};\n\nexport default CoursesPage;\n"],"names":["parseParams","params","qs","CoursesProvider","onlyFree","children","setParams","useState","COURSES_ON_PAGE","courses","loading","fetchCoursesData","useFetchCourses","location","useLocation","push","useHistory","useEffect","searchParams","parsedParams","newParams","jsx","CoursesContext","CoursesPage","t","useTranslation","Layout","EntityPageWrapper","CoursesCollection"],"mappings":"ibAQA,MAAMA,EAAc,CAACC,EAA2B,KACvCC,EAAG,UAAUD,CAAM,EAGtBE,EAGD,CAAC,CAAE,SAAAC,EAAW,GAAM,SAAAC,KAAe,CACtC,KAAM,CAACJ,EAAQK,CAAS,EAAIC,WAA2B,CACrD,KAAM,EACN,SAAUC,EACV,SAAU,YAAA,CACX,EACK,CAAE,QAAAC,EAAS,QAAAC,EAAS,iBAAAC,CAAqB,EAAAC,EAAgBX,EAAQ,EAAI,EACrEY,EAAWC,EAAY,EACvB,CAAE,KAAAC,CAAK,EAAIC,EAAW,EAE5BC,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAehB,EAAG,MAAMW,EAAS,MAAM,EACvCM,EAAeD,GAAgB,CACnC,GAAGA,EACH,SAAU,YACZ,EACME,EAAYD,GAA8BlB,EAChDK,EAAUc,CAAS,EAEnBL,EAAK,GAAGF,EAAS,QAAQ,IAAIb,EAAYoB,CAAS,CAAC,EAAE,EACrDT,EAAiBS,CAAS,CAAA,EAEzB,CAACP,EAAS,MAAM,CAAC,EAGlBQ,EAAA,IAACC,EAAe,SAAf,CACC,MAAO,CAAE,OAAArB,EAAQ,UAAAK,EAAW,QAAAG,EAAS,SAAAL,EAAU,QAAAM,CAAQ,EAEtD,SAAAL,CAAA,CACH,CAEJ,ECxCMkB,EAAc,IAAM,CAClB,KAAA,CAAE,EAAAC,CAAE,EAAIC,EAAe,EAE3B,OAAAJ,MAACK,GAAO,UAAWF,EAAE,qBAAqB,EACxC,SAAAH,EAAAA,IAAClB,GAAgB,SAAU,GACzB,eAACwB,EAAkB,CAAA,MAAOH,EAAE,qBAAqB,EAC/C,eAACI,EAAkB,CAAA,CAAA,EACrB,EACF,CACF,CAAA,CAEJ"}