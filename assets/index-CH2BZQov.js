import{F as L,n as d,r as c,m as h,f as E,h as f,j as s,v as F,C as R,o as p,i as g,z as w,G as l}from"./index-BoiM7txo.js";import{A as j,R as k}from"./AuthWrapper-DNvAmXzb.js";var S=L();const P=()=>{const{search:t,state:i}=d(),{user:n,socialAuthorize:m}=c.useContext(h.EscolaLMSContext),[x,a]=c.useState("login"),{t:o}=E(),e=f(),r=t.split("?token=")[1],u=i&&i.referrer||t.split("?referrer=")[1]||"/";return r&&(m(r),setTimeout(()=>{e.push(u)},1e3)),!n.loading&&!r&&n.value&&e.push(u),s.jsx(F,{metaTitle:o("LoginAndRegister"),children:s.jsx(j,{children:s.jsx(R,{children:x==="login"?s.jsx(S.LoginForm,{onResetPasswordLink:()=>a("forgotPassword"),onRegisterLink:()=>e.push(p.register),mobile:g,...w==="true"?{submitText:"Załóż darmowe konto"}:{}}):s.jsx(k.ResetPasswordForm,{mobile:g,backToLogin:()=>a("login"),onRegisterLink:()=>e.push(p.register),return_url:"#/reset-password",onFirstStepSuccess:()=>l(o("LoginPage.ForgotSuccess"),"success"),onFirstStepError:()=>l(o("UnexpectedError"),"error")})})})})};export{P as default};
