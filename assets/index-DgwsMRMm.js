import{K as L,o as d,r as l,n as h,h as f,i as R,j as s,x as E,C as F,p as t,k as p,F as P,D as k,E as j,N as g}from"./index-DVlJ60Mm.js";import{A as w,R as b}from"./AuthWrapper-Dc14yYt8.js";var S=L();const C=()=>{const{search:i,state:n}=d(),{user:a,socialAuthorize:x}=l.useContext(h.EscolaLMSContext),[m,u]=l.useState("login"),{t:r}=f(),e=R(),o=i.split("?token=")[1],c=n&&n.referrer||i.split("?referrer=")[1]||"/";return o&&(x(o),setTimeout(()=>{e.push(c)},1e3)),!a.loading&&!o&&a.value&&e.push(c),s.jsx(E,{metaTitle:r("LoginAndRegister"),children:s.jsx(w,{children:s.jsx(F,{children:m==="login"?s.jsx(S.LoginForm,{onResetPasswordLink:()=>u("forgotPassword"),onRegisterLink:()=>e.push(t.register),mobile:p,...P?{submitText:"Załóż darmowe konto"}:{}}):s.jsx(b.ResetPasswordForm,{mobile:p,backToLogin:()=>u("login"),onRegisterLink:()=>e.push(t.register),return_url:`${k}${j()}${t.reset}`,onFirstStepSuccess:()=>g(r("LoginPage.ForgotSuccess"),"success"),onFirstStepError:()=>g(r("UnexpectedError"),"error")})})})})};export{C as default};
