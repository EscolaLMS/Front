{"version":3,"file":"useDownloadCertificate-ByBy7IDl.js","sources":["../../src/hooks/useDownloadCertificate.ts"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\n\nexport const useCertificateDownload = () => {\n  const [loadingId, setLoadingId] = useState<number>(-1);\n  const { generateCertificate } = useContext(EscolaLMSContext);\n\n  const downloadCertificate = async (id: number, title?: string) => {\n    setLoadingId(id);\n    try {\n      const response = await generateCertificate(id);\n      if (response) {\n        const element = document.createElement(\"a\");\n        document.body.appendChild(element);\n        element.setAttribute(\"href\", URL.createObjectURL(new Blob([response])));\n        element.setAttribute(\"download\", `${title || \"Certificate\"}.pdf`);\n        element.style.display = \"\";\n        element.click();\n        document.body.removeChild(element);\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoadingId(-1);\n    }\n  };\n\n  return { loadingId, downloadCertificate };\n};\n"],"names":["useCertificateDownload","loadingId","setLoadingId","useState","generateCertificate","useContext","EscolaLMSContext","id","title","response","element","error"],"mappings":"+CAGO,MAAMA,EAAyB,IAAM,CAC1C,KAAM,CAACC,EAAWC,CAAY,EAAIC,WAAiB,EAAE,EAC/C,CAAE,oBAAAC,CAAA,EAAwBC,EAAA,WAAWC,kBAAgB,EAsBpD,MAAA,CAAE,UAAAL,EAAW,oBApBQ,MAAOM,EAAYC,IAAmB,CAChEN,EAAaK,CAAE,EACX,GAAA,CACI,MAAAE,EAAW,MAAML,EAAoBG,CAAE,EAC7C,GAAIE,EAAU,CACN,MAAAC,EAAU,SAAS,cAAc,GAAG,EACjC,SAAA,KAAK,YAAYA,CAAO,EACzBA,EAAA,aAAa,OAAQ,IAAI,gBAAgB,IAAI,KAAK,CAACD,CAAQ,CAAC,CAAC,CAAC,EACtEC,EAAQ,aAAa,WAAY,GAAGF,GAAS,aAAa,MAAM,EAChEE,EAAQ,MAAM,QAAU,GACxBA,EAAQ,MAAM,EACL,SAAA,KAAK,YAAYA,CAAO,CAAA,QAE5BC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAAA,QACjB,CACAT,EAAa,EAAE,CAAA,CAEnB,CAEwC,CAC1C"}