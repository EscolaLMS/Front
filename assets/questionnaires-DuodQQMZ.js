import{A as g,bR as p}from"./index-Duhnd3NG.js";var R=(t=>(t.COURSE="course",t.WEBINAR="webinar",t))(R||{}),w=(t=>(t.RATE="rate",t.TEXT="text",t.REVIEW="review",t))(w||{});const b=async({courseId:t,questionnaireId:n,fetchQuestionnaire:s})=>{try{const e=t&&await s(R.COURSE,t,n);if(e&&e.success)return e.data.questions}catch(e){g.error(p("UnexpectedError")),console.log(e)}},C=async({courseId:t,fetchQuestionnaires:n,fetchQuestionnaire:s,onSucces:e,onFinish:i})=>{try{const r=t&&await n(R.COURSE,t);if(r&&r.success){const f=await Promise.all(r.data.map(async a=>{const d=await b({courseId:t,questionnaireId:a.id,fetchQuestionnaire:s}),E=a.questions.reduce((c,u)=>{const o=d==null?void 0:d.find(v=>v.id===u.id),l={...u,rate:o==null?void 0:o.rate,note:o==null?void 0:o.note};return l.rate===null&&l.note===null&&c.push(l),c},[]);return{...a,questions:E.sort((c,u)=>c.position-u.position)}}));e(f.filter(a=>!!a.questions.length))}}catch(r){g.error(p("UnexpectedError")),console.log(r)}finally{i()}},U=t=>(t.reduce((s,e)=>s+e.avg_rate,0)/t.length).toFixed(1),y=({questionnaires:t,questionnaireId:n,questionType:s})=>{var e,i;return(i=(e=t==null?void 0:t.find(r=>r.id===n))==null?void 0:e.questions.filter(r=>r.public_answers).find(r=>r.type===s))==null?void 0:i.id};export{w as Q,R as a,y as b,C as c,U as g};
