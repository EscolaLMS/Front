import{N as f,ax as w}from"./index-BrDgRaEo.js";var p=(t=>(t.COURSE="course",t.WEBINAR="webinar",t))(p||{}),x=(t=>(t.RATE="rate",t.TEXT="text",t.REVIEW="review",t))(x||{});const C=async({courseId:t,questionnaireId:o,fetchQuestionnaire:n})=>{try{const s=t&&await n(p.COURSE,t,o);if(s&&s.success)return s.data.questions}catch(s){f(w("UnexpectedError"),"error"),console.log(s)}},g=async({courseId:t,fetchQuestionnaires:o,fetchQuestionnaire:n,onSucces:s,onFinish:a})=>{try{const r=t&&await o(p.COURSE,t);if(r&&r.success){const E=await Promise.all(r.data.map(async i=>{const d=await C({courseId:t,questionnaireId:i.id,fetchQuestionnaire:n}),R=i.questions.reduce((c,u)=>{const e=d==null?void 0:d.find(b=>b.id===u.id),l={...u,rate:e==null?void 0:e.rate,note:e==null?void 0:e.note};return l.rate===null&&l.note===null&&c.push(l),c},[]);return{...i,questions:R.sort((c,u)=>c.position-u.position)}}));s(E.filter(i=>!!i.questions.length))}}catch(r){f(w("UnexpectedError"),"error"),console.log(r)}finally{a()}},v=({questionnaires:t,questionnaireId:o,questionType:n})=>{var s,a;return(a=(s=t==null?void 0:t.find(r=>r.id===o))==null?void 0:s.questions.filter(r=>r.public_answers).find(r=>r.type===n))==null?void 0:a.id};export{p as Q,x as a,g as b,v as g};
