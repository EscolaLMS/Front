import{t as f}from"./toast-Bspdnwd0.js";import{aq as w}from"./index-DFLxrXjz.js";var p=(t=>(t.COURSE="course",t.WEBINAR="webinar",t))(p||{}),C=(t=>(t.RATE="rate",t.TEXT="text",t.REVIEW="review",t))(C||{});const U=async({courseId:t,questionnaireId:e,fetchQuestionnaire:n})=>{try{const s=t&&await n(p.COURSE,t,e);if(s&&s.success)return s.data.questions}catch(s){f(w("UnexpectedError"),"error"),console.log(s)}},v=async({courseId:t,fetchQuestionnaires:e,fetchQuestionnaire:n,onSucces:s,onFinish:a})=>{try{const r=t&&await e(p.COURSE,t);if(r&&r.success){const E=await Promise.all(r.data.map(async i=>{const d=await U({courseId:t,questionnaireId:i.id,fetchQuestionnaire:n}),R=i.questions.reduce((c,u)=>{const o=d==null?void 0:d.find(b=>b.id===u.id),l={...u,rate:o==null?void 0:o.rate,note:o==null?void 0:o.note};return l.rate===null&&l.note===null&&c.push(l),c},[]);return{...i,questions:R.sort((c,u)=>c.position-u.position)}}));s(E.filter(i=>!!i.questions.length))}}catch(r){f(w("UnexpectedError"),"error"),console.log(r)}finally{a()}},x=({questionnaires:t,questionnaireId:e,questionType:n})=>{var s,a;return(a=(s=t==null?void 0:t.find(r=>r.id===e))==null?void 0:s.questions.filter(r=>r.public_answers).find(r=>r.type===n))==null?void 0:a.id};export{p as Q,C as a,v as b,x as g};
