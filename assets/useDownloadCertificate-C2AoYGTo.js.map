{"version":3,"file":"useDownloadCertificate-C2AoYGTo.js","sources":["../../src/hooks/useDownloadCertificate.ts"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\n\nexport const useCertificateDownload = () => {\n  const [loadingId, setLoadingId] = useState<number>(-1);\n  const { generateCertificate } = useContext(EscolaLMSContext);\n\n  const downloadCertificate = async (id: number, title?: string) => {\n    setLoadingId(id);\n    try {\n      const response = await generateCertificate(id);\n      if (response) {\n        const element = document.createElement(\"a\");\n        document.body.appendChild(element);\n        element.setAttribute(\"href\", URL.createObjectURL(new Blob([response])));\n        element.setAttribute(\"download\", `${title || \"Certificate\"}.pdf`);\n        element.style.display = \"\";\n        element.click();\n        document.body.removeChild(element);\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoadingId(-1);\n    }\n  };\n\n  return { loadingId, downloadCertificate };\n};\n"],"names":["useCertificateDownload","loadingId","setLoadingId","useState","generateCertificate","useContext","EscolaLMSContext","id","title","response","element","error"],"mappings":"4EAGO,MAAMA,EAAyB,IAAM,CAC1C,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAiB,EAAE,EAC/C,CAAE,oBAAAC,CAAA,EAAwBC,EAAAA,WAAWC,kBAAgB,EAsB3D,MAAO,CAAE,UAAAL,EAAW,oBApBQ,MAAOM,EAAYC,IAAmB,CAChEN,EAAaK,CAAE,EACf,GAAI,CACF,MAAME,EAAW,MAAML,EAAoBG,CAAE,EAC7C,GAAIE,EAAU,CACZ,MAAMC,EAAU,SAAS,cAAc,GAAG,EAC1C,SAAS,KAAK,YAAYA,CAAO,EACjCA,EAAQ,aAAa,OAAQ,IAAI,gBAAgB,IAAI,KAAK,CAACD,CAAQ,CAAC,CAAC,CAAC,EACtEC,EAAQ,aAAa,WAAY,GAAGF,GAAS,aAAa,MAAM,EAChEE,EAAQ,MAAM,QAAU,GACxBA,EAAQ,MAAA,EACR,SAAS,KAAK,YAAYA,CAAO,CAAA,CACnC,OACOC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAAA,QACnB,CACET,EAAa,EAAE,CAAA,CACjB,CAGkB,CACtB"}