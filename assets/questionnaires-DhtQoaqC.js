import{Q as l}from"./questionnaire-CXWDgbJ4.js";import{z as f,af as y}from"./index-B2DLdQWL.js";const C=async({courseId:o,questionnaireId:n,fetchQuestionnaire:r})=>{try{const s=o&&await r(l.COURSE,o,n);if(s&&s.success)return s.data.questions}catch(s){f(y("UnexpectedError"),"error"),console.log(s)}},q=async({courseId:o,fetchQuestionnaires:n,fetchQuestionnaire:r,onSucces:s,onFinish:a})=>{try{const t=o&&await n(l.COURSE,o);if(t&&t.success){const Q=await Promise.all(t.data.map(async i=>{const p=await C({courseId:o,questionnaireId:i.id,fetchQuestionnaire:r}),w=i.questions.reduce((c,u)=>{const e=p==null?void 0:p.find(g=>g.id===u.id),d={...u,rate:e==null?void 0:e.rate,note:e==null?void 0:e.note};return d.rate===null&&d.note===null&&c.push(d),c},[]);return{...i,questions:w.sort((c,u)=>c.position-u.position)}}));s(Q.filter(i=>!!i.questions.length))}}catch(t){f(y("UnexpectedError"),"error"),console.log(t)}finally{a()}},x=({questionnaires:o,questionnaireId:n,questionType:r})=>{var s,a;return(a=(s=o==null?void 0:o.find(t=>t.id===n))==null?void 0:s.questions.filter(t=>t.public_answers).find(t=>t.type===r))==null?void 0:a.id};export{q as a,x as g};
//# sourceMappingURL=questionnaires-DhtQoaqC.js.map
