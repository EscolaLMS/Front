{"version":3,"file":"index-B_JYwQm9.js","sources":["../../src/hooks/usePrevious.ts","../../src/components/Skeletons/StaticPage/index.tsx","../../src/pages/static-page/index.tsx"],"sourcesContent":["/** https://usehooks.com/usePrevious/ **/\n\nimport { useEffect, useRef } from 'react';\nimport type { MutableRefObject } from 'react';\n\nexport default function usePrevious<T>(value: T): MutableRefObject<T | undefined>['current'] {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef<T>();\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n","import Skeleton from \"react-loading-skeleton\";\n\nconst StaticPageSkeleton = () => {\n  return (\n    <>\n      <div style={{ marginBottom: \"27px\" }}>\n        <Skeleton count={5} style={{ marginBottom: \"11px\", height: \"20px\" }} />\n      </div>\n      <div style={{ marginBottom: \"27px\" }}>\n        <Skeleton count={12} style={{ marginBottom: \"11px\", height: \"20px\" }} />\n      </div>\n      <div style={{ marginBottom: \"27px\" }}>\n        <Skeleton count={6} style={{ marginBottom: \"11px\", height: \"20px\" }} />\n      </div>\n    </>\n  );\n};\nexport default StaticPageSkeleton;\n","import React, { useContext, useEffect, useMemo } from \"react\";\nimport { useParams, Redirect, Link } from \"react-router-dom\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport routes from \"@/components/Routes/routes\";\nimport usePrevious from \"../../hooks/usePrevious\";\nimport Layout from \"@/components/_App/Layout\";\nimport styled from \"styled-components\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport { isMobile } from \"react-device-detect\";\nimport Breadcrumbs from \"@/components/Common/Breadcrumbs\";\nimport { useTranslation } from \"react-i18next\";\nimport { Col, Row } from \"react-grid-system\";\nimport Container from \"@/components/Common/Container\";\nimport routeRoutes from \"@/components/Routes/routes\";\nimport ProfileAside from \"@/components/Profile/ProfileAside\";\nimport StaticPageSkeleton from \"@/components/Skeletons/StaticPage\";\n\nconst StyledStaticPage = styled.section`\n  background-color: ${({ theme }) => theme.gray4};\n  min-height: calc(100vh - 400px);\n  padding-top: ${isMobile ? \"0px\" : \"57px\"};\n  .user-main-sidebar {\n    margin-top: ${isMobile ? \"60px\" : 0};\n  }\n  .content {\n    margin-top: ${isMobile ? \"30px\" : 0};\n  }\n`;\n\nconst StaticPage = () => {\n  const { slug } = useParams<{ slug: string }>();\n  const { fetchPage, page, fetchPages, pages } = useContext(EscolaLMSContext);\n\n  const prevSlug = usePrevious(slug);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (\n      slug &&\n      !page.loading &&\n      ((!page.value && !page.error) ||\n        (page.value && page.value?.slug !== slug) ||\n        (page.error && !prevSlug))\n    ) {\n      fetchPages();\n      fetchPage(String(slug));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [slug, page]);\n\n  // !page.value && !page.error - when very first load (empty state)\n  // page.value && page.value?.slug !== slug - when prev static page was different\n  // page.error && !prevSlug - when we return to static-page after error on static page (ex. when prev static page not exist)\n  const removeWord = (text: string) => {\n    return text.replace(\"Mobile\", \"\");\n  };\n\n  const mainTabs = useMemo(() => {\n    let items = pages?.list?.data;\n    items = pages?.list?.data.filter((item) => !item.slug.includes(\"mobile\"));\n    return (\n      items &&\n      items // @ts-ignore\n        .filter((item) => item.active)\n        .map((item) => ({\n          key: item.slug,\n          title: removeWord(item.title.substring(0, 50)),\n          url: item.slug,\n        }))\n    );\n  }, [pages]);\n\n  if (!page.loading && page.error && !page.error.success) {\n    return <Redirect to={routes.notFound} />;\n  }\n\n  return (\n    <Layout metaTitle={page.value?.title}>\n      <StyledStaticPage>\n        <Container>\n          {!isMobile && (\n            <Breadcrumbs\n              items={[\n                <Link to={routeRoutes.home}>{t<string>(\"Home\")}</Link>,\n                <Text size=\"12\">{page.value?.title}</Text>,\n              ]}\n            />\n          )}\n\n          <Row>\n            <Col lg={3} sm={12} xs={12}>\n              <ProfileAside tabs={mainTabs || []} isProfile={false} />\n            </Col>\n            <Col offset={{ xs: 0, sm: 0, lg: 1 }} sm={12} lg={8}>\n              <div className=\"content\">\n                {page.loading ||\n                (!page.value && !page.error) ||\n                (page.value && page.value?.slug !== slug) ||\n                (page.error && !prevSlug) ? (\n                  <StaticPageSkeleton />\n                ) : (\n                  <MarkdownRenderer>\n                    {page?.value?.content || \"\"}\n                  </MarkdownRenderer>\n                )}\n              </div>\n            </Col>\n          </Row>\n        </Container>\n      </StyledStaticPage>\n    </Layout>\n  );\n};\n\nexport default StaticPage;\n"],"names":["usePrevious","value","ref","useRef","useEffect","StaticPageSkeleton","jsxs","Fragment","jsx","Skeleton","StyledStaticPage","styled","theme","isMobile","StaticPage","slug","useParams","fetchPage","page","fetchPages","pages","useContext","EscolaLMSContext","prevSlug","t","useTranslation","_a","removeWord","text","mainTabs","useMemo","items","_b","item","Redirect","routes","Layout","Container","Breadcrumbs","Link","routeRoutes","Text","Row","Col","ProfileAside","_c","MarkdownRenderer"],"mappings":"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"}