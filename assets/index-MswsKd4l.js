import{J as L,n as d,r as l,m as f,f as h,h as R,j as s,w as E,C as P,o as t,i as g,E as w,A as F,D as j,K as p}from"./index-B3KsnArT.js";import{A as k,R as b}from"./AuthWrapper-CWqRDZpE.js";var A=L();const C=()=>{const{search:i,state:n}=d(),{user:a,socialAuthorize:m}=l.useContext(f.EscolaLMSContext),[x,u]=l.useState("login"),{t:r}=h(),e=R(),o=i.split("?token=")[1],c=n&&n.referrer||i.split("?referrer=")[1]||"/";return o&&(m(o),setTimeout(()=>{e.push(c)},1e3)),!a.loading&&!o&&a.value&&e.push(c),s.jsx(E,{metaTitle:r("LoginAndRegister"),children:s.jsx(k,{children:s.jsx(P,{children:x==="login"?s.jsx(A.LoginForm,{onResetPasswordLink:()=>u("forgotPassword"),onRegisterLink:()=>e.push(t.register),mobile:g,...w?{submitText:"Załóż darmowe konto"}:{}}):s.jsx(b.ResetPasswordForm,{mobile:g,backToLogin:()=>u("login"),onRegisterLink:()=>e.push(t.register),return_url:`${F}${j()}${t.reset}`,onFirstStepSuccess:()=>p(r("LoginPage.ForgotSuccess"),"success"),onFirstStepError:()=>p(r("UnexpectedError"),"error")})})})})};export{C as default};
