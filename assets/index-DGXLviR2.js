import{f as N,r as n,j as r,b as u,s as d,M as m,G as C,h as y,C as P,v as b,l as E,L as v}from"./index-Blo-PJs7.js";import{P as f}from"./index-B83h2WWx.js";import{u as R,C as L,a as M}from"./index-BnaoDHO9.js";import"./index-BTjXvqmw.js";import"./ResponsiveImage-Dt4SFaY6.js";import"./Upload-DHqm1I-M.js";import"./index-UKkASopu.js";import"./app-B2E7767C.js";import"./date-Dq-o8tMk.js";const S=({program:a})=>{var i;const{topic:e,lesson:s,onNextTopicPreview:o,getNextPrevTopic:t}=R(a,"/courses/preview/"),{t:c}=N();return n.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[e==null?void 0:e.id,s==null?void 0:s.id]),r.jsx(u.Fragment,{children:r.jsx("div",{className:"course-program course-program-page",children:r.jsx("div",{className:"course-program-container",children:r.jsxs("div",{className:"course-program-wrapper course-program-wrapper-preview",children:[r.jsxs("div",{className:"course-program-player",children:[r.jsxs("div",{className:"course-program-player-content",children:[r.jsx("h2",{children:e==null?void 0:e.title}),e&&e.introduction&&r.jsx(d.Col,{sm:12,md:12,lg:12,children:r.jsx("div",{className:"container-md",children:r.jsx(m.MarkdownRenderer,{children:e.introduction})})}),r.jsx("div",{className:"course-program-player-content__wrapper",style:{...((i=e==null?void 0:e.json)==null?void 0:i.wrapperStyle)||{}},children:r.jsx(L,{preview:!0,topic:e,isThereAnotherTopic:!!t(Number(e==null?void 0:e.id))})})]}),r.jsxs(d.Row,{children:[s&&s.summary&&r.jsx(d.Col,{sm:12,md:12,lg:12,children:r.jsx("div",{className:"course-program-summary",children:r.jsx(m.MarkdownRenderer,{children:s.summary})})}),e&&e.summary&&r.jsx(d.Col,{sm:12,md:12,lg:12,children:r.jsx("div",{className:"course-program-summary",children:r.jsx(m.MarkdownRenderer,{children:e.summary})})})]}),r.jsx("div",{className:"course-program-player-next",children:r.jsxs("button",{className:"default-btn default-btn-equal",onClick:()=>o(),children:[r.jsxs("div",{className:"course-program-player-next-button__wrapper",children:[c("Next Topic")," >"]}),r.jsx("span",{})]})})]}),r.jsx(M,{course:a,topicId:Number(e==null?void 0:e.id)})]})})})})},T=({program:a})=>{var x,h;const e=(h=(x=a==null?void 0:a.scorm)==null?void 0:x.scos)==null?void 0:h.find(l=>l.entry_url!==void 0),s=e==null?void 0:e.uuid,o=n.useRef(null),[t,c]=n.useState(0),i=610,{apiUrl:w}=n.useContext(y.EscolaLMSContext);return n.useEffect(()=>{var l,p,j,g;o.current&&c(((g=(j=(p=(l=o.current)==null?void 0:l.contentWindow)==null?void 0:p.document)==null?void 0:j.body)==null?void 0:g.scrollHeight)||0)},[o]),!e&&!s?r.jsx(u.Fragment,{}):r.jsx(u.Fragment,{children:r.jsx("div",{className:"container-fluid course-program",children:r.jsx("div",{className:"course-program-player scorm",style:{height:`${i+t}px`},children:r.jsx("iframe",{title:"scorm-player",ref:o,src:`${w}/api/scorm/play/${s}`,scrolling:"no"})})})})},O=()=>{var t,c;const{t:a}=N(),{id:e}=C(),{program:s,fetchProgram:o}=n.useContext(y.EscolaLMSContext);return n.useEffect(()=>{e&&o(Number(e))},[e,o]),s.loading?r.jsx(f,{}):s.error?r.jsx(P,{children:r.jsxs("div",{className:"alert alert-danger",role:"alert",children:[r.jsx("h4",{className:"alert-heading",children:a("Error")}),r.jsxs("p",{children:[" ",s.error.message||s.error.error]}),r.jsx("hr",{}),r.jsxs("p",{className:"mb-0",children:[a("CoursePage.Preview.SeeOther"),r.jsx(b,{to:E.courses,children:a("Courses")}),"."]})]})}):s.value&&((c=(t=s==null?void 0:s.value)==null?void 0:t.scorm)!=null&&c.id)?r.jsx(v,{children:r.jsx(T,{program:s.value})}):s.value&&s.value.lessons&&s.value.lessons.length?r.jsxs(v,{children:[r.jsx(S,{program:s.value}),";"]}):r.jsx(f,{})};export{O as default};
