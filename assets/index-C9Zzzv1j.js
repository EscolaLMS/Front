import{y as L,e as d,c as f,a as h,b as R,j as s,k as P,C as k,g as p,v as E,f as t,z as l,A as F,s as b}from"./index-YRlvC1Yo.js";import{r as m}from"./sentry-DZqhWugq.js";import{A as j,R as w}from"./AuthWrapper-Dvjc_TMR.js";import"./katex-D1m830yy.js";import"./lodash-Bu-jC-fW.js";var A=L();const M=()=>{const{search:i,state:a}=d(),{user:n,socialAuthorize:g}=m.useContext(f.EscolaLMSContext),[x,c]=m.useState("login"),{t:r}=h(),e=R(),o=i.split("?token=")[1],u=a&&a.referrer||i.split("?referrer=")[1]||"/";return o&&(g(o),setTimeout(()=>{e.push(u)},1e3)),!n.loading&&!o&&n.value&&e.push(u),s.jsx(P,{metaTitle:r("LoginAndRegister"),children:s.jsx(j,{children:s.jsx(k,{children:x==="login"?s.jsx(A.LoginForm,{onResetPasswordLink:()=>c("forgotPassword"),onRegisterLink:()=>e.push(t.register),mobile:p,...E?{submitText:"Załóż darmowe konto"}:{}}):s.jsx(w.ResetPasswordForm,{mobile:p,backToLogin:()=>c("login"),onRegisterLink:()=>e.push(t.register),return_url:`${F}${b()}${t.reset}`,onFirstStepSuccess:()=>l(r("LoginPage.ForgotSuccess"),"success"),onFirstStepError:()=>l(r("UnexpectedError"),"error")})})})})};export{M as default};
//# sourceMappingURL=index-C9Zzzv1j.js.map
