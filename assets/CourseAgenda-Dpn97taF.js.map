{"version":3,"file":"CourseAgenda-Dpn97taF.js","sources":["../../src/components/Courses/Course/Players/TextPlayer.tsx","../../node_modules/@escolalms/sdk/lib/services/project.js","../../node_modules/@escolalms/components/lib/components/players/ProjectPlayer/ProjectPlayer.js","../../src/components/Courses/Course/Players/ScormPlayer.tsx","../../src/utils/course.ts","../../src/components/Courses/Course/Context/index.tsx","../../src/components/Courses/Course/CourseProgramContent.tsx"],"sourcesContent":["import { ReactElement, FunctionComponent, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { MarkdownRenderer } from \"@escolalms/components/lib/components/molecules/MarkdownRenderer/MarkdownRenderer\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { Download } from \"@escolalms/components/lib/components/atoms/Download/Download\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\n\nconst TextPlayerStyles = styled.div`\n  h1 {\n    font-size: 2em;\n  }\n  h2 {\n    font-size: 1.5em;\n  }\n  h3 {\n    font-size: 1.17em;\n  }\n  h4 {\n    font-size: 1em;\n  }\n  h5 {\n    font-size: 0.9em;\n  }\n  .resources-container {\n    padding: 24px 0;\n    margin-top: 24px;\n    border-top-width: 1px;\n    border-top-style: solid;\n    border-top-color: ${({ theme }) => theme.primaryColor};\n  }\n`;\n\nconst TextPlayer: FunctionComponent<{\n  value?: string;\n  onLoad?: () => void;\n  resources?: API.TopicResource[];\n}> = ({ value, onLoad, resources }): ReactElement => {\n  const { t } = useTranslation();\n  const isResources = resources && resources.length > 0;\n\n  useEffect(() => {\n    value && onLoad && onLoad();\n  }, [value, onLoad]);\n\n  return (\n    <TextPlayerStyles>\n      {value && <MarkdownRenderer>{value}</MarkdownRenderer>}\n      {isResources && (\n        <div className=\"resources-container\">\n          <Text>{t(\"CoursePage.Resources\")}</Text>\n          {resources.map(({ name, url }) => (\n            <Download href={url} fileName={name} />\n          ))}\n        </div>\n      )}\n    </TextPlayerStyles>\n  );\n};\n\nexport default TextPlayer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeProject = exports.fetchProjects = exports.addProject = void 0;\nvar umi_request_1 = __importDefault(require(\"umi-request\"));\nvar utils_1 = require(\"../utils\");\nfunction addProject(apiUrl, token, body, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var formData;\n        return __generator(this, function (_a) {\n            formData = new FormData();\n            Object.entries(body).forEach(function (_a) {\n                var key = _a[0], val = _a[1];\n                formData.append(key, val);\n            });\n            return [2 /*return*/, (0, umi_request_1.default)(\"\".concat(apiUrl, \"/api/topic-project-solutions\"), __assign({ method: \"POST\", headers: {\n                        Accept: \"application/json\",\n                        Authorization: \"Bearer \".concat(token),\n                        \"Current-timezone\": (0, utils_1.currentTimezone)(),\n                    }, data: formData }, (options || {})))];\n        });\n    });\n}\nexports.addProject = addProject;\nfunction fetchProjects(apiUrl, token, _a, options) {\n    var per_page = _a.per_page, page = _a.page, params = __rest(_a, [\"per_page\", \"page\"]);\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            return [2 /*return*/, (0, umi_request_1.default)(\"\".concat(apiUrl, \"/api/topic-project-solutions\"), __assign({ method: \"GET\", headers: {\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\",\n                        Authorization: \"Bearer \".concat(token),\n                        \"Current-timezone\": (0, utils_1.currentTimezone)(),\n                    }, params: __assign({ per_page: per_page !== null && per_page !== void 0 ? per_page : 15, page: page !== null && page !== void 0 ? page : 1 }, params) }, (options || {})))];\n        });\n    });\n}\nexports.fetchProjects = fetchProjects;\nfunction removeProject(apiUrl, token, project_file_id, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, (0, umi_request_1.default)(\"\".concat(apiUrl, \"/api/topic-project-solutions/\").concat(project_file_id), __assign({ method: \"DELETE\", headers: {\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\",\n                        Authorization: \"Bearer \".concat(token),\n                        \"Current-timezone\": (0, utils_1.currentTimezone)(),\n                    } }, (options || {})))];\n        });\n    });\n}\nexports.removeProject = removeProject;\n","\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProjectPlayer = void 0;\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\nvar react_1 = require(\"react\");\nvar styled_components_1 = __importStar(require(\"styled-components\"));\nvar react_i18next_1 = require(\"react-i18next\");\nvar date_fns_1 = require(\"date-fns\");\nvar react_2 = require(\"@escolalms/sdk/lib/react\");\nvar project_1 = require(\"@escolalms/sdk/lib/services/project\");\nvar utils_1 = require(\"../../../utils/utils\");\nvar Button_1 = require(\"../../atoms/Button/Button\");\nvar Card_1 = require(\"../../atoms/Card/Card\");\nvar Spin_1 = require(\"../../atoms/Spin/Spin\");\nvar Text_1 = require(\"../../atoms/Typography/Text\");\nvar MarkdownRenderer_1 = require(\"../../molecules/MarkdownRenderer/MarkdownRenderer\");\nvar Upload_1 = require(\"../../molecules/Upload/Upload\");\nvar ProjectPlayerWrapper = styled_components_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  .project-player__upload-input {\\n    margin-bottom: 1em;\\n    .wrapper {\\n      .border img {\\n        display: none;\\n      }\\n\\n      &::after {\\n        padding-top: 0;\\n        aspect-ratio: 16 / 3;\\n      }\\n    }\\n  }\\n\\n  .project-player__projects-list {\\n    display: flex;\\n    flex-wrap: wrap;\\n    gap: 1em;\\n\\n    .project-card {\\n      width: 100%;\\n      max-width: 225px;\\n\\n      .content {\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: flex-start;\\n      }\\n    }\\n  }\\n\"], [\"\\n  .project-player__upload-input {\\n    margin-bottom: 1em;\\n    .wrapper {\\n      .border img {\\n        display: none;\\n      }\\n\\n      &::after {\\n        padding-top: 0;\\n        aspect-ratio: 16 / 3;\\n      }\\n    }\\n  }\\n\\n  .project-player__projects-list {\\n    display: flex;\\n    flex-wrap: wrap;\\n    gap: 1em;\\n\\n    .project-card {\\n      width: 100%;\\n      max-width: 225px;\\n\\n      .content {\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: flex-start;\\n      }\\n    }\\n  }\\n\"])));\nvar IconBin = function () {\n    return ((0, jsx_runtime_1.jsx)(\"svg\", __assign({ width: \"20\", height: \"20\", viewBox: \"0 0 20 20\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, { children: (0, jsx_runtime_1.jsx)(\"path\", { d: \"M5 2C5 0.89543 5.89543 0 7 0H13C14.1046 0 15 0.895431 15 2V4H16.9897C16.9959 3.99994 17.0021 3.99994 17.0083 4H19C19.5523 4 20 4.44772 20 5C20 5.55228 19.5523 6 19 6H17.9311L17.0638 18.1425C16.989 19.1891 16.1182 20 15.0689 20H4.93112C3.88184 20 3.01096 19.1891 2.9362 18.1425L2.06888 6H1C0.447715 6 0 5.55228 0 5C0 4.44772 0.447715 4 1 4H2.99174C2.99795 3.99994 3.00414 3.99994 3.01032 4H5V2ZM7 4H13V2H7V4ZM4.07398 6L4.93112 18H15.0689L15.926 6H4.07398ZM8 8C8.55228 8 9 8.44772 9 9V15C9 15.5523 8.55228 16 8 16C7.44772 16 7 15.5523 7 15V9C7 8.44772 7.44772 8 8 8ZM12 8C12.5523 8 13 8.44772 13 9V15C13 15.5523 12.5523 16 12 16C11.4477 16 11 15.5523 11 15V9C11 8.44772 11.4477 8 12 8Z\", fill: \"currentColor\" }) })));\n};\nvar ProjectsList = function (_a) {\n    var projects = _a.projects, onDeleteSuccess = _a.onDeleteSuccess, onDeleteError = _a.onDeleteError, className = _a.className;\n    var t = (0, react_i18next_1.useTranslation)().t;\n    var _b = (0, react_1.useContext)(react_2.EscolaLMSContext), token = _b.token, apiUrl = _b.apiUrl;\n    var _c = (0, react_1.useState)([]), isDeleting = _c[0], setIsDeleting = _c[1];\n    var onFileDeleteFactory = (0, react_1.useCallback)(function (fileId) { return function () {\n        if (!token)\n            return console.warn(\"noToken\");\n        setIsDeleting(function (prev) { return __spreadArray(__spreadArray([], prev, true), [fileId], false); });\n        (0, project_1.removeProject)(apiUrl, token, fileId)\n            .then(function () { return onDeleteSuccess === null || onDeleteSuccess === void 0 ? void 0 : onDeleteSuccess(); })\n            .catch(function () { return onDeleteError === null || onDeleteError === void 0 ? void 0 : onDeleteError(); })\n            .finally(function () {\n            return setIsDeleting(function (prev) { return prev.filter(function (id) { return id !== fileId; }); });\n        });\n    }; }, [token, apiUrl]);\n    return ((0, jsx_runtime_1.jsxs)(\"div\", __assign({ className: className }, { children: [projects.loading && !projects.data.length && (0, jsx_runtime_1.jsx)(Spin_1.Spin, {}), projects.data.map(function (_a, i) {\n                var id = _a.id, created_at = _a.created_at;\n                return ((0, jsx_runtime_1.jsxs)(Card_1.Card, __assign({ className: \"project-card\" }, { children: [(0, jsx_runtime_1.jsxs)(\"div\", __assign({ className: \"project-card__details\" }, { children: [(0, jsx_runtime_1.jsxs)(Text_1.Text, __assign({ className: \"project-card__title\" }, { children: [t(\"ProjectPlayer.ProjectFile\"), \" \".concat(i + 1)] })), (0, jsx_runtime_1.jsx)(Text_1.Text, __assign({ className: \"project-card__date\" }, { children: (0, date_fns_1.format)(new Date(created_at), utils_1.DATETIME_FORMAT) }))] })), (0, jsx_runtime_1.jsx)(Button_1.Button, __assign({ className: \"project-card__delete-btn\", mode: \"icon\", loading: isDeleting.includes(id), onClick: onFileDeleteFactory(id) }, { children: (0, jsx_runtime_1.jsx)(IconBin, {}) }))] }), id));\n            })] })));\n};\nvar ProjectPlayer = function (_a) {\n    var course_id = _a.course_id, topic = _a.topic, onSuccess = _a.onSuccess, onError = _a.onError, className = _a.className, onProjectsChange = _a.onProjectsChange;\n    var _b = (0, react_1.useContext)(react_2.EscolaLMSContext), token = _b.token, apiUrl = _b.apiUrl;\n    var _c = (0, react_1.useState)({\n        data: [],\n        loading: false,\n    }), projects = _c[0], setProjects = _c[1];\n    var _d = (0, react_1.useState)(false), isUploading = _d[0], setIsUploading = _d[1];\n    (0, react_1.useEffect)(function () {\n        onProjectsChange && onProjectsChange(projects);\n    }, [projects]);\n    var refreshProjects = (0, react_1.useCallback)(function () {\n        if (!token)\n            return console.error(\"noToken\");\n        setProjects(function (prev) { return (__assign(__assign({}, prev), { loading: true })); });\n        (0, project_1.fetchProjects)(apiUrl, token, { course_id: course_id, topic_id: topic === null || topic === void 0 ? void 0 : topic.id })\n            .then(function (res) {\n            if (res.success) {\n                setProjects(function (prev) { return (__assign(__assign({}, prev), { data: res.data })); });\n            }\n        })\n            .catch(function (err) { return console.warn(err); })\n            .finally(function () { return setProjects(function (prev) { return (__assign(__assign({}, prev), { loading: false })); }); });\n    }, [token, apiUrl, course_id, topic === null || topic === void 0 ? void 0 : topic.id]);\n    (0, react_1.useEffect)(function () {\n        refreshProjects();\n    }, [refreshProjects]);\n    var onProjectFileSelect = (0, react_1.useCallback)(function (e) {\n        var _a;\n        if (!((_a = e.currentTarget.files) === null || _a === void 0 ? void 0 : _a[0]) || !token)\n            return;\n        setIsUploading(true);\n        var body = {\n            topic_id: (topic === null || topic === void 0 ? void 0 : topic.id) + \"\",\n            file: e.currentTarget.files[0],\n        };\n        (0, project_1.addProject)(apiUrl, token, body)\n            .then(function () {\n            refreshProjects();\n            onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess();\n        })\n            .catch(function () {\n            onError === null || onError === void 0 ? void 0 : onError();\n        })\n            .finally(function () {\n            setIsUploading(false);\n        });\n    }, [apiUrl, token, topic === null || topic === void 0 ? void 0 : topic.id, refreshProjects]);\n    return ((0, jsx_runtime_1.jsxs)(ProjectPlayerWrapper, __assign({ className: \"wellms-component\" + \" \".concat(className), \"data-testid\": \"project-player\" }, { children: [topic.description && ((0, jsx_runtime_1.jsx)(MarkdownRenderer_1.MarkdownRenderer, __assign({ className: \"project-player__description\" }, { children: topic.description }))), (0, jsx_runtime_1.jsx)(Upload_1.Upload, { className: \"project-player__upload-input\", name: \"project_file\", onChange: onProjectFileSelect, disabled: isUploading }), (0, jsx_runtime_1.jsx)(ProjectsList, { className: \"project-player__projects-list\", projects: projects, onDeleteSuccess: refreshProjects })] })));\n};\nexports.ProjectPlayer = ProjectPlayer;\nexports.default = (0, styled_components_1.withTheme)((0, styled_components_1.default)(exports.ProjectPlayer)(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\"], [\"\"]))));\nvar templateObject_1, templateObject_2;\n","import React, {\n  ReactElement,\n  FunctionComponent,\n  useContext,\n  useState,\n} from \"react\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport styled, { css } from \"styled-components\";\nimport { useTranslation } from \"react-i18next\";\nimport { ResizeIcon } from \"../../../../icons\";\nimport { ScormPreview } from \"@escolalms/scorm-player\";\n\nconst StyledDiv = styled.div<{ fullview: boolean }>`\n  > button {\n    position: fixed;\n    right: 5px;\n    bottom: 5px;\n    z-index: 9999;\n    svg path {\n      fill: white;\n    }\n  }\n  iframe {\n    border: none;\n    display: block;\n    width: 100%;\n  }\n  ${(props) => {\n    if (props.fullview) {\n      return css`\n        iframe {\n          position: fixed;\n          top: 90px;\n          left: 0;\n          height: calc(100% - 90px - 80px);\n\n          z-index: 9999;\n        }\n      `;\n    } else {\n      return css`\n        display: flex;\n\n        min-height: 80vh;\n        max-height: 80vh;\n        height: 100vh;\n        iframe {\n          height: 100%;\n        }\n      `;\n    }\n  }}\n`;\n\ninterface ScormPlayerProps {\n  title: string;\n  uuid: string;\n}\n\nconst ScormPlayer: FunctionComponent<{\n  value: ScormPlayerProps;\n}> = ({ value }): ReactElement => {\n  const { apiUrl } = useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n  const [fullView, setFullView] = useState(false);\n\n  return (\n    <div className=\"scorm-wrapper\">\n      <StyledDiv fullview={fullView}>\n        <Button onClick={() => setFullView(!fullView)}>\n          {\" \"}\n          {t(\"Scorm.Resize\")} <ResizeIcon />\n        </Button>\n        <ScormPreview\n          uuid={value.uuid}\n          apiUrl={apiUrl}\n          serviceWorkerUrl=\"/service-worker-scorm.js\"\n        />\n        {/* <iframe\n          title={value.title}\n          src={`${apiUrl}/api/scorm/play/${value.uuid}`}\n        /> */}\n      </StyledDiv>\n    </div>\n  );\n};\n\nexport default ScormPlayer;\n","import { API } from \"@escolalms/sdk/lib\";\n\nexport const getFlatLessons = (lessons: API.Lesson[]): API.Lesson[] =>\n  lessons.reduce<API.Lesson[]>(\n    (acc, curr) => [...acc, ...getFlatLessons(curr?.lessons ?? []), curr],\n    []\n  );\n\nexport const getFlatTopics = (lessons: API.Lesson[]): API.Topic[] =>\n  lessons.reduce<API.Topic[]>(\n    (acc, curr) => [\n      ...acc,\n      ...(curr.topics ?? []),\n      ...(curr.lessons ? getFlatTopics(curr.lessons) : []),\n    ],\n    []\n  );\n\nexport const getLessonParentsIds = (\n  flatLessons: API.Lesson[],\n  currentLesson: API.Lesson,\n  result: number[] = []\n): number[] => {\n  const parentsIds: number[] = [...result];\n\n  const parentLesson = flatLessons.find((l) =>\n    l?.lessons?.find((innerL: API.Lesson) => innerL?.id === currentLesson?.id)\n  );\n\n  if (parentLesson) {\n    parentsIds.unshift(parentLesson.id);\n    return getLessonParentsIds(flatLessons, parentLesson, parentsIds);\n  }\n\n  return parentsIds;\n};\n\nexport const getPrevNextTopic = (\n  topic_id: number,\n  topics: API.Topic[],\n  dir: \"prev\" | \"next\" = \"prev\"\n): API.Topic | undefined => {\n  const currIndex = topics.findIndex((topic) => topic.id === topic_id);\n\n  const topicsMap = new Map([\n    [\"prev\", topics?.[currIndex - 1]],\n    [\"next\", topics?.[currIndex + 1]],\n  ]);\n\n  return topicsMap.get(dir);\n};\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\n\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { isAfter } from \"date-fns\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\n\nimport {\n  getFlatLessons,\n  getFlatTopics,\n  getLessonParentsIds,\n  getPrevNextTopic,\n} from \"@/utils/course\";\n\nexport type CourseParams = Record<\n  \"id\" | \"lessonID\" | \"topicID\" | string,\n  string\n>;\n\ninterface CourseContext {\n  courseId?: string;\n  flatLessons?: API.Lesson[];\n  flatTopics?: API.Topic[];\n  prevTopic?: API.Topic | null;\n  currentTopic?: API.Topic;\n  nextTopic?: API.Topic | null;\n  currentLesson?: API.Lesson;\n  currentCourseProgram?: API.CourseProgram;\n  isNextTopicButtonDisabled?: boolean;\n  setIsNextTopicButtonDisabled?: (b: boolean) => void;\n  completeCurrentTopic?: (finished?: boolean) => void;\n  finishedTopicsIds?: number[];\n  availableTopicsIds?: number[];\n  currentLessonParentsIds?: number[];\n  isCourseFinished?: boolean;\n  isAnyDataLoading?: boolean;\n  showFinish?: boolean;\n  isLastTopic?: boolean;\n}\n\nconst Context = React.createContext<CourseContext>({});\nexport const UnknownTopicId = \"-1\";\n\nexport const useCoursePanel = () => useContext(Context);\n\nconst DISABLE_NEXT_BUTTON_TYPES = [\n  API.TopicType.H5P,\n  API.TopicType.Audio,\n  API.TopicType.Video,\n  API.TopicType.Project,\n  API.TopicType.GiftQuiz,\n  API.TopicType.Pdf,\n];\n\nconst CoursePanelProvider: React.FC<React.PropsWithChildren> = ({\n  children,\n}) => {\n  const {\n    sendProgress,\n    program,\n    fetchProgram,\n    courseProgressDetails,\n    fetchCourseProgress,\n  } = useContext(EscolaLMSContext);\n  const [isNextTopicButtonDisabled, setIsNextTopicButtonDisabled] =\n    useState(false);\n  const [showFinish, setShowFinish] = useState(false);\n\n  // :id/:lessonID?/:topicID\n  const {\n    id: courseId,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    lessonID: paramLessonId,\n    topicID: paramTopicId,\n  } = useParams<CourseParams>();\n  const history = useHistory();\n\n  const currentCourseProgress = courseProgressDetails.byId?.[courseId];\n  // console.log('currentCourseProgress: ', currentCourseProgress);\n\n  const currentCourseProgram = useMemo(() => program.value, [program.value]);\n\n  // For development purposes only\n  if (process.env.NODE_ENV === \"development\" && typeof window !== \"undefined\") {\n    // @ts-ignore\n    window.resetProgress = () =>\n      sendProgress(\n        // eslint-disable-next-line @typescript-eslint/no-non-null-asserted-optional-chain\n        currentCourseProgram?.id!,\n        (flatTopics ?? []).map((topic) => ({\n          topic_id: Number(topic?.id),\n          status: API.CourseProgressItemElementStatus.INCOMPLETE,\n        }))\n      );\n  }\n\n  const flatLessons = useMemo(\n    () => getFlatLessons(currentCourseProgram?.lessons ?? []),\n    [currentCourseProgram?.lessons]\n  );\n\n  const flatTopics = useMemo(\n    () => getFlatTopics(currentCourseProgram?.lessons ?? []),\n    [currentCourseProgram?.lessons]\n  );\n\n  const findLessonById = useCallback(\n    (id: number) => flatLessons.find((l) => l.id === id),\n    [flatLessons]\n  );\n\n  const findTopicById = useCallback(\n    (id: number) => flatTopics.find((t) => t.id === id),\n    [flatTopics]\n  );\n\n  const prevTopic = useMemo(\n    () => getPrevNextTopic(Number(paramTopicId), flatTopics),\n    [flatTopics, paramTopicId]\n  );\n\n  const currentTopic = useMemo(\n    () => findTopicById(Number(paramTopicId)),\n    [findTopicById, paramTopicId]\n  );\n\n  const nextTopic = useMemo(\n    () => getPrevNextTopic(Number(paramTopicId), flatTopics, \"next\"),\n    [flatTopics, paramTopicId]\n  );\n\n  const currentLesson = useMemo(\n    () => currentTopic && findLessonById(currentTopic?.lesson_id),\n    [findLessonById, currentTopic]\n  );\n\n  const completeCurrentTopic = useCallback(\n    (finished?: boolean) => {\n      if (currentCourseProgram?.id === undefined) return;\n      if (currentTopic?.id === undefined) return;\n\n      setIsNextTopicButtonDisabled(false);\n      sendProgress(currentCourseProgram.id, [\n        {\n          topic_id: currentTopic.id,\n          status: API.CourseProgressItemElementStatus.COMPLETE,\n        },\n      ]);\n      if (finished) {\n        setShowFinish(true);\n      }\n    },\n    [sendProgress, currentCourseProgram?.id, currentTopic?.id]\n  );\n\n  const finishedTopicsIds = useMemo(\n    () =>\n      (currentCourseProgress?.value ?? []).reduce<number[]>(\n        (acc, { status, topic_id }) =>\n          status === API.CourseProgressItemElementStatus.COMPLETE\n            ? [...acc, topic_id]\n            : acc,\n        []\n      ),\n    [currentCourseProgress]\n  );\n\n  const activeLessonsFlatTopics = useMemo(() => {\n    const activeLessons = (currentCourseProgram?.lessons ?? []).filter(\n      (l) =>\n        l.active_from === null ||\n        (l.active_from && isAfter(new Date(), new Date(l.active_from)))\n    );\n\n    return getFlatTopics(activeLessons);\n  }, [currentCourseProgram]);\n\n  const findClosestIncompleteTopicId = useCallback(\n    (topicId: number | undefined) => {\n      const topic = activeLessonsFlatTopics.find((t) => t.id === topicId);\n      if (!topic) return null;\n\n      const index = activeLessonsFlatTopics.indexOf(topic);\n      const nextTopic = activeLessonsFlatTopics[index + 1];\n      if (!nextTopic) return null;\n\n      return nextTopic.id;\n    },\n    [activeLessonsFlatTopics]\n  );\n\n  const availableTopicsIds = useMemo(() => {\n    const { in_progress, complete } = activeLessonsFlatTopics.reduce<{\n      in_progress: number[];\n      complete: number[];\n      incomplete: number[];\n    }>(\n      (acc, t) => {\n        const el = (currentCourseProgress?.value ?? []).find(\n          ({ topic_id }) => topic_id === t.id\n        );\n        if (!el) return acc;\n\n        const statusMap = {\n          [API.CourseProgressItemElementStatus.INCOMPLETE]: \"incomplete\",\n          [API.CourseProgressItemElementStatus.COMPLETE]: \"complete\",\n          [API.CourseProgressItemElementStatus.IN_PROGRESS]: \"in_progress\",\n        } as const;\n\n        return {\n          ...acc,\n          [statusMap[el.status]]: [...acc[statusMap[el.status]], t.id],\n        };\n      },\n      {\n        in_progress: [],\n        incomplete: [],\n        complete: [],\n      }\n    );\n\n    const firstInCompletedLessonId = findClosestIncompleteTopicId(\n      currentTopic?.id\n    );\n\n    if (in_progress.length)\n      return [...in_progress, ...complete, firstInCompletedLessonId].filter(\n        (id): id is number => id !== null\n      );\n\n    return [...complete, firstInCompletedLessonId].filter(\n      (id): id is number => id !== null\n    );\n  }, [\n    currentCourseProgress?.value,\n    currentTopic?.id,\n    findClosestIncompleteTopicId,\n    activeLessonsFlatTopics,\n  ]);\n\n  const currentLessonParentsIds: number[] = useMemo(() => {\n    if (!currentLesson) return [];\n\n    return getLessonParentsIds(flatLessons, currentLesson);\n  }, [currentLesson, flatLessons]);\n\n  useEffect(() => {\n    if (!courseId) return;\n\n    fetchProgram(Number(courseId));\n  }, [courseId, fetchProgram]);\n\n  useEffect(() => {\n    if (!courseId) return;\n\n    fetchCourseProgress(Number(courseId));\n  }, [fetchCourseProgress, courseId]);\n\n  // disable next button\n  useEffect(() => {\n    if (!currentTopic?.topicable_type) return;\n\n    setIsNextTopicButtonDisabled(\n      DISABLE_NEXT_BUTTON_TYPES.includes(currentTopic?.topicable_type) &&\n        !currentTopic.can_skip\n    );\n  }, [currentTopic?.can_skip, currentTopic?.topicable_type]);\n\n  useEffect(() => {\n    if (!paramTopicId || Number(paramTopicId) !== currentTopic?.id) {\n      const firstAvailableTopicId =\n        availableTopicsIds.at(-1) ?? flatTopics?.[0]?.id;\n      const firstAvailableTopic = flatTopics.find(\n        ({ id }) => id === firstAvailableTopicId\n      );\n\n      if (firstAvailableTopic) {\n        history.push(\n          `/course/${courseId}/${firstAvailableTopic.lesson_id}/${firstAvailableTopicId}`\n        );\n      }\n    }\n  }, [\n    paramTopicId,\n    availableTopicsIds,\n    flatTopics,\n    history,\n    courseId,\n    currentTopic?.id,\n  ]);\n\n  const isCourseFinished = useMemo(\n    () =>\n      Boolean(\n        currentCourseProgress?.value &&\n          currentCourseProgress?.value.every(\n            ({ status }) =>\n              status === API.CourseProgressItemElementStatus.COMPLETE\n          )\n      ),\n    [currentCourseProgress?.value]\n  );\n\n  const isLastTopic = useMemo(\n    () =>\n      currentTopic?.id !== undefined &&\n      (flatTopics ?? []).at(-1)?.id === currentTopic?.id,\n    [currentTopic?.id, flatTopics]\n  );\n\n  const isAnyDataLoading = useMemo(\n    () => program.loading || currentCourseProgress?.loading,\n    [program.loading, currentCourseProgress?.loading]\n  );\n\n  return (\n    <Context.Provider\n      value={{\n        courseId,\n        flatLessons,\n        flatTopics,\n        prevTopic,\n        currentTopic,\n        nextTopic,\n        currentLesson,\n        currentCourseProgram,\n        isNextTopicButtonDisabled,\n        setIsNextTopicButtonDisabled,\n        completeCurrentTopic,\n        availableTopicsIds,\n        finishedTopicsIds,\n        currentLessonParentsIds,\n        isCourseFinished,\n        isAnyDataLoading,\n        showFinish,\n        isLastTopic,\n      }}\n    >\n      {children}\n    </Context.Provider>\n  );\n};\n\nexport default CoursePanelProvider;\n","import React, { useCallback, useContext, useEffect } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { XAPIEvent } from \"@escolalms/h5p-react\";\nimport TextPlayer from \"./Players/TextPlayer\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { ImagePlayer } from \"@escolalms/components/lib/components/players/ImagePlayer/ImagePlayer\";\nimport { AudioVideoPlayer } from \"@escolalms/components/lib/components/players/AudioVideoPlayer/AudioVideoPlayer\";\nimport { OEmbedPlayer } from \"@escolalms/components/lib/components/players/OEmbedPlayer/OEmbedPlayer\";\nimport { H5Player } from \"@escolalms/components/lib/components/players/H5Player/H5Player\";\nimport { PdfPlayer } from \"@escolalms/components/lib/components/players/PdfPlayer/PdfPlayer\";\nimport { ProjectPlayer } from \"@escolalms/components/lib/components/players/ProjectPlayer/ProjectPlayer\";\nimport { isMobile } from \"react-device-detect\";\nimport ScormPlayer from \"./Players/ScormPlayer\";\nimport GiftQuizPlayer from \"@escolalms/components/lib/components/quizzes\";\nimport { useCoursePanel } from \"@/components/Courses/Course/Context\";\n\nexport const CourseProgramContent: React.FC<{\n  topic: API.Topic | undefined;\n  preview?: boolean;\n}> = ({ topic, preview = false }) => {\n  const { courseId, nextTopic, setIsNextTopicButtonDisabled, showFinish } =\n    useCoursePanel();\n\n  const { topicPing, topicIsFinished, h5pProgress, fetchCourseProgress } =\n    useContext(EscolaLMSContext);\n\n  const isThereNextTopic = !!nextTopic;\n  const topicId = topic?.id;\n\n  const onXAPI = useCallback(\n    (event: XAPIEvent): void => {\n      if (event?.statement) {\n        h5pProgress(\n          String(courseId),\n          Number(topicId),\n          event?.statement as API.IStatement\n        )?.then(() => {\n          fetchCourseProgress(Number(courseId));\n        });\n      }\n    },\n    [h5pProgress, courseId, topicId, fetchCourseProgress]\n  );\n\n  useEffect(() => {\n    const isTopicFinished = Boolean(topicId && topicIsFinished(topicId));\n    isThereNextTopic &&\n      isTopicFinished &&\n      setIsNextTopicButtonDisabled?.(\n        !isTopicFinished && !Boolean(topic?.can_skip)\n      );\n  }, [\n    setIsNextTopicButtonDisabled,\n    topicId,\n    topic?.can_skip,\n    isThereNextTopic,\n    topicIsFinished,\n  ]);\n\n  useEffect(() => {\n    if (!preview && !showFinish) {\n      const ping = () =>\n        topicId && !topicIsFinished(topicId) && topicPing(topicId);\n\n      const interval = setInterval(() => {\n        ping();\n      }, 5000);\n\n      ping();\n      return () => clearInterval(interval);\n    }\n  }, [topicPing, topicId, topicIsFinished, preview, showFinish]);\n\n  const enableNextButton = useCallback(\n    () => setIsNextTopicButtonDisabled?.(false),\n    [setIsNextTopicButtonDisabled]\n  );\n\n  if (!topic) {\n    return <React.Fragment />;\n  }\n\n  if (!topic.topicable?.value) {\n    return (\n      <pre className=\"error\">Error: topic.topicable?.value is missing</pre>\n    );\n  }\n  if (topic.topicable_type) {\n    switch (topic.topicable_type) {\n      case API.TopicType.H5P:\n        return (\n          <H5Player\n            onXAPI={(e: XAPIEvent) => onXAPI?.(e)}\n            //@ts-ignore\n            h5pObject={topic.topicable.content as API.H5PObject}\n            hideActionButtons\n          />\n        );\n      case API.TopicType.OEmbed:\n        return (\n          <>\n            <OEmbedPlayer url={topic.topicable.value} key={topic.id} />\n          </>\n        );\n      case API.TopicType.RichText:\n        return (\n          <TextPlayer\n            value={topic.topicable.value}\n            resources={topic.resources}\n          />\n        );\n      case API.TopicType.Video:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            url={topic.topicable.url}\n            light\n            onTopicEnd={enableNextButton}\n          />\n        );\n      case API.TopicType.Image:\n        return <ImagePlayer topic={topic} onLoad={() => {}} />;\n      case API.TopicType.Audio:\n        return (\n          <AudioVideoPlayer\n            mobile={isMobile}\n            audio\n            url={topic.topicable.url}\n            light\n            onTopicEnd={enableNextButton}\n          />\n        );\n\n      case API.TopicType.Pdf:\n        return (\n          <PdfPlayer\n            url={topic.topicable.url}\n            pageConfig={{\n              className: \"course-pdf-player\",\n            }}\n            onTopicEnd={enableNextButton}\n          />\n        );\n\n      case API.TopicType.Scorm:\n        return (\n          <ScormPlayer\n            value={{\n              title: topic.title,\n              uuid: topic.topicable.uuid,\n            }}\n          />\n        );\n\n      case API.TopicType.GiftQuiz:\n        return <GiftQuizPlayer topic={topic} onTopicEnd={enableNextButton} />;\n      case API.TopicType.Project:\n        return (\n          <ProjectPlayer\n            course_id={Number(courseId)}\n            topic={topic}\n            onSuccess={enableNextButton}\n            onProjectsChange={enableNextButton}\n          />\n        );\n      default:\n        return <pre>{(topic as API.Topic).topicable_type}</pre>;\n    }\n  }\n\n  return <pre>loading... (or error)</pre>;\n};\n\nexport default CourseProgramContent;\n"],"names":["TextPlayerStyles","styled","theme","TextPlayer","value","onLoad","resources","t","useTranslation","isResources","useEffect","jsx","MarkdownRenderer","jsxs","Text","name","url","Download","__assign","this","i","n","p","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","reject","fulfilled","step","e","rejected","result","__generator","body","_","f","y","g","verb","v","op","__rest","s","__importDefault","mod","project","umi_request_1","require$$0","utils_1","require$$1","addProject","apiUrl","token","options","formData","_a","key","val","fetchProjects","per_page","page","params","_b","removeProject","project_file_id","__makeTemplateObject","cooked","raw","__createBinding","o","m","k","k2","desc","__setModuleDefault","__importStar","__spreadArray","to","from","pack","l","ar","exports","jsx_runtime_1","react_1","styled_components_1","require$$2","react_i18next_1","require$$3","date_fns_1","require$$4","react_2","require$$5","project_1","require$$6","require$$7","Button_1","require$$8","Card_1","require$$9","Spin_1","require$$10","Text_1","require$$11","MarkdownRenderer_1","require$$12","Upload_1","require$$13","ProjectPlayerWrapper","templateObject_1","IconBin","ProjectsList","projects","onDeleteSuccess","onDeleteError","className","_c","isDeleting","setIsDeleting","onFileDeleteFactory","fileId","prev","id","created_at","ProjectPlayer","course_id","topic","onSuccess","onError","onProjectsChange","setProjects","_d","isUploading","setIsUploading","refreshProjects","res","err","onProjectFileSelect","templateObject_2","StyledDiv","props","css","ScormPlayer","useContext","EscolaLMSContext","fullView","setFullView","useState","Button","ResizeIcon","ScormPreview","getFlatLessons","lessons","acc","curr","getFlatTopics","getLessonParentsIds","flatLessons","currentLesson","parentsIds","parentLesson","innerL","getPrevNextTopic","topic_id","topics","dir","currIndex","Context","React","useCoursePanel","DISABLE_NEXT_BUTTON_TYPES","API","CoursePanelProvider","children","sendProgress","program","fetchProgram","courseProgressDetails","fetchCourseProgress","isNextTopicButtonDisabled","setIsNextTopicButtonDisabled","showFinish","setShowFinish","courseId","paramLessonId","paramTopicId","useParams","history","useHistory","currentCourseProgress","currentCourseProgram","useMemo","flatTopics","findLessonById","useCallback","findTopicById","prevTopic","currentTopic","nextTopic","completeCurrentTopic","finished","finishedTopicsIds","status","activeLessonsFlatTopics","activeLessons","isAfter","findClosestIncompleteTopicId","topicId","index","availableTopicsIds","in_progress","complete","el","statusMap","firstInCompletedLessonId","currentLessonParentsIds","firstAvailableTopicId","firstAvailableTopic","isCourseFinished","isLastTopic","isAnyDataLoading","CourseProgramContent","preview","topicPing","topicIsFinished","h5pProgress","isThereNextTopic","onXAPI","event","isTopicFinished","ping","interval","enableNextButton","H5Player","Fragment","OEmbedPlayer","AudioVideoPlayer","isMobile","ImagePlayer","PdfPlayer","GiftQuizPlayer"],"mappings":"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","x_google_ignoreList":[1,2]}