{"version":3,"file":"index-STMgqzbp.js","sources":["../../src/components/Profile/UserSidebar/index.tsx","../../src/components/Profile/ProfileAside/index.tsx"],"sourcesContent":["import React, { ReactNode } from \"react\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  title?: string;\n  children: ReactNode;\n  icon?: ReactNode;\n};\n\nconst StyledSidebar = styled.div`\n  padding: 11px 6px;\n  background: ${({ theme }) =>\n    theme.mode === \"dark\" ? theme.dm__cardBackgroundColor : theme.white};\n  border-radius: ${({ theme }) => theme.cardRadius}px;\n`;\n\nconst UserSidebar: React.FC<Props> = ({ children }) => {\n  return <StyledSidebar>{children}</StyledSidebar>;\n};\n\nexport default UserSidebar;\n","import { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport { Title } from \"@escolalms/components/lib/components/atoms/Typography/Title\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport UserSidebar from \"@/components/Profile/UserSidebar\";\nimport { UserIcon } from \"../../../icons\";\nimport { isMobile } from \"react-device-detect\";\nimport { useTranslation } from \"react-i18next\";\nimport routeRoutes from \"@/components/Routes/routes\";\n\nimport DeleteAccountModal from \"@/components/Authentication/DeleteAccountModal\";\nimport useDeleteAccountModal from \"@/hooks/useDeleteAccount\";\nimport { metaDataKeys } from \"@/utils/meta\";\n\nexport type NavigationTab = {\n  title: string;\n  key: string;\n  url: string;\n};\n\nconst StyledAsideWrapper = styled.div`\n  h2 {\n    margin-bottom: 10px;\n  }\n`;\n\nconst StyledAside = styled(\"aside\")<{ opened: boolean }>`\n  background: ${({ theme }) =>\n    theme.mode === \"dark\" ? theme.dm__background : theme.white};\n  border-radius: ${({ theme }) => theme.cardRadius}px;\n\n  .user-main-sidebar {\n    margin-bottom: ${isMobile ? \"20px\" : \"5px\"};\n\n    .name {\n      margin: ${isMobile ? \"0 0 0 21px\" : \"16px 0 0 0\"};\n    }\n    .navigation {\n      display: flex;\n      flex-direction: column;\n      justify-content: flex-start;\n      align-items: flex-start;\n\n      cursor: pointer;\n      position: relative;\n      button {\n        all: unset;\n      }\n      a,\n      button {\n        text-decoration: none;\n        display: block;\n        width: 100%;\n        border-radius: ${({ theme }) => theme.cardRadius}px;\n        transition: background-color 0.3s ease, color 0.3s ease;\n        p {\n          padding: 8px 10px;\n        }\n        &:hover {\n          background-color: ${({ theme }) => theme.gray3};\n        }\n        &.selected {\n          background-color: ${({ theme }) => theme.primaryColor};\n          p {\n            color: ${({ theme }) => theme.white};\n          }\n        }\n      }\n    }\n  }\n  .delete-account {\n    p {\n      color: ${({ theme }) => theme.errorColor};\n    }\n  }\n  .progress-container {\n    display: flex;\n    flex-direction: ${isMobile ? \"row\" : \"column\"};\n    flex-wrap: wrap;\n    justify-content: ${isMobile ? \"space-between\" : \"flex-start\"};\n    align-items: ${isMobile ? \"center\" : \"flex-start\"};\n  }\n`;\n\ntype Props = {\n  tabs: NavigationTab[];\n  isProfile?: boolean;\n};\n\nconst ProfileAside: React.FC<Props> = ({ tabs, isProfile = true }) => {\n  const [menuOpened] = useState(false);\n  const { logout, fetchProgress, settings } = useContext(EscolaLMSContext);\n  const {\n    triggerDeleteAccount,\n    handleDeleteAccount,\n    showModal,\n    closeModal,\n    loading,\n  } = useDeleteAccountModal();\n  const { t } = useTranslation();\n\n  const history = useHistory();\n\n  useEffect(() => {\n    fetchProgress();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <StyledAsideWrapper>\n      {isProfile && (\n        <Title level={2} as=\"h2\">\n          {t(\"MyProfilePage.YourAccount\")}\n        </Title>\n      )}\n\n      <StyledAside opened={menuOpened}>\n        <div className=\"user-main-sidebar\">\n          <UserSidebar icon={<UserIcon />}>\n            <nav className=\"navigation\">\n              {tabs.map((item) => (\n                <NavLink\n                  activeClassName=\"selected\"\n                  to={item.url}\n                  key={item.key}\n                >\n                  <Text size=\"16\">{item.title}</Text>\n                </NavLink>\n              ))}\n\n              {isProfile &&\n                settings?.value?.config?.[metaDataKeys.termsPageMetaKey] && (\n                  <NavLink\n                    to={`/${\n                      settings.value.config?.[metaDataKeys.termsPageMetaKey]\n                    }`}\n                  >\n                    <Text size=\"16\">{t(\"Terms\")}</Text>\n                  </NavLink>\n                )}\n            </nav>\n          </UserSidebar>\n        </div>\n      </StyledAside>\n      {isProfile && (\n        <StyledAside opened={menuOpened}>\n          <div className=\"user-main-sidebar\">\n            <UserSidebar>\n              <div className=\"navigation\">\n                <button\n                  onClick={() =>\n                    logout().then(() => history.push(routeRoutes.home))\n                  }\n                >\n                  <Text>{t<string>(\"MyProfilePage.Logout\")}</Text>\n                </button>\n                <button\n                  className=\"delete-account\"\n                  onClick={() => triggerDeleteAccount()}\n                >\n                  <Text>{t<string>(\"MyProfilePage.DeleteAccount\")}</Text>\n                </button>\n              </div>\n            </UserSidebar>\n          </div>\n        </StyledAside>\n      )}\n      <DeleteAccountModal\n        closeModal={closeModal}\n        showModal={showModal}\n        handleDeleteAccount={handleDeleteAccount}\n        isLoading={loading}\n      />\n    </StyledAsideWrapper>\n  );\n};\n\nexport default ProfileAside;\n"],"names":["StyledSidebar","styled","theme","UserSidebar","children","jsx","StyledAsideWrapper","StyledAside","isMobile","ProfileAside","tabs","isProfile","menuOpened","useState","logout","fetchProgress","settings","useContext","EscolaLMSContext","triggerDeleteAccount","handleDeleteAccount","showModal","closeModal","loading","useDeleteAccountModal","t","useTranslation","history","useHistory","useEffect","Title","UserIcon","jsxs","item","NavLink","Text","_b","_a","metaDataKeys","_c","routeRoutes","DeleteAccountModal"],"mappings":"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"}