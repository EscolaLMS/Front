{"version":3,"file":"my-consultations-DN8GyLsw.js","sources":["../../src/components/Profile/ProfileConsultations/index.tsx","../../src/components/Consultations/ConsultationTutorCard/ConsultationTutorCardStyles.tsx","../../src/components/Consultations/ConsultationTutorCard/Image/index.tsx","../../src/components/Common/Status/index.tsx","../../src/components/Consultations/ConsultationTutorCard/Content/UserInfo/index.tsx","../../src/components/Consultations/ConsultationTutorCard/Content/DateInfo/index.tsx","../../src/components/Common/TimeInfo/index.tsx","../../src/components/Consultations/ConsultationTutorCard/Content/index.tsx","../../src/components/Consultations/ConsultationTutorCard/Actions/index.tsx","../../src/components/Consultations/ConsultationTutorCard/Status/index.tsx","../../src/components/Consultations/ConsultationTutorCard/index.tsx","../../src/components/Profile/ProfileTutorConsultations/index.tsx","../../src/components/Consultations/ConsultationCard/MeetModal/MeetModalStyles.tsx","../../node_modules/@jitsi/react-sdk/lib/constants/index.js","../../node_modules/@jitsi/react-sdk/lib/init.js","../../node_modules/@jitsi/react-sdk/lib/utils/index.js","../../node_modules/@jitsi/react-sdk/lib/components/JitsiMeeting.js","../../node_modules/@jitsi/react-sdk/lib/components/JaaSMeeting.js","../../src/hooks/meeting/useCamera.ts","../../src/utils/meeting.ts","../../src/components/Consultations/ConsultationCard/JitsyMeeting/Message/index.tsx","../../src/components/Skeletons/JitsyMeeting/index.tsx","../../src/components/Consultations/ConsultationCard/JitsyMeeting/index.tsx","../../src/components/Consultations/ConsultationCard/EndMeetingQuestionnaires/index.tsx","../../src/components/Consultations/ConsultationCard/MeetModal/index.tsx","../../src/pages/user/my-consultations.tsx"],"sourcesContent":["import {\n  memo,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n  useCallback,\n} from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { isMobile } from \"react-device-detect\";\nimport { Col, Row } from \"react-grid-system\";\nimport { ConsultationStatus } from \"../../../pages/user/my-consultations\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport ConsultationCard from \"@/components/Consultations/ConsultationCard\";\nimport ProfileConsultationsProvider from \"./ProfileConsultationsProvider\";\nimport { CourseCardSkeleton } from \"@/components/Skeletons/CourseCard\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { API_URL } from \"@/config/index\";\ninterface ProfileConsultationsProps {\n  type: ConsultationStatus;\n}\n\nconst ProfileConsultations = ({ type }: ProfileConsultationsProps) => {\n  const { userConsultations, fetchUserConsultations, token } =\n    useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n  const [consultationsData, setConsultationsData] = useState<\n    API.Consultation[]\n  >([]);\n\n  const filterConstulations = useMemo(() => {\n    const filtered =\n      userConsultations.list?.data.filter((consultation) =>\n        type === ConsultationStatus.STARTED ||\n        type === ConsultationStatus.UPCOMING\n          ? consultation.in_coming || consultation.is_started\n          : consultation.is_ended\n      ) || [];\n    const uniqueConsultations = Array.from(\n      new Map(filtered.map((item) => [item.id, item])).values()\n    );\n\n    return uniqueConsultations;\n  }, [type, userConsultations.list?.data]);\n\n  const refreshConsultation = useCallback(\n    async (id: number, termId: number) => {\n      try {\n        const request = await fetch(\n          `${API_URL}/api/consultations/me?ids[]=${id}`,\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n        const response = await request.json();\n\n        if (response.success && response.data.length > 0) {\n          const responseIndex = response.data.findIndex(\n            (consultation: API.AppointmentTerm) =>\n              consultation?.consultation_term_id === termId\n          );\n          setConsultationsData((prev) => {\n            const index = prev.findIndex(\n              (consultation) => consultation?.consultation_term_id === termId\n            );\n\n            if (index !== -1 && responseIndex !== -1) {\n              prev[index] = response.data[responseIndex];\n            }\n\n            return [...prev];\n          });\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    [token]\n  );\n\n  const handleRefreshIfTimePassed = useCallback(() => {\n    consultationsData.forEach((consultation) => {\n      if (!consultation.is_started && !consultation.is_ended) {\n        // @ts-ignore\n        if (consultation?.consultation_term_id !== undefined) {\n          refreshConsultation(\n            consultation?.id,\n            consultation?.consultation_term_id\n          );\n        }\n      }\n    });\n  }, [consultationsData, refreshConsultation]);\n\n  useEffect(() => {\n    fetchUserConsultations();\n  }, [type, fetchUserConsultations]);\n\n  useEffect(() => {\n    setConsultationsData([]);\n    setConsultationsData(filterConstulations);\n    const interval = setInterval(() => {\n      handleRefreshIfTimePassed();\n    }, 30000);\n\n    return () => {\n      setConsultationsData([]);\n      clearInterval(interval);\n    };\n  }, [type, filterConstulations, handleRefreshIfTimePassed]);\n\n  return (\n    <ProfileConsultationsProvider>\n      <Row\n        style={{\n          gap: \"30px 0\",\n        }}\n      >\n        {userConsultations.loading ? (\n          Array.from({ length: 8 }).map((_, index) => (\n            <Col md={3} key={`skeleton-card-${index}`}>\n              <CourseCardSkeleton />\n            </Col>\n          ))\n        ) : consultationsData.length === 0 ? (\n          <Text style={{ paddingLeft: isMobile ? 20 : 40 }}>\n            {t<string>(\"MyProfilePage.OrdersEmpty\")}\n          </Text>\n        ) : (\n          <>\n            {consultationsData.map((consultation) => (\n              <Col key={consultation.id} xs={12} md={6} lg={3}>\n                <ConsultationCard consultation={consultation} />\n              </Col>\n            ))}\n          </>\n        )}\n      </Row>\n    </ProfileConsultationsProvider>\n  );\n};\n\nexport default memo(ProfileConsultations);\n","import styled from \"styled-components\";\n\nexport const ConsultationTutorCardStyles = styled.div`\n  .course-section {\n    margin-top: 0px;\n  }\n\n  .course-card-buttons-group {\n    margin: 0;\n    width: 100%;\n\n    button {\n      width: 100%;\n      margin: 0;\n    }\n  }\n\n  p {\n    font-family: ${({ theme }) => theme.font};\n  }\n`;\n","import { Link } from \"react-router-dom\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport ResponsiveImage from \"@escolalms/components/lib/components/organisms/ResponsiveImage/ResponsiveImage\";\nimport CourseImgPlaceholder from \"../../../Courses/CourseImgPlaceholder\";\n\ninterface Props {\n  product: API.AppointmentTerm | undefined;\n}\n\nconst ConsultationTutorCardImage = ({ product }: Props) => {\n  if (!product) return null;\n\n  return (\n    // @ts-ignore TODO:add to sdk\n    <Link to={`/consultations/${product?.consultation_id}`}>\n      {/* @ts-ignore TODO:add to sdk */}\n      {product?.consultation_media &&\n      // @ts-ignore TODO:add to sdk\n      product?.consultation_media?.image_path ? (\n        <ResponsiveImage\n          //   @ts-ignore TODO:add to sdk\n          path={product.consultation_media.image_path}\n          //   @ts-ignore TODO:add to sdk\n          alt={product.name}\n          srcSizes={[300, 600, 900]}\n        />\n      ) : (\n        <CourseImgPlaceholder />\n      )}\n    </Link>\n  );\n};\n\nexport default ConsultationTutorCardImage;\n","import { useMemo } from \"react\";\nimport styled, { useTheme } from \"styled-components\";\n\nconst StatusStyles = styled.div`\n  display: flex;\n  align-items: center;\n  user-select: none;\n\n  .status {\n    display: block;\n    width: 12px;\n    height: 12px;\n    border-radius: 50%;\n  }\n\n  .name {\n    padding: 0.5rem;\n    font-family: ${({ theme }) => theme.font};\n  }\n`;\n\nexport enum StatusTypes {\n  \"ACCEPTED\",\n  \"WAITING\",\n  \"ENDED\",\n  \"CANCELED\",\n  \"DEFAULT\",\n}\n\ninterface Props {\n  status: StatusTypes;\n  name: string;\n}\n\nconst Status = ({ status, name }: Props) => {\n  const theme = useTheme();\n  const color = useMemo(() => {\n    switch (status) {\n      case StatusTypes.ACCEPTED:\n        return \"#198754\";\n      case StatusTypes.WAITING:\n        return \"#FFC300\";\n      case StatusTypes.ENDED:\n      case StatusTypes.CANCELED:\n        return \"#D22B2B\";\n      default:\n        return theme.primaryColor;\n    }\n  }, [theme.primaryColor, status]);\n\n  return (\n    <StatusStyles>\n      <div\n        className=\"status\"\n        style={{\n          backgroundColor: color,\n        }}\n      />\n      <div className=\"name\">{name}</div>\n    </StatusStyles>\n  );\n};\n\nexport default Status;\n","import styled from \"styled-components\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport { IconCircleError, IconSuccess } from \"@/icons/index\";\nimport IconText from \"@escolalms/components/lib/components/atoms/IconText/IconText\";\nimport { useContext } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { useTranslation } from \"react-i18next\";\nimport Status, { StatusTypes } from \"@/components/Common/Status\";\n\nconst ConsultationTutorCardContentUserInfoStyles = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  min-height: 65px;\n  margin-bottom: 5px;\n  .text {\n    margin: 0;\n    font-size: 14px;\n  }\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 10px 0px;\n  > p {\n    padding: 2px;\n    border-radius: ${({ theme }) => theme.radius};\n    cursor: pointer;\n\n    &:hover {\n      font-weight: bold;\n    }\n  }\n`;\n\ninterface Props {\n  consultation: API.AppointmentTerm;\n}\n\nconst statuses = {\n  reported: {\n    type: StatusTypes.WAITING,\n    info: \"ConsultationStatus.UnconfirmedInfo\",\n  },\n  approved: {\n    type: StatusTypes.ACCEPTED,\n    info: \"ConsultationStatus.ConfirmedInfo\",\n  },\n  reject: {\n    type: StatusTypes.ENDED,\n    info: \"ConsultationStatus.RejectedInfo\",\n  },\n};\ntype StatusKey = keyof typeof statuses;\n\nconst ConsultationTutorCardContentUserInfo = ({ consultation }: Props) => {\n  const { approveConsultationTerm, rejectConsultationTerm } =\n    useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n\n  const renderStatus = (status: StatusKey) => {\n    switch (status) {\n      case \"reported\":\n        return (\n          <Status\n            status={StatusTypes.WAITING}\n            name={t(\"ConsultationStatus.Unconfirmed\")}\n          />\n        );\n      case \"approved\":\n        return (\n          <Status\n            status={StatusTypes.ACCEPTED}\n            name={t(\"ConsultationStatus.Appointment\")}\n          />\n        );\n      case \"reject\":\n        return (\n          <Status\n            status={StatusTypes.ENDED}\n            name={t(\"ConsultationStatus.Canceled\")}\n          />\n        );\n    }\n  };\n\n  return (\n    <ConsultationTutorCardContentUserInfoStyles>\n      {consultation.users.map((user) => (\n        <div key={user.id}>\n          <Text className=\"text\">\n            {user.first_name} {user.last_name}\n          </Text>\n          <Text className=\"text\">{user.email}</Text>\n          {consultation.users.length > 1 && (\n            <>\n              {statuses[user.executed_status as StatusKey] &&\n                renderStatus(user.executed_status as StatusKey)}\n              {\n                <ButtonWrapper>\n                  <IconText\n                    icon={<IconSuccess />}\n                    text={t(\"Confirm\")}\n                    onClick={() =>\n                      approveConsultationTerm(\n                        consultation?.consultation_term_id,\n                        consultation.date,\n                        user.id\n                      )\n                    }\n                  />\n                  <IconText\n                    icon={<IconCircleError />}\n                    text={t(\"Cancel\")}\n                    onClick={() =>\n                      rejectConsultationTerm(\n                        consultation?.consultation_term_id,\n                        consultation.date,\n                        user.id\n                      )\n                    }\n                  />\n                </ButtonWrapper>\n              }\n            </>\n          )}\n\n          <hr />\n        </div>\n      ))}\n    </ConsultationTutorCardContentUserInfoStyles>\n  );\n};\n\nexport default ConsultationTutorCardContentUserInfo;\n","import { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { addTimeToDate, extractTimeUnits, formatDate } from \"@/utils/date\";\nimport DateInfo, { DateInfoTypes } from \"@/components/Common/DateInfo\";\nimport ConsultationCardJoinButton from \"@/components/Consultations/ConsultationCard/Buttons/JoinButton\";\n\nconst ConsultationTutorCardContentDateInfoButtonsStyles = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  width: 100%;\n  gap: 12px;\n`;\n\ninterface Props {\n  consultation: API.AppointmentTerm;\n}\n\nconst ConsultationTutorCardContentDateInfo = ({ consultation }: Props) => {\n  const { t } = useTranslation();\n  const isEnded = consultation.is_ended;\n  const isStarted = consultation.is_started;\n  const isReported = consultation.status === \"reported\";\n  const isApproved = consultation.status === \"approved\";\n  const isNotReported = consultation.status === \"not_reported\";\n  const isRejected = consultation.status === \"reject\";\n\n  return (\n    <>\n      {isEnded && consultation.date && (\n        <DateInfo\n          type={DateInfoTypes.ENDED}\n          date={addTimeToDate(\n            consultation.date,\n            extractTimeUnits(`${consultation.duration}`)\n          )}\n        />\n      )}\n      {isRejected && (\n        <DateInfo\n          type={DateInfoTypes.ENDED}\n          date={addTimeToDate(\n            consultation.date,\n            extractTimeUnits(`${consultation.duration}`)\n          )}\n        />\n      )}\n      {isReported && !isEnded && (\n        <DateInfo\n          type={DateInfoTypes.WAITING}\n          date={consultation.date}\n          info={t(\"ConsultationStatus.UnconfirmedInfo\")}\n        />\n      )}\n      {isApproved && !isEnded && (\n        <DateInfo\n          type={DateInfoTypes.ACCEPTED}\n          date={consultation.date}\n          info={\n            isStarted && consultation?.consultation_term_id ? (\n              <ConsultationTutorCardContentDateInfoButtonsStyles>\n                <ConsultationCardJoinButton\n                  consultationTermId={consultation?.consultation_term_id}\n                  // @ts-ignore\n                  consultationId={consultation?.consultation_id}\n                  term={consultation.date}\n                />\n              </ConsultationTutorCardContentDateInfoButtonsStyles>\n            ) : (\n              t(\"ConsultationStatus.AppointmentInfo\", {\n                date: formatDate(\n                  consultation.date,\n                  \"EEEE, dd LLLL yyyy, HH:mm\"\n                ),\n              })\n            )\n          }\n        />\n      )}\n      {isNotReported && <DateInfo type={DateInfoTypes.DEFAULT} />}\n    </>\n  );\n};\n\nexport default ConsultationTutorCardContentDateInfo;\n","import styled from \"styled-components\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport { IconTime } from \"../../../icons\";\n\nconst TimeInfoStyles = styled.div`\n  display: flex;\n  flex-direction: row;\n  border: 1px solid ${({ theme }) => theme.primaryColor};\n  border-radius: 2px;\n  align-items: center;\n  border-radius: ${({ theme }) => theme.cardRadius}px;\n  .icon-container {\n    display: flex;\n    align-items: center;\n    padding: 0.6rem;\n    background-color: ${({ theme }) => theme.primaryColor};\n    border-top-left-radius: ${({ theme }) => (theme.cardRadius ?? 2) - 2}px;\n    border-bottom-left-radius: ${({ theme }) => (theme.cardRadius ?? 2) - 2}px;\n  }\n\n  .time {\n    padding: 0.5rem;\n    margin: 0 auto;\n  }\n`;\n\ninterface TimeInfoProps {\n  time: string;\n}\n\nconst TimeInfo = ({ time }: TimeInfoProps) => {\n  return (\n    <TimeInfoStyles>\n      <div className=\"icon-container\">\n        <IconTime color=\"#ffffff\" width=\"22px\" height=\"22px\" />\n      </div>\n      <Text className=\"time\">{time}</Text>\n    </TimeInfoStyles>\n  );\n};\n\nexport default TimeInfo;\n","import styled from \"styled-components\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport ConsultationTutorCardContentUserInfo from \"./UserInfo\";\nimport ConsultationTutorCardContentDateInfo from \"./DateInfo\";\nimport TimeInfo from \"@/components/Common/TimeInfo\";\n\nconst ConsultationTutorCardContentStyles = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  gap: 12px;\n`;\n\ninterface Props {\n  consultation: API.AppointmentTerm;\n}\n\nconst ConsultationTutorCardContent = ({ consultation }: Props) => {\n  return (\n    <ConsultationTutorCardContentStyles>\n      <ConsultationTutorCardContentUserInfo consultation={consultation} />\n      <TimeInfo time={consultation.duration} />\n      <ConsultationTutorCardContentDateInfo consultation={consultation} />\n    </ConsultationTutorCardContentStyles>\n  );\n};\n\nexport default ConsultationTutorCardContent;\n","import { useContext, useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport IconText from \"@escolalms/components/lib/components/atoms/IconText/IconText\";\nimport { IconCircleError, IconMenuVertical, IconSuccess } from \"@/icons/index\";\nimport DropdownMenu from \"@escolalms/components/lib/components/molecules/DropdownMenu/DropdownMenu\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\n\ninterface Props {\n  consultation: API.AppointmentTerm;\n}\n\nconst ConsultationTutorCardButtons = ({ consultation }: Props) => {\n  const { approveConsultationTerm, rejectConsultationTerm } =\n    useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n\n  const menuItems = useMemo(\n    () => [\n      {\n        id: 1,\n        content: (\n          <IconText\n            icon={<IconSuccess />}\n            text={t(\"Confirm\")}\n            onClick={() =>\n              approveConsultationTerm(\n                consultation?.consultation_term_id,\n                consultation.date\n              )\n            }\n          />\n        ),\n      },\n      {\n        id: 2,\n        content: (\n          <IconText\n            icon={<IconCircleError />}\n            text={t(\"Cancel\")}\n            onClick={() =>\n              rejectConsultationTerm(\n                consultation?.consultation_term_id,\n                consultation.date\n              )\n            }\n          />\n        ),\n      },\n    ],\n    [\n      approveConsultationTerm,\n      consultation?.consultation_term_id,\n      rejectConsultationTerm,\n      t,\n      consultation.date,\n    ]\n  );\n\n  return (\n    <DropdownMenu\n      menuItems={menuItems}\n      child={\n        <Button mode=\"icon\">\n          <IconMenuVertical />\n        </Button>\n      }\n    />\n  );\n};\n\nexport default ConsultationTutorCardButtons;\n","import { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport Status, { StatusTypes } from \"@/components/Common/Status\";\nimport ConsultationTutorCardButtons from \"../Actions\";\n\nconst ConsultationTutorCardStatusStyles = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n\n  button > svg {\n    width: 24px;\n    height: 25px;\n  }\n`;\n\ninterface Props {\n  consultation: API.AppointmentTerm;\n}\n\nconst ConsultationTutorCardStatus = ({ consultation }: Props) => {\n  const { status, is_ended } = consultation;\n  const { t } = useTranslation();\n  const isReported = status === \"reported\";\n  const isApproved = status === \"approved\";\n  const isRejected = status === \"reject\";\n\n  if (isRejected) {\n    return (\n      <Status\n        status={StatusTypes.CANCELED}\n        name={t(\"ConsultationStatus.Canceled\")}\n      />\n    );\n  }\n  if (is_ended) {\n    return (\n      <Status status={StatusTypes.ENDED} name={t(\"ConsultationStatus.Ended\")} />\n    );\n  }\n  if (isReported) {\n    return (\n      <ConsultationTutorCardStatusStyles>\n        <Status\n          status={StatusTypes.WAITING}\n          name={t(\"ConsultationStatus.Unconfirmed\")}\n        />\n\n        <ConsultationTutorCardButtons consultation={consultation} />\n      </ConsultationTutorCardStatusStyles>\n    );\n  }\n  if (isApproved) {\n    return (\n      <Status\n        status={StatusTypes.ACCEPTED}\n        name={t(\"ConsultationStatus.Appointment\")}\n      />\n    );\n  }\n  return <Status status={StatusTypes.DEFAULT} name={status} />;\n};\n\nexport default ConsultationTutorCardStatus;\n\n// ConsultationStatus: {\n//   Unconfirmed: \"Unconfirmed\",\n//   Bought: \"Bought\",\n//   Canceled: \"Canceled\",\n//   Appointment: \"Appointment\",\n// }\n","import React from \"react\";\nimport { CourseCard } from \"@escolalms/components/lib/components/molecules/CourseCard/CourseCard\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { ConsultationTutorCardStyles } from \"./ConsultationTutorCardStyles\";\nimport ConsultationTutorCardImage from \"./Image\";\nimport ConsultationTutorCardContent from \"./Content\";\nimport ConsultationTutorCardStatus from \"./Status\";\n\ninterface ConsultationTutorCardProps {\n  consultation: API.AppointmentTerm;\n}\n\nconst ConsultationTutorCard: React.FC<ConsultationTutorCardProps> = (props) => {\n  const { consultation } = props;\n\n  return (\n    <ConsultationTutorCardStyles>\n      <CourseCard\n        id={consultation?.consultation_term_id}\n        image={<ConsultationTutorCardImage product={consultation} />}\n        title={<ConsultationTutorCardStatus consultation={consultation} />}\n        subtitle={<p>{consultation?.related_product?.name}</p>}\n        footer={<ConsultationTutorCardContent consultation={consultation} />}\n      />\n    </ConsultationTutorCardStyles>\n  );\n};\n\nexport default ConsultationTutorCard;\n","import {\n  memo,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n  useCallback,\n} from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { isMobile } from \"react-device-detect\";\nimport { Col, Row } from \"react-grid-system\";\nimport { ConsultationStatus } from \"../../../pages/user/my-consultations\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport ConsultationTutorCard from \"@/components/Consultations/ConsultationTutorCard\";\nimport { CourseCardSkeleton } from \"@/components/Skeletons/CourseCard\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { API_URL } from \"@/config/index\";\ninterface ProfileTutorConsultationsProps {\n  type: ConsultationStatus;\n}\n\nconst ProfileTutorConsultations = ({\n  type,\n}: ProfileTutorConsultationsProps) => {\n  const { tutorConsultations, fetchTutorConsultations, token } =\n    useContext(EscolaLMSContext);\n  const { t } = useTranslation();\n  const [consultationsData, setConsultationsData] = useState<\n    API.AppointmentTerm[]\n  >([]);\n\n  const filterConstulations = useMemo(\n    () =>\n      tutorConsultations.list?.data.filter((consultation) =>\n        type === ConsultationStatus.STARTED ||\n        type === ConsultationStatus.UPCOMING\n          ? consultation.in_coming || consultation.is_started\n          : consultation.is_ended\n      ) || [],\n    [type, tutorConsultations.list?.data]\n  );\n\n  const refreshConsultation = useCallback(\n    async (id: number, termId: number) => {\n      try {\n        const request = await fetch(\n          `${API_URL}/api/consultations/my-schedule?ids[]=${id}`,\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n        const response = await request.json();\n\n        if (response.success && response.data.length > 0) {\n          const responseIndex = response.data.findIndex(\n            (consultation: API.AppointmentTerm) =>\n              consultation?.consultation_term_id === termId\n          );\n          setConsultationsData((prev) => {\n            const index = prev.findIndex(\n              (consultation: API.AppointmentTerm) =>\n                consultation?.consultation_term_id === termId\n            );\n\n            if (index !== -1 && responseIndex !== -1) {\n              prev[index] = response.data[responseIndex];\n            }\n\n            return [...prev];\n          });\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    [token]\n  );\n\n  const handleRefreshIfTimePassed = useCallback(() => {\n    consultationsData.forEach((consultation) => {\n      if (!consultation.is_started && !consultation.is_ended) {\n        refreshConsultation(\n          // @ts-ignore\n          consultation?.consultation_id,\n          consultation.consultation_term_id\n        );\n      }\n    });\n  }, [consultationsData, refreshConsultation]);\n\n  useEffect(() => {\n    fetchTutorConsultations();\n  }, [fetchTutorConsultations]);\n\n  useEffect(() => {\n    setConsultationsData([]);\n    setConsultationsData(filterConstulations);\n    const interval = setInterval(() => {\n      handleRefreshIfTimePassed();\n    }, 30000);\n    return () => {\n      setConsultationsData([]);\n      clearInterval(interval);\n    };\n  }, [type, filterConstulations, handleRefreshIfTimePassed]);\n\n  return (\n    <>\n      <Row\n        style={{\n          gap: \"30px 0\",\n        }}\n      >\n        {tutorConsultations.loading ? (\n          Array.from({ length: 8 }).map((_, index) => (\n            <Col md={3} key={`skeleton-card-${index}`}>\n              <CourseCardSkeleton />\n            </Col>\n          ))\n        ) : consultationsData.length === 0 ? (\n          <Text style={{ paddingLeft: isMobile ? 20 : 40 }}>\n            {t<string>(\"MyProfilePage.OrdersEmpty\")}\n          </Text>\n        ) : (\n          <>\n            {\" \"}\n            {consultationsData.map((consultation) => (\n              <Col\n                key={consultation.consultation_term_id}\n                xs={12}\n                md={6}\n                lg={3}\n              >\n                <ConsultationTutorCard consultation={consultation} />\n              </Col>\n            ))}\n          </>\n        )}\n      </Row>\n    </>\n  );\n};\n\nexport default memo(ProfileTutorConsultations);\n","import styled from \"styled-components\";\n\nexport const ConsultationMeetModalStyles = styled.div`\n  iframe {\n    width: 100% !important;\n    height: calc(100vh - 76px);\n    border: none;\n  }\n`;\n","export const DEFAULT_DOMAIN = 'meet.jit.si';\nexport const JAAS_STAGING_DOMAIN = 'stage.8x8.vc';\nexport const JAAS_PROD_DOMAIN = '8x8.vc';\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_DOMAIN } from './constants';\nconst loadExternalApi = (domain, release, appId) => __awaiter(void 0, void 0, void 0, function* () {\n    return new Promise((resolve, reject) => {\n        if (window.JitsiMeetExternalAPI) {\n            return resolve(window.JitsiMeetExternalAPI);\n        }\n        const script = document.createElement('script');\n        const releaseParam = release ? `?release=${release}` : '';\n        const appIdPath = appId ? `${appId}/` : '';\n        script.async = true;\n        script.src = `https://${domain}/${appIdPath}external_api.js${releaseParam}`;\n        script.onload = () => resolve(window.JitsiMeetExternalAPI);\n        script.onerror = () => reject(new Error(`Script load error: ${script.src}`));\n        document.head.appendChild(script);\n    });\n});\nlet scriptPromise;\n/**\n * Injects the external_api.js script for the corresponding domain in DOM\n * and resolves with either the `JitsiMeetExternalApi` class definition or an error.\n *\n * Only the first script will be injected, therefore avoid using multiple instances\n * with mixed domains and release version at the same time.\n *\n * @param {string} domain - The domain of the external API\n * @param {string} release - The Jitsi Meet release. Expected format: 'release-1234'\n * @param {string} appId - The tenant for JaaS Meetings\n * @returns {Promise<JitsiMeetExternalApi>} - The JitsiMeetExternalAPI or an error\n */\nexport const fetchExternalApi = (domain = DEFAULT_DOMAIN, release, appId) => {\n    if (scriptPromise) {\n        return scriptPromise;\n    }\n    scriptPromise = loadExternalApi(domain, release, appId);\n    return scriptPromise;\n};\n","import { JAAS_PROD_DOMAIN, JAAS_STAGING_DOMAIN } from '../constants';\n/**\n * Returns the complete room name\n *\n * @param {string} roomName\n * @param {string} tenant\n * @returns {string} the complete room name\n */\nexport const getRoomName = (roomName, tenant) => {\n    if (tenant) {\n        return `${tenant}/${roomName}`;\n    }\n    return roomName;\n};\n/**\n * Returns the appId or tenant value\n *\n * @param {string} roomName\n * @returns {string|undefined}\n */\nexport const getAppId = (roomName) => {\n    const roomParts = roomName.split('/');\n    if (roomParts.length <= 1) {\n        return;\n    }\n    return roomParts[0];\n};\n/**\n * Returns the JaaS domain\n *\n * @param {boolean|undefined} useStaging\n * @returns {string} the JaaS domain\n */\nexport const getJaaSDomain = (useStaging) => {\n    if (useStaging) {\n        return JAAS_STAGING_DOMAIN;\n    }\n    return JAAS_PROD_DOMAIN;\n};\nlet instancesCounter = 0;\n/**\n * Generates an unique id\n * @param {string} prefix\n * @returns {string} the component id\n */\nexport const generateComponentId = (prefix) => `${prefix}-${instancesCounter++}`;\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { DEFAULT_DOMAIN } from '../constants';\nimport { fetchExternalApi } from '../init';\nimport { generateComponentId, getAppId } from '../utils';\n/**\n * Returns the JitsiMeeting Component with access to a custom External API\n * to be used as-it-is in React projects\n *\n * @param {IJitsiMeetingProps} props the component's props\n * @returns {ReactElement} the `JitsiMeeting` Component\n * @example\n  ```js\n    <JitsiMeeting\n        domain='meet.jit.si'\n        roomName: 'TestingJitsiMeetingComponent'\n        spinner={CustomSpinner}\n        onApiReady={(externalApi) => console.log(externalApi)}\n    />\n  ```\n */\nconst JitsiMeeting = ({ domain = DEFAULT_DOMAIN, roomName, configOverwrite, interfaceConfigOverwrite, jwt, invitees, devices, userInfo, release, lang, spinner: Spinner, onApiReady, onReadyToClose, getIFrameRef }) => {\n    const [loading, setLoading] = useState(true);\n    const [apiLoaded, setApiLoaded] = useState(false);\n    const externalApi = useRef();\n    const apiRef = useRef();\n    const meetingRef = useRef(null);\n    const componentId = useMemo(() => generateComponentId('jitsiMeeting'), [generateComponentId]);\n    useEffect(() => {\n        fetchExternalApi(domain, release, getAppId(roomName))\n            .then((api) => {\n            externalApi.current = api;\n            setApiLoaded(true);\n        })\n            .catch((e) => console.error(e.message));\n    }, []);\n    const loadIFrame = useCallback((JitsiMeetExternalAPI) => {\n        apiRef.current = new JitsiMeetExternalAPI(domain, {\n            roomName,\n            configOverwrite,\n            interfaceConfigOverwrite,\n            jwt,\n            invitees,\n            devices,\n            userInfo,\n            release,\n            lang,\n            parentNode: meetingRef.current\n        });\n        setLoading(false);\n        if (apiRef.current) {\n            typeof onApiReady === 'function' && onApiReady(apiRef.current);\n            apiRef.current.on('readyToClose', () => {\n                typeof onReadyToClose === 'function' && onReadyToClose();\n            });\n            if (meetingRef.current && typeof getIFrameRef === 'function') {\n                getIFrameRef(meetingRef.current);\n            }\n        }\n    }, [\n        apiRef,\n        meetingRef,\n        onApiReady,\n        onReadyToClose,\n        getIFrameRef,\n        domain,\n        roomName,\n        configOverwrite,\n        interfaceConfigOverwrite,\n        jwt,\n        invitees,\n        devices,\n        userInfo,\n        release,\n        lang\n    ]);\n    useEffect(() => {\n        if (apiLoaded && !apiRef.current) {\n            if (externalApi.current) {\n                loadIFrame(externalApi.current);\n            }\n        }\n    }, [apiLoaded, loadIFrame]);\n    const renderLoadingSpinner = useCallback(() => {\n        if (!Spinner) {\n            return null;\n        }\n        if (!loading || apiRef.current) {\n            return null;\n        }\n        return _jsx(Spinner, {}, void 0);\n    }, [Spinner, apiRef.current]);\n    return (_jsxs(_Fragment, { children: [renderLoadingSpinner(), _jsx(\"div\", { id: componentId, ref: meetingRef }, componentId)] }, void 0));\n};\nexport default JitsiMeeting;\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { getJaaSDomain, getRoomName } from '../utils';\nimport { JitsiMeeting } from '.';\n/**\n * Returns the JaaSMeeting Component with access to the 8x8.vc External API\n * to be used as-it-is in React projects\n *\n * @param {IJaaSMeetingProps} props the component's props\n * @returns {ReactElement} the `JaaSMeeting` Component\n * @example\n  ```js\n      <JaaSMeeting\n        roomName: 'TestingJaaSMeetingComponent'\n        appId='exampleAppId'\n        spinner={CustomSpinner}\n        onApiReady={(externalApi) => console.log(externalApi)}\n      />\n  ```\n */\nconst JaaSMeeting = (_a) => {\n    var { appId, roomName, useStaging, release } = _a, rest = __rest(_a, [\"appId\", \"roomName\", \"useStaging\", \"release\"]);\n    return (_jsx(JitsiMeeting, Object.assign({ domain: getJaaSDomain(useStaging), roomName: getRoomName(roomName, appId), release: release }, rest), void 0));\n};\nexport default JaaSMeeting;\n","import { Blob } from \"buffer\";\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { WorkerResponse } from \"src/workers/dataUrlWorker\";\n\n// Enums\nexport enum cameraPermissions {\n  GRANTED = \"granted\",\n  DENIED = \"denied\",\n  PROMPT = \"prompt\",\n}\n\nconst useCamera = () => {\n  const [hasCameraAccess, setHasCameraAccess] = useState(false);\n  const [cameraAccessStatus, setCameraAccessStatus] = useState(\n    cameraPermissions.PROMPT\n  );\n  const streamRef = useRef<MediaStream | null>(null);\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const workerRef = useRef<Worker | null>(null); // Web Worker ref\n\n  const getCameraStream = useCallback(async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: { ideal: 1280 },\n          height: { ideal: 720 },\n        },\n        audio: false,\n      });\n      setHasCameraAccess(true);\n      setCameraAccessStatus(cameraPermissions.GRANTED);\n      streamRef.current = stream;\n\n      // Create and configure video element\n      if (!videoRef.current) {\n        videoRef.current = document.createElement(\"video\");\n        videoRef.current.muted = true;\n        videoRef.current.playsInline = true;\n      }\n\n      videoRef.current.srcObject = stream;\n      videoRef.current.play();\n\n      return videoRef.current; // Return the video element if needed\n    } catch (err) {\n      console.error(\"Camera access denied or not available:\", err);\n      setHasCameraAccess(false); // Camera access denied\n      setCameraAccessStatus(cameraPermissions.DENIED);\n      return null;\n    }\n  }, []);\n\n  const restartVideoTrack = useCallback(async () => {\n    if (streamRef.current) {\n      // Stop all existing tracks in the stream\n      streamRef.current.getTracks().forEach((track) => track.stop());\n    }\n\n    // Re-attempt to get the camera stream\n    return await getCameraStream();\n  }, [getCameraStream]);\n\n  const camera = async () => {\n    return await getCameraStream();\n  };\n\n  const getDataUrl = async (): Promise<Blob | null> => {\n    if (videoRef.current && streamRef.current) {\n      const canvasElement = document.createElement(\"canvas\");\n      const ctx = canvasElement.getContext(\"2d\");\n\n      const track = streamRef.current.getVideoTracks()[0];\n      const settings = track.getSettings();\n\n      canvasElement.height = settings.height || 720;\n      canvasElement.width = settings.width || 1280;\n\n      // Get the actual video element from Jitsi that includes background effects\n      const jitsiVideoElement = document.querySelector(\n        \".jitsi-video\"\n      ) as HTMLVideoElement;\n      const sourceElement = jitsiVideoElement || videoRef.current;\n\n      ctx?.drawImage(\n        sourceElement,\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n\n      const imageBitmap = await createImageBitmap(canvasElement);\n\n      if (!workerRef.current) {\n        workerRef.current = new Worker(\n          new URL(\"../../workers/dataUrlWorker.ts\", import.meta.url),\n          {\n            type: \"module\",\n          }\n        );\n      }\n\n      return new Promise((resolve, reject) => {\n        workerRef.current!.onmessage = (\n          event: MessageEvent<WorkerResponse>\n        ) => {\n          const { success, blob, error } = event.data;\n\n          if (success && blob) {\n            resolve(blob);\n          } else {\n            reject(error || \"Unknown error occurred in Web Worker.\");\n          }\n        };\n\n        workerRef.current!.onerror = (err) => {\n          console.error(\"Worker error:\", err);\n          reject(\"Web Worker encountered an error.\");\n        };\n\n        workerRef.current!.postMessage({\n          canvasData: imageBitmap,\n          width: canvasElement.width,\n          height: canvasElement.height,\n        });\n      });\n    }\n    return null;\n  };\n\n  useEffect(() => {\n    const handlePermissionChange = async () => {\n      const permissionStatus = await navigator.permissions.query({\n        name: \"camera\" as PermissionName,\n      });\n\n      // If permission is granted, restart the video track\n      if (permissionStatus.state === cameraPermissions.GRANTED) {\n        await restartVideoTrack();\n      }\n\n      if (permissionStatus.state === cameraPermissions.DENIED) {\n        setHasCameraAccess(false);\n        setCameraAccessStatus(cameraPermissions.DENIED);\n      }\n\n      // Listen for permission changes\n      permissionStatus.onchange = async () => {\n        if (permissionStatus.state === cameraPermissions.GRANTED) {\n          await restartVideoTrack();\n        } else {\n          setHasCameraAccess(false);\n          setCameraAccessStatus(cameraPermissions.DENIED);\n        }\n      };\n    };\n\n    handlePermissionChange();\n\n    return () => {\n      // Clean up Workera\n      if (workerRef.current) {\n        workerRef.current.terminate();\n      }\n    };\n  }, [restartVideoTrack]);\n\n  return {\n    camera,\n    hasCameraAccess,\n    restartVideoTrack,\n    getDataUrl,\n    cameraAccessStatus,\n  };\n};\n\nexport default useCamera;\n","import { API_URL } from \"@/config/index\";\nimport { IJitsiMeetExternalApi } from \"@jitsi/react-sdk/lib/types\";\n\ntype Room = {\n  isMainRoom: boolean;\n  participants: { email: string; displayName: string; id: string }[];\n  roomName: string;\n};\n\n// const formatDate = (date: Date) => {\n//   const year = date.getFullYear();\n//   const month = String(date.getMonth() + 1).padStart(2, \"0\");\n//   const day = String(date.getDate()).padStart(2, \"0\");\n//   const hours = String(date.getHours()).padStart(2, \"0\");\n//   const minutes = String(date.getMinutes()).padStart(2, \"0\");\n//   const seconds = String(date.getSeconds()).padStart(2, \"0\");\n\n//   return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n// };\n\nexport const saveImages = async (\n  consultationId: number,\n  consultationTermId: number,\n  userEmail: string,\n  userId: number,\n  screenshots: { dataURL: Blob; timestamp: number }[],\n  term: string\n) => {\n  const filenames = screenshots.map((screenshot) => ({\n    filename: `${screenshot.timestamp}.webp`,\n  }));\n\n  try {\n    const signUrls = await fetch(\n      `${API_URL}/api/consultations/signed-screen-urls`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          consultation_id: consultationId,\n          user_termin_id: consultationTermId,\n          user_id: userId,\n          user_email: userEmail,\n          files: filenames,\n          executed_at: term,\n        }),\n      }\n    );\n\n    if (!signUrls.ok) {\n      throw new Error(`Failed to sign URLs: ${signUrls.statusText}`);\n    }\n\n    const responseData = await signUrls.json();\n\n    for (let i = 0; i < responseData.data.length; i++) {\n      const { url, filename } = responseData.data[i];\n      const screenshot = screenshots.find(\n        (s) => `${s.timestamp}.webp` === filename\n      );\n\n      if (!screenshot) {\n        console.warn(`Screenshot not found for filename: ${filename}`);\n        continue;\n      }\n\n      try {\n        const blob = new Blob([screenshot.dataURL]);\n        const response = await fetch(url, {\n          method: \"PUT\",\n          body: blob,\n        });\n\n        if (response.ok) {\n          console.log(`File ${filename} uploaded successfully.`);\n        } else {\n          console.error(`Failed to upload ${filename}: ${response.statusText}`);\n        }\n      } catch (error) {\n        console.error(`Error uploading ${filename}:`, error);\n      }\n    }\n  } catch (error) {\n    console.error(\"Error saving screenshots and timestamps:\", error);\n  }\n};\n\nexport const getCurrentUser = async (api: IJitsiMeetExternalApi) => {\n  //@ts-ignore\n  const rooms: { rooms: Room[] } = await api.getRoomsInfo();\n\n  const mainRoom = rooms.rooms.find((room) => room.isMainRoom);\n\n  return mainRoom?.participants.find(\n    //@ts-ignore\n    (participant) => participant.id === api._myUserID\n  );\n};\n","import { Title } from \"@escolalms/components/lib/components/atoms/Typography/Title\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  message: string;\n  closeToast: () => void;\n  userConsentedRef: React.MutableRefObject<boolean | null>;\n};\n\nconst Container = styled.div`\n  padding: 30px 23px 0 23px;\n  text-align: center;\n  h1 {\n    font-size: 20px;\n    margin-bottom: 10px;\n  }\n  p {\n    max-width: 80%;\n    margin: 20px auto;\n  }\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  gap: 10px;\n  margin-top: 10px;\n  width: 100%;\n  justify-content: space-between;\n  button {\n    min-width: 130px;\n  }\n`;\n\nconst JitsyMeetingMessage: React.FC<Props> = ({\n  message,\n  closeToast,\n  userConsentedRef,\n}) => {\n  const { t } = useTranslation();\n  return (\n    <Container className=\"jitsy-message\">\n      <Title className=\"jitsy-message__title\">\n        {t(\"ConsultationPage.EmotionConsent\")}\n      </Title>\n      <Text size=\"16\">{message}</Text>\n      <ButtonWrapper>\n        <Button\n          onClick={() => [(userConsentedRef.current = true), closeToast()]}\n        >\n          {t(\"ConsultationPage.Yes\")}\n        </Button>\n        <Button\n          mode=\"secondary\"\n          onClick={() => [(userConsentedRef.current = false), closeToast()]}\n        >\n          {t(\"ConsultationPage.No\")}\n        </Button>\n      </ButtonWrapper>\n    </Container>\n  );\n};\n\nexport default JitsyMeetingMessage;\n","import Skeleton from \"react-loading-skeleton\";\nimport styled from \"styled-components\";\n\nconst SkeletonWrapper = styled.div`\n  position: relative;\n  background: #000;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  .meeting-container {\n    width: 80%;\n    height: 50vh;\n    background: #1a1a1a;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 10px;\n    position: relative;\n  }\n\n  .participant-initials {\n    width: 80px;\n    height: 80px;\n    background: #d33;\n    border-radius: 50%;\n  }\n\n  .controls {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: 20px;\n    gap: 10px;\n    background: rgba(0, 0, 0, 0.8);\n    padding: 10px;\n    border-radius: 10px;\n  }\n\n  .control-button {\n    width: 35px;\n    height: 35px;\n    background: #333;\n  }\n\n  .end-call {\n    background: red;\n  }\n`;\n\nconst JitsiMeetingSkeleton = () => {\n  return (\n    <SkeletonWrapper>\n      <div className=\"meeting-container\">\n        <Skeleton width={80} height={80} className=\"participant-initials\" />\n      </div>\n      <div className=\"controls\">\n        <Skeleton width={35} height={35} className=\"control-button\" />\n        <Skeleton width={35} height={35} className=\"control-button\" />\n        <Skeleton width={35} height={35} className=\"control-button\" />\n        <Skeleton width={35} height={35} className=\"control-button\" />\n        <Skeleton width={35} height={35} className=\"control-button\" />\n        <Skeleton width={35} height={35} className=\"control-button end-call\" />\n      </div>\n    </SkeletonWrapper>\n  );\n};\n\nexport default JitsiMeetingSkeleton;\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { JaaSMeeting } from \"@jitsi/react-sdk\";\nimport { IJitsiMeetExternalApi } from \"@jitsi/react-sdk/lib/types\";\nimport { Text } from \"@escolalms/components/lib/components/atoms/Typography/Text\";\n\nimport * as API from \"@escolalms/sdk/lib/types\";\nimport useCamera, { cameraPermissions } from \"@/hooks/meeting/useCamera\";\nimport { getCurrentUser } from \"@/utils/meeting\";\nimport JitsyMeetingMessage from \"@/components/Consultations/ConsultationCard/JitsyMeeting/Message\";\nimport { useRoles } from \"@/hooks/useRoles\";\nimport { useTranslation } from \"react-i18next\";\nimport { Modal } from \"@escolalms/components/lib/components/atoms/Modal/Modal\";\nimport styled from \"styled-components\";\nimport { API_URL } from \"@/config/index\";\nimport { Button } from \"@escolalms/components/lib/components/atoms/Button/Button\";\nimport JitsyMeetingSkeleton from \"@/components/Skeletons/JitsyMeeting\";\n\nexport const StyledModal = styled(Modal)`\n  .rc-dialog-content {\n    border-radius: 15px;\n  }\n  .rc-dialog-body {\n    padding: 14px 0;\n  }\n`;\n\nconst StyledAccessWrapper = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #fff;\n  padding: 20px;\n  border-radius: 10px;\n  text-align: center;\n  font-size: 20px;\n  .button-reload {\n    margin-top: 20px;\n  }\n`;\n\nconst RecordButtonWrapper = styled.div`\n  position: absolute;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 10px;\n`;\n\nconst FRAME_RATE = 1;\nconst SEND_INTERVAL = 3000;\n\ndeclare global {\n  interface Window {\n    api: IJitsiMeetExternalApi;\n  }\n}\n\ntype Props = {\n  jitsyData: Omit<API.JitsyData, \"yt_url\" | \"yt_stream_url\" | \"yt_stream_key\">; // or API.JitsyData but yt_stream in this type should be optional\n  term: string;\n  consultationTermId: number;\n  consultationId?: number;\n  close?: () => void;\n};\n\nconst JitsyMeeting: React.FC<Props> = ({\n  jitsyData,\n  term,\n  consultationTermId,\n  consultationId,\n  close,\n}) => {\n  const [showMeeting, setShowMeeting] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const { camera, getDataUrl, hasCameraAccess, cameraAccessStatus } =\n    useCamera();\n  const userConsentedRef = useRef(false);\n  const isMeetingActive = useRef(false);\n  const intervalIdRef = useRef<NodeJS.Timeout | null>(null);\n  const workerRef = useRef<Worker | null>(null);\n  const [recordingUrl, setRecordingUrl] = useState<string | null>(null);\n\n  const { isStudent } = useRoles();\n  const { t } = useTranslation();\n\n  const handleConferenceJoined = useCallback(() => {\n    console.log(\"Video conference joined\");\n    isMeetingActive.current = true;\n  }, []);\n\n  const handleConferenceLeft = useCallback(() => {\n    console.log(\"Video conference left\");\n    isMeetingActive.current = false;\n  }, []);\n\n  interface RecordingLinkAvailableEvent {\n    link: string;\n  }\n\n  const handleRecordingLinkAvailable = useCallback(\n    (event: RecordingLinkAvailableEvent) => {\n      if (event.link) {\n        setRecordingUrl(event.link);\n      }\n    },\n    []\n  );\n\n  const saveImagesInWorker = useCallback(\n    (\n      consultationId: number,\n      consultationTermId: number,\n      userEmail: string,\n      userId: number,\n      screenshots: { dataURL: Blob; timestamp: number }[],\n      term: string\n    ) => {\n      if (!workerRef.current) {\n        workerRef.current = new Worker(\n          new URL(\"../../../../workers/saveImageWorker.ts\", import.meta.url),\n          { type: \"module\" }\n        );\n        workerRef.current.postMessage({\n          apiUrl: API_URL, // Ensure it's available in window\n        });\n      }\n\n      workerRef.current.onmessage = (event: MessageEvent) => {\n        const { success, error } = event.data;\n\n        if (success) {\n          console.log(\"Images saved successfully via Worker.\");\n        } else {\n          console.error(\"Error saving images in Worker:\", error);\n        }\n      };\n\n      workerRef.current.onerror = (err) => {\n        console.error(\"Worker encountered an error:\", err);\n      };\n\n      workerRef.current.postMessage({\n        consultationId,\n        consultationTermId,\n        userEmail,\n        userId,\n        screenshots,\n        term,\n      });\n    },\n    []\n  );\n\n  const handleRecordingStatusChanged = useCallback(\n    async (\n      api: IJitsiMeetExternalApi,\n      getDataUrl: () => Promise<Blob | null>,\n      status: {\n        on: boolean;\n        mode: string;\n        error?: string;\n        transcription: boolean;\n      }\n    ) => {\n      if (status.on) {\n        console.log(\"Recording has started in mode:\", status);\n\n        let screenshots: {\n          dataURL: Blob;\n          timestamp: number;\n          userID: number;\n          consultationId: number | undefined;\n        }[] = [];\n\n        if (!intervalIdRef.current) {\n          intervalIdRef.current = setInterval(async () => {\n            const dataUrl = await getDataUrl();\n            if (dataUrl) {\n              screenshots.push({\n                dataURL: dataUrl,\n                timestamp: new Date().getTime(),\n                userID: jitsyData.data.userInfo.id,\n                consultationId,\n              });\n\n              if (screenshots.length === FRAME_RATE * (SEND_INTERVAL / 1000)) {\n                const currentUser = await getCurrentUser(api);\n\n                if (currentUser) {\n                  console.log(\"Saving images...\");\n\n                  saveImagesInWorker(\n                    consultationId ?? 0,\n                    consultationTermId,\n                    jitsyData.data.userInfo.email,\n                    // @ts-ignore\n                    jitsyData.data.userInfo.id,\n                    screenshots,\n                    term\n                  );\n                  screenshots = [];\n                } else {\n                  console.error(\n                    \"Failed to get current user for saving images.\"\n                  );\n                }\n              }\n            } else {\n              console.error(\"Failed to get data URL for screenshot.\");\n            }\n          }, 1000 / FRAME_RATE);\n        }\n      } else {\n        console.log(\"Recording has stopped.\");\n        if (intervalIdRef.current) {\n          clearInterval(intervalIdRef.current);\n          intervalIdRef.current = null;\n        }\n\n        if (status.error) {\n          console.error(\"Recording error:\", status.error);\n        }\n      }\n    },\n    [\n      consultationId,\n      consultationTermId,\n      jitsyData.data.userInfo.email, // @ts-ignore\n      jitsyData.data.userInfo.id,\n      term,\n      saveImagesInWorker,\n    ]\n  );\n\n  const onApiReady = useCallback(\n    async (api: IJitsiMeetExternalApi) => {\n      window.api = api;\n      await camera();\n\n      api.addListener(\"videoConferenceJoined\", () => handleConferenceJoined());\n      api.addListener(\"videoConferenceLeft\", () => handleConferenceLeft());\n\n      api.addListener(\"recordingLinkAvailable\", (event) =>\n        handleRecordingLinkAvailable(event)\n      );\n      api.on(\"recordingStatusChanged\", (status) => {\n        if (userConsentedRef.current)\n          handleRecordingStatusChanged(\n            api,\n            async () => (await getDataUrl()) as Blob,\n            status\n          );\n      });\n    },\n    [\n      camera,\n      handleConferenceJoined,\n      handleConferenceLeft,\n      getDataUrl,\n      handleRecordingStatusChanged,\n      userConsentedRef,\n      handleRecordingLinkAvailable,\n    ]\n  );\n\n  const handleReadyToClose = () => {\n    if (close) {\n      close();\n    }\n    window.api?.dispose();\n    window.location.reload();\n  };\n\n  const getProperRoomName = useCallback(() => {\n    const regex = /\\/([^/?]+)\\?/;\n    const match = jitsyData.url.match(regex);\n\n    // If there's a match, return the captured group, otherwise return null\n    return match ? match[1] : jitsyData.data.roomName;\n  }, [jitsyData]);\n\n  useEffect(() => {\n    return () => {\n      if (workerRef.current) {\n        workerRef.current.terminate();\n      }\n      if (intervalIdRef.current) {\n        clearInterval(intervalIdRef.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    const checkPermissions = async () => {\n      await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n      try {\n        if (hasCameraAccess && isMeetingActive && isStudent) {\n          setShowModal(true);\n        } else {\n          setShowModal(false);\n          if (!isStudent) {\n            setShowMeeting(true);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error checking permissions:\", error);\n        setShowModal(false);\n      }\n    };\n\n    checkPermissions();\n  }, [hasCameraAccess, isMeetingActive, isStudent, t]);\n\n  return (\n    <>\n      {jitsyData && !showModal && showMeeting && (\n        <JaaSMeeting\n          jwt={jitsyData.data.jwt}\n          appId={jitsyData.data.app_id}\n          roomName={getProperRoomName()}\n          getIFrameRef={(iframeRef) => {\n            iframeRef.style.height = \"calc(100vh - 76px)\";\n            iframeRef.style.width = \"100%\";\n          }}\n          onApiReady={onApiReady}\n          onReadyToClose={handleReadyToClose}\n          interfaceConfigOverwrite={{\n            ...jitsyData.data.interfaceConfigOverwrite,\n          }}\n          configOverwrite={{\n            ...jitsyData.data.configOverwrite,\n            prejoinConfig: {\n              enabled: false,\n            },\n            constraints: {\n              video: {\n                deviceId: localStorage.getItem(\"preferredCamera\") || undefined,\n              },\n              audio: {\n                deviceId: localStorage.getItem(\"preferredMic\") || undefined,\n              },\n            },\n          }}\n        />\n      )}\n      <StyledModal\n        onClose={() => [setShowModal(false), setShowMeeting(true)]}\n        visible={showModal}\n        animation=\"zoom\"\n        maskAnimation=\"fade\"\n        destroyOnClose={true}\n        width={468}\n        closable={false}\n        maskClosable={false}\n      >\n        <JitsyMeetingMessage\n          message={t(\"ConsultationPage.AdditionalRecording\")}\n          closeToast={() => [setShowModal(false), setShowMeeting(true)]}\n          userConsentedRef={userConsentedRef}\n        />\n      </StyledModal>\n      {!showModal && !showMeeting && <JitsyMeetingSkeleton />}\n      {!showModal &&\n        !showMeeting &&\n        cameraAccessStatus === cameraPermissions.DENIED && (\n          <StyledAccessWrapper>\n            <Text>{t(\"ConsultationPage.BlockedAccess\")}</Text>\n            <Text>{t(\"ConsultationPage.BlockedAccessEnable\")}</Text>\n            <div className=\"button-reload\">\n              <Button onClick={() => window.location.reload()}>\n                {t(\"ConsultationPage.ReloadPage\")}\n              </Button>\n            </div>\n          </StyledAccessWrapper>\n        )}\n      {recordingUrl && !isStudent && (\n        <RecordButtonWrapper>\n          <Button\n            onClick={() => recordingUrl && window.open(recordingUrl, \"_blank\")}\n          >\n            <Text>{t(\"ConsultationPage.DownloadRecording\")}</Text>\n          </Button>\n        </RecordButtonWrapper>\n      )}\n    </>\n  );\n};\n\nexport default JitsyMeeting;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport RateCourse from \"@/components/Courses/RateCourse\";\nimport { QuestionnaireModelType } from \"@/types/questionnaire\";\n\nimport { useQuestionnaires } from \"@/hooks/questionnaires\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { useRoles } from \"@/hooks/useRoles\";\n\ninterface Props {\n  entityModel: QuestionnaireModelType;\n  entityId: number;\n  showModal?: boolean;\n  onClose?: () => void;\n  onFinish?: () => void;\n  onSuccesGetQuestionnaires?: (isAnyQuestionnaires: boolean) => void;\n  setIsEnded?: (isEnded: boolean) => void;\n}\n\nexport const EndMeetingQuestionnairesModal = ({\n  entityId,\n  entityModel,\n  onSuccesGetQuestionnaires,\n  setIsEnded,\n}: Props) => {\n  const {\n    questionnaires: questionnairesList,\n    loading,\n    // error,\n    getQuestionnaires,\n  } = useQuestionnaires({\n    entityId: entityId || 0,\n    entityModel: entityModel,\n  });\n\n  interface StateType {\n    show: boolean;\n    step: number;\n    loading: boolean;\n\n    endMeetingQuestionnaires: API.Questionnaire[];\n  }\n\n  const [state, setState] = useState<StateType>({\n    show: false,\n    step: 0,\n    loading: true,\n    endMeetingQuestionnaires: [],\n  });\n\n  const { isStudent, isTutor } = useRoles();\n\n  const questionnaires = useMemo(() => {\n    return questionnairesList.filter((questionnaire) =>\n      questionnaire.models.some((model) => {\n        if (model.model_type_title === entityModel) {\n          if (model.model_type_title === QuestionnaireModelType.CONSULTATION) {\n            // Additional filters for \"consultation\"\n            return (\n              // @ts-ignore add to sdk\n              (isStudent && model.target_group === \"user\") || // @ts-ignore add to sdk\n              (isTutor && model.target_group === \"author\")\n            );\n          }\n\n          return true;\n        }\n        return false;\n      })\n    );\n  }, [questionnairesList, isStudent, isTutor, entityModel]);\n\n  const categorizedQuestionnaires = useCallback(() => {\n    if (!questionnaires) return;\n\n    const categorized = questionnaires.reduce(\n      (\n        acc: {\n          endMeetingQuestionnaires: API.Questionnaire[];\n        },\n        questionnaire\n      ) => {\n        const frequency = questionnaire.models.find(\n          (model) =>\n            model.model_type_title === entityModel &&\n            model.model_id === entityId\n          // @ts-ignore add to sdk\n        )?.display_frequency_minutes;\n\n        if (frequency !== null && frequency !== undefined && frequency === 0) {\n          acc.endMeetingQuestionnaires.push(questionnaire);\n        }\n        return acc;\n      },\n      { endMeetingQuestionnaires: [] }\n    );\n\n    setState((prevState) => ({\n      ...prevState,\n      ...categorized,\n    }));\n  }, [questionnaires, entityModel, entityId]);\n\n  const moveToNextQuestionnaire = useCallback(() => {\n    setState((prevState) => ({\n      ...prevState,\n      step: prevState.step + 1,\n    }));\n    const timer = setTimeout(() => {\n      setState((prevState) => ({\n        ...prevState,\n        show: true,\n      }));\n    }, 500);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setState((prevState) => ({\n      ...prevState,\n      show: false,\n    }));\n\n    if (state.step < state.endMeetingQuestionnaires.length - 1) {\n      moveToNextQuestionnaire();\n    } else {\n      setState((prevState) => ({\n        ...prevState,\n        show: false,\n      }));\n      setIsEnded && setIsEnded(false);\n    }\n  }, [state, moveToNextQuestionnaire, setIsEnded]);\n\n  useEffect(() => {\n    getQuestionnaires();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [entityId]);\n\n  useEffect(() => {\n    categorizedQuestionnaires();\n  }, [questionnaires, categorizedQuestionnaires, onSuccesGetQuestionnaires]);\n\n  useEffect(() => {\n    let timer: NodeJS.Timeout | undefined;\n    if (state.endMeetingQuestionnaires.length) {\n      setState((prevState) => ({\n        ...prevState,\n        show: true,\n      }));\n    }\n\n    return () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n    };\n  }, [questionnaires, state.endMeetingQuestionnaires]);\n\n  return (\n    <>\n      {state.show && entityId && !!questionnaires.length && !loading && (\n        <RateCourse\n          entityModel={entityModel}\n          entityId={Number(entityId)}\n          visible={state.show}\n          onClose={handleClose}\n          questionnaire={state.endMeetingQuestionnaires[state.step]}\n        />\n      )}\n    </>\n  );\n};\n","import { useCallback, useContext, useEffect, useState } from \"react\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\nimport { Modal } from \"@escolalms/components/lib/components/atoms/Modal/Modal\";\nimport { JitsyData } from \"@escolalms/sdk/lib/types\";\nimport ContentLoader from \"@/components/_App/ContentLoader\";\nimport { ConsultationMeetModalStyles } from \"./MeetModalStyles\";\nimport JitsyMeeting from \"@/components/Consultations/ConsultationCard/JitsyMeeting\";\nimport { QuestionnaireModelType } from \"@/types/questionnaire\";\nimport { QuestionnairesModal } from \"@/components/Courses/Course/CoursePanelLayout/FinishPage/Rate\";\nimport { ConsultationModalContext } from \"@/components/Consultations/ConsultationCard/Buttons/context\";\nimport { EndMeetingQuestionnairesModal } from \"@/components/Consultations/ConsultationCard/EndMeetingQuestionnaires\";\n\ninterface Props {\n  onClose: () => void;\n}\n\nconst ConsultationMeetModal = ({ onClose }: Props) => {\n  const [meetData, setMeetData] = useState<JitsyData | null>(null);\n  const [isEnded, setIsEnded] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const { generateConsultationJitsy } = useContext(EscolaLMSContext);\n  const consultationModalContext = useContext(ConsultationModalContext);\n\n  useEffect(() => {\n    const getMeetUrl = async () => {\n      setLoading(true);\n      if (consultationModalContext?.consultationData) {\n        const res = await generateConsultationJitsy(\n          consultationModalContext?.consultationData?.consultationTermId,\n          consultationModalContext?.consultationData?.term\n        );\n        if (res.success) {\n          setMeetData((res as { data: JitsyData }).data);\n        }\n        setLoading(false);\n      }\n    };\n\n    getMeetUrl();\n    return () => {\n      Object.keys(localStorage).forEach((key) => {\n        if (key.startsWith(\"questionnaire_\")) {\n          localStorage.removeItem(key);\n        }\n      });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [consultationModalContext?.consultationData]);\n\n  useEffect(() => {\n    setIsEnded(false);\n  }, [consultationModalContext?.consultationData]);\n\n  const handleOnClose = useCallback(() => {\n    setIsEnded(true);\n    consultationModalContext?.setModalOpen?.(false);\n    onClose();\n    window.location.reload();\n  }, [setIsEnded, onClose, consultationModalContext]);\n\n  return (\n    <>\n      <Modal\n        onClose={handleOnClose}\n        visible={consultationModalContext?.isModalOpen}\n        animation=\"zoom\"\n        maskAnimation=\"fade\"\n        destroyOnClose={true}\n        width=\"100vw\"\n        height=\"100vh\"\n        bodyStyle={{\n          minHeight: \"93vh\",\n        }}\n      >\n        <ConsultationMeetModalStyles>\n          {loading && <ContentLoader />}\n\n          {!loading && meetData && (\n            <JitsyMeeting\n              jitsyData={meetData}\n              close={handleOnClose}\n              consultationId={\n                consultationModalContext?.consultationData?.consultationId\n              }\n              consultationTermId={\n                consultationModalContext?.consultationData\n                  ?.consultationTermId ?? 0\n              }\n              term={consultationModalContext?.consultationData?.term ?? \"\"}\n            />\n          )}\n        </ConsultationMeetModalStyles>\n        <QuestionnairesModal\n          entityId={Number(\n            consultationModalContext?.consultationData?.consultationId\n          )}\n          entityModel={QuestionnaireModelType.CONSULTATION}\n        />\n      </Modal>\n      {isEnded && (\n        <EndMeetingQuestionnairesModal\n          entityId={Number(\n            consultationModalContext?.consultationData?.consultationId\n          )}\n          entityModel={QuestionnaireModelType.CONSULTATION}\n          setIsEnded={setIsEnded}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ConsultationMeetModal;\n","import { useContext, useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Tabs } from \"@escolalms/components/lib/components/atoms/Tabs/Tabs\";\nimport ProfileConsultations from \"@/components/Profile/ProfileConsultations\";\nimport ProfileTutorConsultations from \"@/components/Profile/ProfileTutorConsultations\";\nimport { useRoles } from \"@/hooks/useRoles\";\nimport Layout from \"@/components/_App/Layout\";\nimport { Content } from \"@/pages/user/MyProfile\";\nimport Container from \"@/components/Common/Container\";\nimport { ConsultationModalContext } from \"@/components/Consultations/ConsultationCard/Buttons/context\";\nimport ConsultationMeetModal from \"@/components/Consultations/ConsultationCard/MeetModal\";\n\nexport enum ConsultationStatus {\n  UPCOMING = \"in_coming\",\n  PAST = \"is_ended\",\n  STARTED = \"is_started\",\n}\n\nconst MyConsultationsPage = () => {\n  const { t } = useTranslation();\n  const { isTutor } = useRoles();\n\n  const consultationModalContext = useContext(ConsultationModalContext);\n\n  const myConsultationsTabs = useMemo(\n    () => ({\n      tabs: isTutor\n        ? [\n            {\n              label: t(\"MyProfilePage.Upcoming\"),\n              key: 1,\n              component: (\n                <ProfileTutorConsultations type={ConsultationStatus.UPCOMING} />\n              ),\n            },\n            {\n              label: t(\"MyProfilePage.Archived\"),\n              key: 2,\n              component: (\n                <ProfileTutorConsultations type={ConsultationStatus.PAST} />\n              ),\n            },\n            {\n              label: t(\"MyProfilePage.BoughtUpcoming\"),\n              key: 3,\n              component: (\n                <ProfileConsultations type={ConsultationStatus.UPCOMING} />\n              ),\n            },\n            {\n              label: t(\"MyProfilePage.BoughtArchived\"),\n              key: 4,\n              component: (\n                <ProfileConsultations type={ConsultationStatus.PAST} />\n              ),\n            },\n          ]\n        : [\n            {\n              label: t(\"MyProfilePage.Upcoming\"),\n              key: 1,\n              component: (\n                <ProfileConsultations type={ConsultationStatus.UPCOMING} />\n              ),\n            },\n            {\n              label: t(\"MyProfilePage.Archived\"),\n              key: 2,\n              component: (\n                <ProfileConsultations type={ConsultationStatus.PAST} />\n              ),\n            },\n          ],\n      defaultActiveKey: 1,\n    }),\n    [isTutor, t]\n  );\n\n  return (\n    <Layout>\n      <Content>\n        <Container>\n          <div className=\"courses-wrapper\">\n            <Tabs\n              tabs={myConsultationsTabs.tabs}\n              defaultActiveKey={myConsultationsTabs.defaultActiveKey}\n            />\n          </div>\n\n          <ConsultationMeetModal\n            onClose={() => [consultationModalContext?.setModalOpen(false)]}\n          />\n        </Container>\n      </Content>\n    </Layout>\n  );\n};\n\nexport default MyConsultationsPage;\n"],"names":["ProfileConsultations","type","userConsultations","fetchUserConsultations","token","useContext","EscolaLMSContext","t","useTranslation","consultationsData","setConsultationsData","useState","filterConstulations","useMemo","filtered","_a","consultation","ConsultationStatus","item","refreshConsultation","useCallback","id","termId","response","API_URL","responseIndex","prev","index","error","handleRefreshIfTimePassed","useEffect","interval","ProfileConsultationsProvider","jsx","Row","_","Col","CourseCardSkeleton","Text","isMobile","Fragment","ConsultationCard","ProfileConsultations$1","memo","ConsultationTutorCardStyles","styled","theme","ConsultationTutorCardImage","product","Link","ResponsiveImage","CourseImgPlaceholder","StatusStyles","StatusTypes","Status","status","name","useTheme","color","ConsultationTutorCardContentUserInfoStyles","ButtonWrapper","statuses","ConsultationTutorCardContentUserInfo","approveConsultationTerm","rejectConsultationTerm","renderStatus","user","jsxs","IconText","IconSuccess","IconCircleError","ConsultationTutorCardContentDateInfoButtonsStyles","ConsultationTutorCardContentDateInfo","isEnded","isStarted","isReported","isApproved","isNotReported","isRejected","DateInfo","DateInfoTypes","addTimeToDate","extractTimeUnits","ConsultationCardJoinButton","formatDate","TimeInfoStyles","TimeInfo","time","IconTime","ConsultationTutorCardContentStyles","ConsultationTutorCardContent","ConsultationTutorCardButtons","menuItems","DropdownMenu","Button","IconMenuVertical","ConsultationTutorCardStatusStyles","ConsultationTutorCardStatus","is_ended","ConsultationTutorCard","props","CourseCard","ProfileTutorConsultations","tutorConsultations","fetchTutorConsultations","ProfileTutorConsultations$1","ConsultationMeetModalStyles","DEFAULT_DOMAIN","JAAS_STAGING_DOMAIN","JAAS_PROD_DOMAIN","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","loadExternalApi","domain","release","appId","script","releaseParam","appIdPath","scriptPromise","fetchExternalApi","getRoomName","roomName","tenant","getAppId","roomParts","getJaaSDomain","useStaging","instancesCounter","generateComponentId","prefix","JitsiMeeting","configOverwrite","interfaceConfigOverwrite","jwt","invitees","devices","userInfo","lang","Spinner","onApiReady","onReadyToClose","getIFrameRef","loading","setLoading","apiLoaded","setApiLoaded","externalApi","useRef","apiRef","meetingRef","componentId","api","loadIFrame","JitsiMeetExternalAPI","renderLoadingSpinner","_jsx","_jsxs","_Fragment","__rest","s","p","i","JaaSMeeting","rest","cameraPermissions","useCamera","hasCameraAccess","setHasCameraAccess","cameraAccessStatus","setCameraAccessStatus","streamRef","videoRef","workerRef","getCameraStream","stream","err","restartVideoTrack","track","camera","getDataUrl","canvasElement","ctx","settings","sourceElement","imageBitmap","event","success","blob","permissionStatus","getCurrentUser","mainRoom","room","participant","Container","JitsyMeetingMessage","message","closeToast","userConsentedRef","Title","SkeletonWrapper","JitsiMeetingSkeleton","Skeleton","StyledModal","Modal","StyledAccessWrapper","RecordButtonWrapper","FRAME_RATE","SEND_INTERVAL","JitsyMeeting","jitsyData","term","consultationTermId","consultationId","close","showMeeting","setShowMeeting","showModal","setShowModal","isMeetingActive","intervalIdRef","recordingUrl","setRecordingUrl","isStudent","useRoles","handleConferenceJoined","handleConferenceLeft","handleRecordingLinkAvailable","saveImagesInWorker","userEmail","userId","screenshots","handleRecordingStatusChanged","dataUrl","handleReadyToClose","getProperRoomName","regex","match","iframeRef","JitsyMeetingSkeleton","EndMeetingQuestionnairesModal","entityId","entityModel","onSuccesGetQuestionnaires","setIsEnded","questionnairesList","getQuestionnaires","useQuestionnaires","state","setState","isTutor","questionnaires","questionnaire","model","QuestionnaireModelType","categorizedQuestionnaires","categorized","acc","frequency","prevState","moveToNextQuestionnaire","timer","handleClose","RateCourse","ConsultationMeetModal","onClose","meetData","setMeetData","generateConsultationJitsy","consultationModalContext","ConsultationModalContext","res","_b","key","handleOnClose","ContentLoader","_c","QuestionnairesModal","_d","_e","MyConsultationsPage","myConsultationsTabs","Layout","Content","Tabs"],"mappings":"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","x_google_ignoreList":[13,14,15,16,17]}