{"version":3,"file":"index-BoAbte4Y.js","sources":["../../src/hooks/questionnaires/index.tsx","../../src/components/Courses/Course/CoursePanelLayout/FinishPage/Rate/index.tsx"],"sourcesContent":["import { useCallback, useContext, useState } from \"react\";\nimport { QuestionType } from \"@/types/questionnaire\";\nimport { toast } from \"@/utils/toast\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { t } from \"i18next\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react\";\n\ntype UseQuestionnairesProps = {\n  entityId: number;\n  entityModel: string;\n};\n\nexport const useQuestionnaires = ({\n  entityId,\n  entityModel,\n}: UseQuestionnairesProps) => {\n  const { fetchQuestionnaires, fetchQuestionnaire } =\n    useContext(EscolaLMSContext);\n  const [questionnaires, setQuestionnaires] = useState<API.Questionnaire[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const getQuestionnaire = useCallback(\n    async (questionnaireId: number) => {\n      try {\n        const response = await fetchQuestionnaire(\n          entityModel,\n          entityId,\n          questionnaireId\n        );\n        return response?.success ? response.data.questions : null;\n      } catch (error) {\n        toast(t<string>(\"UnexpectedError\"), \"error\");\n        console.error(error);\n        return null;\n      }\n    },\n    [entityId, entityModel, fetchQuestionnaire]\n  );\n\n  const getQuestionnaires = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetchQuestionnaires(entityModel, entityId);\n\n      if (response?.success) {\n        const questionnairesWithCombinedQuestions = await Promise.all(\n          response.data.map(async (data) => {\n            const questions = await getQuestionnaire(data.id);\n\n            const combinedQuestions = data.questions.reduce(\n              (result, element) => {\n                const matchingElement = questions?.find(\n                  (item) => item.id === element.id\n                );\n\n                const updatedElement = {\n                  ...element,\n                  rate: matchingElement?.rate,\n                  note: matchingElement?.note,\n                };\n                result.push(updatedElement);\n\n                return result;\n              },\n              [] as API.QuestionnaireQuestion[]\n            );\n\n            return {\n              ...data,\n              questions: combinedQuestions.sort(\n                (a, b) => a.position - b.position\n              ),\n            };\n          })\n        );\n\n        setQuestionnaires(\n          questionnairesWithCombinedQuestions.filter(\n            (q) => q.questions.length > 0\n          )\n        );\n      }\n    } catch (error) {\n      setError(\"Failed to fetch questionnaires\");\n      toast(t<string>(\"UnexpectedError\"), \"error\");\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  }, [entityId, entityModel, fetchQuestionnaires, getQuestionnaire]);\n\n  const getReviewQuestion = useCallback(\n    ({\n      questionnaireId,\n      questionType,\n    }: {\n      questionnaireId: number | null;\n      questionType: QuestionType;\n    }) => {\n      return questionnaires\n        ?.find((q) => q.id === questionnaireId)\n        ?.questions.filter((item) => item.public_answers)\n        .find((item) => item.type === questionType)?.id;\n    },\n    [questionnaires]\n  );\n\n  return {\n    questionnaires,\n    loading,\n    error,\n    getQuestionnaires,\n    getReviewQuestion,\n  };\n};\n","import { useCallback, useContext, useEffect, useMemo, useState } from \"react\";\nimport RateCourse from \"@/components/Courses/RateCourse\";\nimport { QuestionnaireModelType } from \"@/types/questionnaire\";\nimport { EscolaLMSContext } from \"@escolalms/sdk/lib/react/context\";\nimport { useQuestionnaires } from \"@/hooks/questionnaires\";\nimport { API } from \"@escolalms/sdk/lib\";\nimport { useRoles } from \"@/hooks/useRoles\";\nimport { metaDataKeys } from \"@/utils/meta\";\n\ninterface Props {\n  entityModel: QuestionnaireModelType;\n  entityId: number;\n  showModal?: boolean;\n  onClose?: () => void;\n  onFinish?: () => void;\n  onSuccesGetQuestionnaires?: (isAnyQuestionnaires: boolean) => void;\n}\n\nexport const QuestionnairesModal = ({\n  entityId,\n  entityModel,\n  onSuccesGetQuestionnaires,\n}: Props) => {\n  const {\n    questionnaires: questionnairesList,\n    loading,\n    // error,\n    getQuestionnaires,\n  } = useQuestionnaires({\n    entityId: entityId || 0,\n    entityModel: entityModel,\n  });\n  const { settings } = useContext(EscolaLMSContext);\n  const questionnaireFirstime =\n    settings?.value?.config[metaDataKeys.questionnaireFirstTimeMetaKey];\n\n  interface StateType {\n    show: boolean;\n    step: number;\n    loading: boolean;\n    firstVisit: boolean;\n    firstTimeQuestionnaires: API.Questionnaire[];\n    reShowableQuestionnaires: API.Questionnaire[];\n  }\n\n  const [state, setState] = useState<StateType>({\n    show: false,\n    step: 0,\n    loading: true,\n    firstVisit: true,\n    firstTimeQuestionnaires: [],\n    reShowableQuestionnaires: [],\n  });\n\n  const { isStudent, isTutor } = useRoles();\n\n  const questionnaires = useMemo(() => {\n    return questionnairesList.filter((questionnaire) =>\n      questionnaire.models.some((model) => {\n        if (model.model_type_title === entityModel) {\n          if (model.model_type_title === QuestionnaireModelType.CONSULTATION) {\n            // Additional filters for \"consultation\"\n            return (\n              // @ts-ignore add to sdk\n              (isStudent && model.target_group === \"user\") || // @ts-ignore add to sdk\n              (isTutor && model.target_group === \"author\")\n            );\n          }\n\n          return true;\n        }\n        return false;\n      })\n    );\n  }, [questionnairesList, isStudent, isTutor, entityModel]);\n\n  const categorizedQuestionnaires = useCallback(() => {\n    if (!questionnaires) return;\n\n    const categorized = questionnaires.reduce(\n      (\n        acc: {\n          firstTimeQuestionnaires: API.Questionnaire[];\n          reShowableQuestionnaires: API.Questionnaire[];\n        },\n        questionnaire\n      ) => {\n        const frequency = questionnaire.models.find(\n          (model) =>\n            model.model_type_title === entityModel &&\n            model.model_id === entityId\n          // @ts-ignore add to sdk\n        )?.display_frequency_minutes;\n\n        if (!frequency && frequency !== undefined && frequency !== 0) {\n          acc.firstTimeQuestionnaires.push(questionnaire);\n        }\n\n        if (frequency !== null && frequency !== undefined && frequency !== 0) {\n          acc.reShowableQuestionnaires.push(questionnaire);\n        }\n        return acc;\n      },\n      { firstTimeQuestionnaires: [], reShowableQuestionnaires: [] }\n    );\n\n    setState((prevState) => ({\n      ...prevState,\n      ...categorized,\n    }));\n  }, [questionnaires, entityModel, entityId]);\n\n  const getQuestionnaireFrequency = useCallback(\n    (questionnaire: API.Questionnaire) => {\n      return questionnaire.models.find(\n        (model) =>\n          model.model_type_title === entityModel && model.model_id === entityId\n        // @ts-ignore add to sdk\n      )?.display_frequency_minutes;\n    },\n    [entityModel, entityId]\n  );\n\n  const updateDisplayTime = useCallback(\n    (questionnaire: API.Questionnaire) => {\n      const questionareFrequency = getQuestionnaireFrequency(questionnaire);\n\n      if (questionareFrequency) {\n        localStorage.setItem(\n          `questionnaire_${questionnaire.id}_last_display_time`,\n          Date.now().toString()\n        );\n      }\n    },\n    [getQuestionnaireFrequency]\n  );\n\n  const moveToNextQuestionnaire = useCallback(() => {\n    setState((prevState) => ({\n      ...prevState,\n      step: prevState.step + 1,\n    }));\n    const timer = setTimeout(() => {\n      setState((prevState) => ({\n        ...prevState,\n        show: true,\n      }));\n    }, 500);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    updateDisplayTime(\n      [...state.firstTimeQuestionnaires, ...state.reShowableQuestionnaires][\n        state.step\n      ]\n    );\n\n    setState((prevState) => ({\n      ...prevState,\n      show: false,\n    }));\n\n    if (\n      state.step <\n      [...state.firstTimeQuestionnaires, ...state.reShowableQuestionnaires]\n        .length -\n        1\n    ) {\n      if (state.firstVisit) {\n        moveToNextQuestionnaire();\n      }\n    } else {\n      setState((prevState) => ({\n        ...prevState,\n        show: false,\n        firstVisit: false,\n      }));\n    }\n  }, [state, updateDisplayTime, moveToNextQuestionnaire]);\n\n  const getDisplayFrequencyInMs = useCallback(\n    (questionnaire: API.Questionnaire) => {\n      const frequencyMinutes = getQuestionnaireFrequency(questionnaire);\n      return (frequencyMinutes ?? 0) * 60 * 1000;\n    },\n    [getQuestionnaireFrequency]\n  );\n\n  const shouldDisplayQuestionnaire = useCallback(\n    (questionnaire: API.Questionnaire) => {\n      const lastDisplayTime = localStorage.getItem(\n        `questionnaire_${questionnaire.id}_last_display_time`\n      );\n      if (!lastDisplayTime) return;\n      const displayFrequency = getDisplayFrequencyInMs(questionnaire);\n\n      const timeSinceLastDisplay = Date.now() - Number(lastDisplayTime);\n      return !lastDisplayTime || timeSinceLastDisplay >= displayFrequency;\n    },\n    [getDisplayFrequencyInMs]\n  );\n\n  const displayQuestionnaire = useCallback(\n    (questionnaire: API.Questionnaire) => {\n      setState((prevState) => ({\n        ...prevState,\n        show: true,\n        step: [\n          ...state.firstTimeQuestionnaires,\n          ...state.reShowableQuestionnaires,\n        ].findIndex((q) => q.id === questionnaire.id),\n      }));\n    },\n    [state]\n  );\n\n  const runDisplayInterval = useCallback(() => {\n    return setInterval(() => {\n      state.reShowableQuestionnaires.forEach((questionnaire) => {\n        if (shouldDisplayQuestionnaire(questionnaire)) {\n          displayQuestionnaire(questionnaire);\n        }\n      });\n    }, 1000);\n  }, [shouldDisplayQuestionnaire, displayQuestionnaire, state]);\n\n  useEffect(() => {\n    getQuestionnaires();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [entityId]);\n\n  useEffect(() => {\n    let timer: NodeJS.Timeout;\n    if (questionnaires.length && state.firstVisit) {\n      if (questionnaireFirstime) {\n        timer = setTimeout(() => {\n          setState((prevState) => ({\n            ...prevState,\n            show: true,\n          }));\n        }, questionnaireFirstime * 60 * 1000);\n      } else {\n        setState((prevState) => ({\n          ...prevState,\n          show: true,\n        }));\n      }\n    }\n    if (!!questionnaires.length) {\n      onSuccesGetQuestionnaires && onSuccesGetQuestionnaires(true);\n    }\n    categorizedQuestionnaires();\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [\n    questionnaireFirstime,\n    questionnaires,\n    onSuccesGetQuestionnaires,\n    state.firstVisit,\n    categorizedQuestionnaires,\n  ]);\n\n  useEffect(() => {\n    const intervalId = runDisplayInterval();\n\n    return () => clearInterval(intervalId);\n  }, [state.reShowableQuestionnaires, entityModel, runDisplayInterval]);\n\n  return (\n    <>\n      {state.show &&\n        entityId &&\n        !![...state.firstTimeQuestionnaires, ...state.reShowableQuestionnaires]\n          .length &&\n        !loading && (\n          <RateCourse\n            entityModel={entityModel}\n            entityId={Number(entityId)}\n            visible={state.show}\n            onClose={handleClose}\n            questionnaire={\n              [\n                ...state.firstTimeQuestionnaires,\n                ...state.reShowableQuestionnaires,\n              ][state.step]\n            }\n          />\n        )}\n    </>\n  );\n};\n"],"names":["useQuestionnaires","entityId","entityModel","fetchQuestionnaires","fetchQuestionnaire","useContext","EscolaLMSContext","questionnaires","setQuestionnaires","useState","loading","setLoading","error","setError","getQuestionnaire","useCallback","questionnaireId","response","toast","t","getQuestionnaires","questionnairesWithCombinedQuestions","data","questions","combinedQuestions","result","element","matchingElement","item","updatedElement","a","b","q","getReviewQuestion","questionType","_b","_a","QuestionnairesModal","onSuccesGetQuestionnaires","questionnairesList","settings","questionnaireFirstime","metaDataKeys","state","setState","isStudent","isTutor","useRoles","useMemo","questionnaire","model","QuestionnaireModelType","categorizedQuestionnaires","categorized","acc","frequency","prevState","getQuestionnaireFrequency","updateDisplayTime","moveToNextQuestionnaire","timer","handleClose","getDisplayFrequencyInMs","shouldDisplayQuestionnaire","lastDisplayTime","displayFrequency","timeSinceLastDisplay","displayQuestionnaire","runDisplayInterval","useEffect","intervalId","jsx","RateCourse"],"mappings":"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"}