import{f as N,r as n,j as r,b as u,i as d,M as m,E as C,k as y,C as P,v as b,o as E,L as v}from"./index-BsLXwVX-.js";import{P as f}from"./index-DduWXmdR.js";import{u as R,C as k,a as L}from"./index-RwW-U-6P.js";import"./index-CFmML0be.js";import"./ResponsiveImage-KgADMS5g.js";import"./Upload-CJayUHoB.js";import"./index-B6JCoH2u.js";import"./app-B2E7767C.js";import"./date-C5z6T5_w.js";const M=({program:o})=>{var c;const{topic:e,lesson:s,onNextTopicPreview:a,getNextPrevTopic:t}=R(o,"/courses/preview/"),{t:i}=N();return n.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[e==null?void 0:e.id,s==null?void 0:s.id]),r.jsx(u.Fragment,{children:r.jsx("div",{className:"course-program course-program-page",children:r.jsx("div",{className:"course-program-container",children:r.jsxs("div",{className:"course-program-wrapper course-program-wrapper-preview",children:[r.jsxs("div",{className:"course-program-player",children:[r.jsxs("div",{className:"course-program-player-content",children:[r.jsx("h2",{children:e==null?void 0:e.title}),e&&e.introduction&&r.jsx(d.Col,{sm:12,md:12,lg:12,children:r.jsx("div",{className:"container-md",children:r.jsx(m.MarkdownRenderer,{children:e.introduction})})}),r.jsx("div",{className:"course-program-player-content__wrapper",style:{...((c=e==null?void 0:e.json)==null?void 0:c.wrapperStyle)||{}},children:r.jsx(k,{preview:!0,topic:e,isThereAnotherTopic:!!t(Number(e==null?void 0:e.id))})})]}),r.jsxs(d.Row,{children:[s&&s.summary&&r.jsx(d.Col,{sm:12,md:12,lg:12,children:r.jsx("div",{className:"course-program-summary",children:r.jsx(m.MarkdownRenderer,{children:s.summary})})}),e&&e.summary&&r.jsx(d.Col,{sm:12,md:12,lg:12,children:r.jsx("div",{className:"course-program-summary",children:r.jsx(m.MarkdownRenderer,{children:e.summary})})})]}),r.jsx("div",{className:"course-program-player-next",children:r.jsxs("button",{className:"default-btn default-btn-equal",onClick:()=>a(),children:[r.jsxs("div",{className:"course-program-player-next-button__wrapper",children:[i("Next Topic")," >"]}),r.jsx("span",{})]})})]}),r.jsx(L,{course:o,topicId:Number(e==null?void 0:e.id)})]})})})})},S=({program:o})=>{var x,h;const e=(h=(x=o==null?void 0:o.scorm)==null?void 0:x.scos)==null?void 0:h.find(l=>l.entry_url!==void 0),s=e==null?void 0:e.uuid,a=n.useRef(null),[t,i]=n.useState(0),c=610,{apiUrl:w}=n.useContext(y.EscolaLMSContext);return n.useEffect(()=>{var l,p,j,g;a.current&&i(((g=(j=(p=(l=a.current)==null?void 0:l.contentWindow)==null?void 0:p.document)==null?void 0:j.body)==null?void 0:g.scrollHeight)||0)},[a]),!e&&!s?r.jsx(u.Fragment,{}):r.jsx(u.Fragment,{children:r.jsx("div",{className:"container-fluid course-program",children:r.jsx("div",{className:"course-program-player scorm",style:{height:`${c+t}px`},children:r.jsx("iframe",{title:"scorm-player",ref:a,src:`${w}/api/scorm/play/${s}`,scrolling:"no"})})})})},U=()=>{var t,i;const{t:o}=N(),{id:e}=C(),{program:s,fetchProgram:a}=n.useContext(y.EscolaLMSContext);return n.useEffect(()=>{e&&a(Number(e))},[e,a]),s.loading?r.jsx(f,{}):s.error?r.jsx(P,{children:r.jsxs("div",{className:"alert alert-danger",role:"alert",children:[r.jsx("h4",{className:"alert-heading",children:o("Error")}),r.jsxs("p",{children:[" ",s.error.message||s.error.error]}),r.jsx("hr",{}),r.jsxs("p",{className:"mb-0",children:[o("CoursePage.Preview.SeeOther"),r.jsx(b,{to:E.courses,children:o("Courses")}),"."]})]})}):s.value&&((i=(t=s==null?void 0:s.value)==null?void 0:t.scorm)!=null&&i.id)?r.jsx(v,{children:r.jsx(S,{program:s.value})}):s.value&&s.value.lessons&&s.value.lessons.length?r.jsxs(v,{children:[r.jsx(M,{program:s.value}),";"]}):r.jsx(f,{})};export{U as default};
